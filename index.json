[{"content":"å¸Œæœ›ä»Šåå¯ä»¥ç»å¸¸æ›´æ–° âœ ğŸŒŸ åšå®¢æ›´æ¢äº†æ–°çš„æ¡†æ¶ hugo å’Œæ–°ä¸»é¢˜ PaperMod\nğŸŒŸ åŸå…ˆçš„BLOGå†…å®¹éƒ½å·²ç»åŒæ­¥è¿‡æ¥ï¼Œä»Šåå°†åªæ›´æ–°å½“å‰BLOG\n","permalink":"https://haventong.github.io/post/new-theme-papermod/","summary":"å¸Œæœ›ä»Šåå¯ä»¥ç»å¸¸æ›´æ–° âœ ğŸŒŸ åšå®¢æ›´æ¢äº†æ–°çš„æ¡†æ¶ hugo å’Œæ–°ä¸»é¢˜ PaperMod ğŸŒŸ åŸå…ˆçš„BLOGå†…å®¹éƒ½å·²ç»åŒæ­¥è¿‡æ¥ï¼Œä»Šåå°†åªæ›´æ–°å½“å‰BLOG","title":"New Theme PaperModğŸ˜"},{"content":"mintedæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨LaTexä¸­æ’å…¥ä»£ç çš„åŒ…ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ï¼š\né…ç½® 1 2 3 4 5 6 7 8 9 10 11 12  \\usepackage{xcolor} \\usepackage{minted} \\definecolor{bg}{rgb}{0.95,0.95,0.95} \\setminted{ frame=lines, tabsize=4, encoding=utf8, bgcolor=bg, fontsize=\\footnotesize, linenos, breaklines, }   ä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  \\begin{listing}[htbp] \\begin{minted}{Python} class SentenceBERT(nn.Module): \u0026#34;\u0026#34;\u0026#34; Siamese ç»“æ„ï¼Œä¸¤ä¸ªå¥å­åˆ†åˆ«è¾“å…¥BERT, [CLS] sen_a [SEP], [CLS] sen_b [SEP] \u0026#34;\u0026#34;\u0026#34; def __init__(self, config): super(SentenceBERT, self).__init__() self.config = config self.bert = BertModel.from_pretrained(config.model_name) self.dropout = nn.Dropout(config.dropout_rate) self.bert_config = self.bert.config self.fc = nn.Linear(self.bert_config.hidden_size * 3, config.num_classes) def forward(self, sen_a_input_ids, sen_a_token_type_ids, sen_a_attention_mask, sen_b_input_ids, sen_b_token_type_ids, sen_b_attention_mask, inference=False): sen_a_bert_outputs = self.bert( input_ids=sen_a_input_ids, token_type_ids=sen_a_token_type_ids, attention_mask=sen_a_attention_mask ) sen_b_bert_outputs = self.bert( input_ids=sen_b_input_ids, token_type_ids=sen_b_token_type_ids, attention_mask=sen_b_attention_mask ) sen_a_bert_output, sen_b_bert_output = sen_a_bert_outputs[0], sen_b_bert_outputs[0] # (batch_size, seq_len, hidden_size) sen_a_len, sen_b_len = (sen_a_attention_mask != 0).sum(dim=1, keepdim=True), (sen_b_attention_mask != 0).sum(dim=1, keepdim=True) sen_a_pooling, sen_b_pooling = sen_a_bert_output.sum(dim=1) / sen_a_len, sen_b_bert_output.sum(dim=1) / sen_b_len # (batch_size, hidden_size) if inference: similarity = F.cosine_similarity(sen_a_pooling, sen_b_pooling, dim=1) return similarity hidden = torch.cat([sen_a_pooling, sen_b_pooling, torch.abs(sen_a_pooling - sen_b_pooling)], dim=1) return self.fc(hidden) \\end{minted} \\caption{model.py} \\label{model} \\end{listing}   ä»¥ä¸Šç‰‡æ®µç¼–è¯‘åçš„å½¢å¼å¦‚ä¸‹ï¼š\n ","permalink":"https://haventong.github.io/post/latex%E4%B8%AD%E6%8F%92%E5%85%A5%E4%BB%A3%E7%A0%81/","summary":"mintedæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨LaTexä¸­æ’å…¥ä»£ç çš„åŒ…ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨ï¼š é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 \\usepackage{xcolor} \\usepackage{minted} \\definecolor{bg}{rgb}{0.95,0.95,0.95} \\setminted{ frame=lines, tabsize=4, encoding=utf8, bgcolor=bg, fontsize=\\footnotesize, linenos, breaklines, } ä½¿ç”¨ 1 2 3 4 5 6","title":"Latexä¸­æ’å…¥ä»£ç "},{"content":"çºªå¿µä¸€ä¸‹äººç”Ÿç¬¬ä¸€æ¬¡AK: åç»­é¢˜è§£ä¼šå°½å¿«è¡¥å……\n","permalink":"https://haventong.github.io/post/first-ak/","summary":"çºªå¿µä¸€ä¸‹äººç”Ÿç¬¬ä¸€æ¬¡AK: åç»­é¢˜è§£ä¼šå°½å¿«è¡¥å……","title":"First Ak"},{"content":"æ‹“æ‰‘æ’åº è¿‘æ—¥å®ç°äº†ä¸€ä¸‹æ‹“æ‰‘æ’åºï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹æ‹“æ‰‘æ’åºçš„æ€æƒ³ï¼Œå¹¶é™„ä¸Šä¸€ä¸ªå…·ä½“çš„é¢˜ç›®\nè¿™é‡Œä½¿ç”¨bfså®ç°\næ€æƒ³ å¯¹ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(DAG-Directed Acyclic Graph) $\\mathcal{G}$ è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œå°†Gä¸­çš„æ‰€æœ‰é¡¶ç‚¹æ‹æˆä¸€ä¸ªçº¿æ€§åºåˆ—ï¼Œä½¿å¾—å›¾ä¸­ä»»ä½•ä¸€å¯¹é¡¶ç‚¹$u$å’Œ$v$ï¼Œè‹¥ $(u, v)$ å±äº $\\mathcal{E}(\\mathcal{G})$ï¼Œåˆ™ $u$ åœ¨çº¿æ€§åºåˆ—ä¸­å‡ºç°åœ¨$v$ä¹‹å‰ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œç”±æŸé›†åˆä¸Šçš„ååºå¾—åˆ°è¿™ä¸ªé›†åˆçš„å…¨åº\næ­¥éª¤  è®¡ç®—æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦(in-degree) å°†æ‰€æœ‰å…¥åº¦ä¸º0çš„èŠ‚ç‚¹åŠ å…¥ä¸€ä¸ªé˜Ÿåˆ— ç„¶åå‡ºé˜Ÿï¼Œå¾—åˆ°ä¸€ä¸ªå…ƒç´  å°†è¯¥å…ƒç´ æŒ‡å‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦éƒ½å‡1 åœ¨å‡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå…¶å‡åä¸º0åˆ™å°†è¯¥å…ƒç´ ä¹ŸåŠ å…¥é˜Ÿåˆ— ç»§ç»­è¿›è¡Œæ­¥éª¤3ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º  è¿ç”¨ é™¤äº†ä»¥ä¸Šæåˆ°çš„ç”¨é€”ï¼Œè¿˜å¯ä»¥åˆ¤æ–­æœ‰å‘å›¾ä¸­æ˜¯å¦æœ‰ç¯ï¼š\næ ¹æ®å‡ºé˜Ÿå…ƒç´ çš„ä¸ªæ•°ï¼Œè‹¥å‡ºé˜Ÿå…ƒç´ çš„ä¸ªæ•°ç­‰äºå›¾ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œåˆ™è¯¥å›¾æ— ç¯ï¼›å¦åˆ™è¯¥æœ‰å‘å›¾å­˜åœ¨ç¯\nä¾‹é¢˜ hdu-1285\né¢˜ç›®å¤§æ„å°±æ˜¯è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œæ¥è·å¾—æ¯”èµ›çš„åæ¬¡ï¼Œä½†æ˜¯åæ¬¡çš„æ’åˆ—è¦æŒ‰ç…§æœ€å°çš„å­—å…¸åº\u0026ndash;å³åŒç­‰æ’åçš„å…ƒç´ ï¼Œç¼–å·å°çš„æ”¾åœ¨å‰é¢ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸¤ç§æ–¹å¼\n  ä½¿ç”¨priority_queueä»£æ›¿queue\nä¿è¯æ¯æ¬¡å‡ºé˜Ÿçš„å…ƒç´ éƒ½æ˜¯æœ€å°çš„é‚£ä¸ªï¼Œå…·ä½“ACä»£ç å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57  #include \u0026lt;iostream\u0026gt;#include \u0026lt;vector\u0026gt;#include \u0026lt;algorithm\u0026gt;#include \u0026lt;queue\u0026gt;using namespace std; int n, m; vector\u0026lt;int\u0026gt; topSort(vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt;\u0026amp; G){ vector\u0026lt;int\u0026gt; result; // è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦  vector\u0026lt;int\u0026gt; in(n + 1, 0); for (int i = 1; i \u0026lt; G.size(); i++) { for (int j = 0; j \u0026lt; G[i].size(); j++) { in[G[i][j]]++; } } // ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Œä¿è¯æ¯æ¬¡å‡ºé˜Ÿçš„å…ƒç´ æœ€å°  priority_queue\u0026lt;int, vector\u0026lt;int\u0026gt;, greater\u0026lt;int \u0026gt; \u0026gt; queue; // ç¬¬ä¸€æ¬¡å…¥é˜Ÿï¼Œæ‰€æœ‰in-degreeä¸º0çš„èŠ‚ç‚¹  for (int i = 1; i \u0026lt; in.size();i ++) { if (in[i] == 0) { queue.push(i); } } while (!queue.empty()) { int current = queue.top(); queue.pop(); // å‡ºé˜Ÿå…ƒç´ å­˜åˆ°æ’åºç»“æœä¸­  result.push_back(current); // å°†æ‰€æœ‰currentæŒ‡å‘çš„èŠ‚ç‚¹çš„in-degreeå…¨éƒ¨-1  for (int i = 0; i \u0026lt; G[current].size(); i++) { in[G[current][i]]--; // å¦‚æœå‡åˆ°0åˆ™å…¥é˜Ÿ  if (in[G[current][i]] == 0) { queue.push(G[current][i]); } } } return result; } int main() { while (cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m) { vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; G(n + 1); int a, b; for (int i = 0; i \u0026lt; m; i++) { cin \u0026gt;\u0026gt; a \u0026gt;\u0026gt; b; G[a].push_back(b); } vector\u0026lt;int\u0026gt; result = topSort(G); for (int i = 0; i \u0026lt; result.size(); i++) { cout \u0026lt;\u0026lt; result[i] \u0026lt;\u0026lt; ((i == result.size() - 1) ? \u0026#34;\u0026#34; : \u0026#34; \u0026#34;); } cout \u0026lt;\u0026lt; endl; } }     å¯¹äºin-degreeï¼Œæ¯æ¬¡ä»å¤´å¼€å§‹å¯»æ‰¾in-degreeä¸º0çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰¾åˆ°çš„éƒ½æ˜¯å½“å‰ç¼–å·æœ€å°çš„èŠ‚ç‚¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  #include \u0026lt;iostream\u0026gt;#include \u0026lt;vector\u0026gt;#include \u0026lt;cstring\u0026gt;using namespace std; int n, m; // å­˜æ”¾ç»“æœ int ans[505]; void topSort(vector\u0026lt;vector\u0026lt;int\u0026gt;\u0026gt;\u0026amp; G) { vector\u0026lt;int\u0026gt; in(n + 1); for (int i = 0; i \u0026lt; G.size(); i++) { for (int j = 0; j \u0026lt; G[i].size(); j++) { in[G[i][j]]++; } } for (int i = 1; i \u0026lt;= n; i++) { // æ¯æ¬¡ä»inæ•°ç»„çš„å¤´éƒ¨å¼€å§‹æŸ¥æ‰¾ï¼Œé‚£ä¹ˆæ¯æ¬¡æ‰¾åˆ°çš„éƒ½æ˜¯å½“å‰ç¼–å·æœ€å°çš„èŠ‚ç‚¹  int k = 1; while (in[k] != 0){ k++; } ans[i] = k; // å°†in[k]èµ‹å€¼ä¸º-1æ¥è¡¨ç¤ºåˆ é™¤èŠ‚ç‚¹  in[k] = -1; // å°†kè¿æ¥çš„æ‰€æœ‰èŠ‚ç‚¹çš„in-degreeéƒ½-1  for (int j = 0; j \u0026lt; G[k].size(); j++) { in[G[k][j]]--; } } } int main() { while (cin \u0026gt;\u0026gt; n \u0026gt;\u0026gt; m) { memset(ans, 0, sizeof(ans)); int a, b; vector\u0026lt;vector\u0026lt;int\u0026gt; \u0026gt; G(n + 1); for (int i = 0; i \u0026lt; m; i++) { cin \u0026gt;\u0026gt; a \u0026gt;\u0026gt; b; G[a].push_back(b); } topSort(G); for (int i = 1; i \u0026lt;= n; i++) { cout \u0026lt;\u0026lt; ans[i] \u0026lt;\u0026lt; ((i == n ) ? \u0026#34;\u0026#34; : \u0026#34; \u0026#34;); } cout \u0026lt;\u0026lt; endl; } return 0; }      ","permalink":"https://haventong.github.io/post/topological-sort/","summary":"æ‹“æ‰‘æ’åº è¿‘æ—¥å®ç°äº†ä¸€ä¸‹æ‹“æ‰‘æ’åºï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹æ‹“æ‰‘æ’åºçš„æ€æƒ³ï¼Œå¹¶é™„ä¸Šä¸€ä¸ªå…·ä½“çš„é¢˜ç›® è¿™é‡Œä½¿ç”¨bfså®ç° æ€æƒ³ å¯¹ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾(DAG-Direc","title":"Topological Sort"},{"content":"å—åˆ°ä¸Šç¯‡C++ STLä¸­mapçš„æ’åºæ–¹å¼çš„å¯å‘ï¼Œè¿™æ¬¡åˆæ¥æ¢ç©¶ä¸€ä¸‹Javaä¸­å¯¹äºmapçš„ä¸åŒæ’åºæ–¹å¼\nä¾ç„¶åˆ†ä¸ºä¸¤ç§æ’åº\n Sort By Key Sort By Value  æ‰“å°map æ‰“å°mapçš„å…ƒç´ ä½¿ç”¨ä»¥ä¸‹çš„show()æ–¹æ³•ï¼š\n1 2 3 4 5 6 7  public static void show(Map\u0026lt;String, Integer\u0026gt; map) { for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: map.entrySet()) { System.out.println(entry.getKey() + \u0026#34; \u0026#34; + entry.getValue()); } System.out.println(\u0026#34;=======================\u0026#34;); System.out.println(); }   Sort By Value å‡åº Javaä¸­å¯¹äºMapçš„valueè¿›è¡Œæ’åºä¾ç„¶éœ€è¦å€ŸåŠ©å…¶ä»–å®¹å™¨ï¼Œè¿™é‡Œä½¿ç”¨ArrayList\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  /** * è·å–æŒ‰ç…§valueå‡åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByValueAsc(Map\u0026lt;String, Integer\u0026gt; map) { List\u0026lt;Map.Entry\u0026lt;String, Integer\u0026gt;\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(map.entrySet()); // å‡åº  Collections.sort(list, (e1, e2) -\u0026gt; e1.getValue().compareTo(e2.getValue())); Map\u0026lt;String, Integer\u0026gt; sortedMap = new LinkedHashMap\u0026lt;\u0026gt;(); for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } public static void main(String[] args) { Map\u0026lt;String, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;boss\u0026#34;, 2); map.put(\u0026#34;abuse\u0026#34;, 1); map.put(\u0026#34;unit\u0026#34;, 3); map.put(\u0026#34;duty\u0026#34;, 4); // æ ¹æ®Valueå‡åºæ’åº  System.out.println(\u0026#34;ğŸš€ SORT BY VALUE ASC:\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedMapAsc = sortByValueAsc(map); show(sortedMapAsc); }   è¿™é‡Œå°†Mapä¸­çš„entryéƒ½æ”¾åˆ°äº†ä¸€ä¸ªListä¸­ï¼Œç„¶åä½¿ç”¨è‡ªå®šä¹‰Comparatorçš„æ–¹å¼å¯¹entryè¿›è¡Œæ’åºï¼›\nåŒæ—¶ä¹Ÿä½¿ç”¨äº†ä¸€ç§æ–°çš„Map\u0026ndash;LinkedHashMap\nLinkedHashMapæ˜¯æœ‰åºçš„ï¼Œå®ƒä¼šæŒ‰ç…§å…ƒç´ çš„æ’å…¥é¡ºåºå¯¹å…ƒç´ è¿›è¡Œæ’åº\nç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6  ğŸš€ SORT BY VALUE ASC: abuse 1 boss 2 unit 3 duty 4 =======================   é™åº åŒç†ï¼Œåªæ˜¯æ›´æ¢ä¸€ä¸‹Comparatorï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  /** * è·å–æŒ‰ç…§valueé™åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByValueDesc(Map\u0026lt;String, Integer\u0026gt; map) { List\u0026lt;Map.Entry\u0026lt;String, Integer\u0026gt;\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(map.entrySet()); // é™åº  Collections.sort(list, (e1, e2) -\u0026gt; e2.getValue().compareTo(e1.getValue())); Map\u0026lt;String, Integer\u0026gt; sortedMap = new LinkedHashMap\u0026lt;\u0026gt;(); for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } public static void main(String[] args) { Map\u0026lt;String, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;boss\u0026#34;, 2); map.put(\u0026#34;abuse\u0026#34;, 1); map.put(\u0026#34;unit\u0026#34;, 3); map.put(\u0026#34;duty\u0026#34;, 4); // æ ¹æ®Valueé™åºæ’åº  System.out.println(\u0026#34;ğŸš€ SORT BY VALUE DESC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedMapDesc = sortByValueDesc(map); show(sortedMapDesc); }   ç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6  ğŸš€ SORT BY VALUE DESC duty 4 unit 3 boss 2 abuse 1 =======================   Sort By Key å‡åº å¯¹äºkeyçš„æ’åºä¹Ÿå¯ä»¥æŒ‰ç…§å¯¹valueçš„æ’åºä¸€æ ·ï¼Œå€ŸåŠ©ArrayListå’ŒLinkedHashMapï¼Œä½†è¿™é‡Œé‡‡ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œå€ŸåŠ©TreeMapè¿›è¡Œæ’åº\nTreeMapæ˜¯å¦ä¸€ç§Mapï¼Œä¼šå¯¹Mapä¸­çš„å…ƒç´ æŒ‰ç…§keyå¤§å°è¿›è¡Œæ’åº\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å‡åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyå‡åºæ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByKeyByTreeMapAsc(Map\u0026lt;String, Integer\u0026gt; map) { /* The naturalOrder() method of Comparator Interface in Java returns a comparator that use to compare Comparable objects in natural order. */ Map\u0026lt;String, Integer\u0026gt; sortedMap = new TreeMap\u0026lt;\u0026gt;(Comparator.naturalOrder()); sortedMap.putAll(map); return sortedMap; } public static void main(String[] args) { Map\u0026lt;String, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;boss\u0026#34;, 2); map.put(\u0026#34;abuse\u0026#34;, 1); map.put(\u0026#34;unit\u0026#34;, 3); map.put(\u0026#34;duty\u0026#34;, 4); // æ ¹æ®Keyå‡åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼  System.out.println(\u0026#34;ğŸš€ SORT BY KEY ASC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedByKeyAsc = sortByKeyByTreeMapAsc(map); show(sortedByKeyAsc); }    å¯¹Comparableå¯¹è±¡çš„å‡åºæ’åºå¯ä»¥ä½¿ç”¨Comparator.naturalOrder()è¿”å›çš„Comparatoræ¥æŒ‡å®š\n æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6  ğŸš€ SORT BY KEY ASC abuse 1 boss 2 duty 4 unit 3 =======================   é™åº åŒç†ï¼Œåªæ˜¯éœ€è¦æ›´æ”¹Comparatorï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å°†åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyé™åºæ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByKeyByTreeMapDesc(Map\u0026lt;String, Integer\u0026gt; map) { /* The reverseOrder() Returns a comparator that imposes the reverse of the natural ordering. */ Map\u0026lt;String, Integer\u0026gt; sortedMap = new TreeMap\u0026lt;\u0026gt;(Comparator.reverseOrder()); sortedMap.putAll(map); return sortedMap; } public static void main(String[] args) { Map\u0026lt;String, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;boss\u0026#34;, 2); map.put(\u0026#34;abuse\u0026#34;, 1); map.put(\u0026#34;unit\u0026#34;, 3); map.put(\u0026#34;duty\u0026#34;, 4); // æ ¹æ®Keyé™åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼  System.out.println(\u0026#34;ğŸš€ SORT BY KEY DESC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedByKeyDesc = sortByKeyByTreeMapDesc(map); show(sortedByKeyDesc); }    å¯¹Comparableå¯¹è±¡çš„é™åºæ’åºå¯ä»¥ä½¿ç”¨Comparator.reverseOrder()è¿”å›çš„Comparatoræ¥æŒ‡å®š\n ç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6  ğŸš€ SORT BY KEY DESC unit 3 duty 4 boss 2 abuse 1 =======================   å®Œæ•´ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109  import java.util.*; /** * @author HavenTong * @date 2020/3/5 5:34 ä¸‹åˆ */ public class MapUtil { public static void show(Map\u0026lt;String, Integer\u0026gt; map) { for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: map.entrySet()) { System.out.println(entry.getKey() + \u0026#34; \u0026#34; + entry.getValue()); } System.out.println(\u0026#34;=======================\u0026#34;); System.out.println(); } /** * è·å–æŒ‰ç…§valueå‡åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByValueAsc(Map\u0026lt;String, Integer\u0026gt; map) { List\u0026lt;Map.Entry\u0026lt;String, Integer\u0026gt;\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(map.entrySet()); // å‡åº  Collections.sort(list, (e1, e2) -\u0026gt; e1.getValue().compareTo(e2.getValue())); Map\u0026lt;String, Integer\u0026gt; sortedMap = new LinkedHashMap\u0026lt;\u0026gt;(); for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } /** * è·å–æŒ‰ç…§valueé™åºæ’åºåçš„map * @param map éœ€è¦æ’åºçš„map * @return æ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByValueDesc(Map\u0026lt;String, Integer\u0026gt; map) { List\u0026lt;Map.Entry\u0026lt;String, Integer\u0026gt;\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(map.entrySet()); // é™åº  Collections.sort(list, (e1, e2) -\u0026gt; e2.getValue().compareTo(e1.getValue())); Map\u0026lt;String, Integer\u0026gt; sortedMap = new LinkedHashMap\u0026lt;\u0026gt;(); for (Map.Entry\u0026lt;String, Integer\u0026gt; entry: list) { sortedMap.put(entry.getKey(), entry.getValue()); } return sortedMap; } /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å‡åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyå‡åºæ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByKeyByTreeMapAsc(Map\u0026lt;String, Integer\u0026gt; map) { /* The naturalOrder() method of Comparator Interface in Java returns a comparator that use to compare Comparable objects in natural order. */ Map\u0026lt;String, Integer\u0026gt; sortedMap = new TreeMap\u0026lt;\u0026gt;(Comparator.naturalOrder()); sortedMap.putAll(map); return sortedMap; } /** * é€šè¿‡TreeMapçš„æ–¹å¼å¯¹keyæŒ‰ç…§å°†åºæ’åº * @param map è¦æ’åºçš„map * @return æŒ‰ç…§keyé™åºæ’å¥½åºçš„map */ public static Map\u0026lt;String, Integer\u0026gt; sortByKeyByTreeMapDesc(Map\u0026lt;String, Integer\u0026gt; map) { /* The reverseOrder() Returns a comparator that imposes the reverse of the natural ordering. */ Map\u0026lt;String, Integer\u0026gt; sortedMap = new TreeMap\u0026lt;\u0026gt;(Comparator.reverseOrder()); sortedMap.putAll(map); return sortedMap; } public static void main(String[] args) { Map\u0026lt;String, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;boss\u0026#34;, 2); map.put(\u0026#34;abuse\u0026#34;, 1); map.put(\u0026#34;unit\u0026#34;, 3); map.put(\u0026#34;duty\u0026#34;, 4); // æ ¹æ®Valueå‡åºæ’åº  System.out.println(\u0026#34;ğŸš€ SORT BY VALUE ASC:\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedMapAsc = sortByValueAsc(map); show(sortedMapAsc); // æ ¹æ®Valueé™åºæ’åº  System.out.println(\u0026#34;ğŸš€ SORT BY VALUE DESC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedMapDesc = sortByValueDesc(map); show(sortedMapDesc); // æ ¹æ®Keyå‡åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼  System.out.println(\u0026#34;ğŸš€ SORT BY KEY ASC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedByKeyAsc = sortByKeyByTreeMapAsc(map); show(sortedByKeyAsc); // æ ¹æ®Keyé™åºæ’åºï¼Œä½¿ç”¨TreeMapæ–¹å¼  System.out.println(\u0026#34;ğŸš€ SORT BY KEY DESC\u0026#34;); Map\u0026lt;String, Integer\u0026gt; sortedByKeyDesc = sortByKeyByTreeMapDesc(map); show(sortedByKeyDesc); } }   ","permalink":"https://haventong.github.io/post/java-map/","summary":"å—åˆ°ä¸Šç¯‡C++ STLä¸­mapçš„æ’åºæ–¹å¼çš„å¯å‘ï¼Œè¿™æ¬¡åˆæ¥æ¢ç©¶ä¸€ä¸‹Javaä¸­å¯¹äºmapçš„ä¸åŒæ’åºæ–¹å¼ ä¾ç„¶åˆ†ä¸ºä¸¤ç§æ’åº Sort By Key Sort By Value æ‰“å°map æ‰“å°m","title":"Java Map"},{"content":"è¿‘æ—¥åšé¢˜ç”¨åˆ°äº†C++ä¸­STLçš„mapå®¹å™¨ï¼Œåœ¨æ¶‰åŠmapçš„æ’åºè¿‡ç¨‹æ—¶ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ’åº\n Sort by key Sort by value  ä¸ºäº†åŠ æ·±è¿™ä¸¤ç§æ’åºæ–¹å¼çš„å†™æ³•ï¼Œæˆ‘åˆå†™äº†ä¸€ä¸ªdemoæ¥æ¢³ç†ä¸¤ç§æ’åºæ–¹å¼çš„å†™æ³•\nmapçš„å‚æ•° 1 2 3 4 5  template \u0026lt; class Key, // map::å…³é”®å­—ç±»å‹  class T, // map::å€¼ç±»å‹  class Compare = less\u0026lt;Key\u0026gt;, // map::å…³é”®å­—æ¯”è¾ƒå‡½æ•°  class Alloc = allocator\u0026lt;pair\u0026lt;const Key,T\u0026gt; \u0026gt; // map::allocatorç±»  \u0026gt; class map;   Sort by key å‡åº é»˜è®¤æƒ…å†µä¸‹ï¼ŒmapæŒ‰ç…§keyçš„å¤§å°å‡åºæ’åºï¼Œå³less\u0026lt;Key\u0026gt;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  void show(map\u0026lt;string, int\u0026gt;\u0026amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout \u0026lt;\u0026lt; it -\u0026gt; first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; it -\u0026gt; second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; }\tmap\u0026lt;string, int\u0026gt; asc_map; asc_map[\u0026#34;boss\u0026#34;] = 2; asc_map[\u0026#34;abuse\u0026#34;] = 1; asc_map[\u0026#34;unit\u0026#34;] = 3; asc_map[\u0026#34;duty\u0026#34;] = 4; // mapé»˜è®¤æŒ‰ç…§keyçš„å¤§å°å‡åºæ’åˆ—, å³ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºless\u0026lt;string\u0026gt; cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ DEFAULT: \u0026#34; \u0026lt;\u0026lt; endl; show(asc_map);   æ‰€ä»¥æ‰“å°ç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6  ğŸš€ DEFAULT: abuse 1 boss 2 duty 4 unit 3 ================================   é™åº æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹mapçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ¥æ”¹å˜æ’åºè§„åˆ™ï¼Œä½¿mapæŒ‰ç…§Keyçš„é™åºæ’åˆ—:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  void show(map\u0026lt;string, int, greater\u0026lt;string\u0026gt;\u0026gt;\u0026amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout \u0026lt;\u0026lt; it -\u0026gt; first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; it -\u0026gt; second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; } // mapå¯ä»¥æŒ‡å®šæŒ‰ç…§keyçš„å¤§å°å‡åºæˆ–é™åºæ’åˆ— map\u0026lt;string, int, greater\u0026lt;string\u0026gt;\u0026gt; desc_map; desc_map[\u0026#34;boss\u0026#34;] = 2; desc_map[\u0026#34;abuse\u0026#34;] = 1; desc_map[\u0026#34;unit\u0026#34;] = 3; desc_map[\u0026#34;duty\u0026#34;] = 4; cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ DESC:\u0026#34; \u0026lt;\u0026lt; endl; show(desc_map);   æ‰“å°ç»“æœä¸º:\n1 2 3 4 5 6  ğŸš€ DESC: unit 3 duty 4 boss 2 abuse 1 ================================   Sort by value å¯¹mapçš„valueè¿›è¡Œæ’åºéœ€è¦å€ŸåŠ©åˆ«çš„å®¹å™¨ï¼Œæ¯”å¦‚vectorï¼Œå°†æ¯ä¸€ä¸ªmapä¸­çš„entryæ”¾åˆ°ä¸€ä¸ªæ–°çš„vectorä¸­ï¼Œç„¶åä½¿ç”¨sort()å‡½æ•°åŠ ä¸Šè‡ªå®šä¹‰æ¯”è¾ƒè§„åˆ™cmpå³å¯å¯¹mapä¸­çš„å…ƒç´ æŒ‰ç…§valueè¿›è¡Œæ’åº:\ndemoä¸­ä½¿ç”¨çš„æ¯”è¾ƒå‡½æ•°å°†æŒ‰ç…§valueå‡åºæ’åºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  // å‡åºæ’åˆ— bool cmp(const pair\u0026lt;string, int\u0026gt;\u0026amp; p1, const pair\u0026lt;string, int\u0026gt;\u0026amp; p2) { return p1.second \u0026lt; p2.second; } void sortByValue(map\u0026lt;string, int\u0026gt;\u0026amp; map) { vector\u0026lt;pair\u0026lt;string, int\u0026gt; \u0026gt; data; for (auto it = map.begin(); it != map.end(); it++) { data.push_back(make_pair(it -\u0026gt; first, it -\u0026gt; second)); } sort(data.begin(), data.end(), cmp); for (pair\u0026lt;string, int\u0026gt; p : data) { cout \u0026lt;\u0026lt; p.first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; p.second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; } // å¯¹mapçš„valueè¿›è¡Œæ’åº map\u0026lt;string, int\u0026gt; value_sort_map; value_sort_map[\u0026#34;boss\u0026#34;] = 2; value_sort_map[\u0026#34;abuse\u0026#34;] = 1; value_sort_map[\u0026#34;unit\u0026#34;] = 3; value_sort_map[\u0026#34;duty\u0026#34;] = 4; cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ SORT BY VALUE\u0026#34; \u0026lt;\u0026lt; endl; sortByValue(value_sort_map);   æ‰“å°ç»“æœå¦‚ä¸‹ï¼š\n1 2 3 4 5 6  ğŸš€ SORT BY VALUE abuse 1 boss 2 unit 3 duty 4 ================================   å®Œæ•´ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73  #include \u0026lt;iostream\u0026gt;#include \u0026lt;map\u0026gt;#include \u0026lt;utility\u0026gt; // ä½¿ç”¨make_pair()#include \u0026lt;string\u0026gt;#include \u0026lt;vector\u0026gt;using namespace std; // å‡åºæ’åˆ— bool cmp(const pair\u0026lt;string, int\u0026gt;\u0026amp; p1, const pair\u0026lt;string, int\u0026gt;\u0026amp; p2) { return p1.second \u0026lt; p2.second; } void sortByValue(map\u0026lt;string, int\u0026gt;\u0026amp; map) { vector\u0026lt;pair\u0026lt;string, int\u0026gt; \u0026gt; data; for (auto it = map.begin(); it != map.end(); it++) { data.push_back(make_pair(it -\u0026gt; first, it -\u0026gt; second)); } sort(data.begin(), data.end(), cmp); for (pair\u0026lt;string, int\u0026gt; p : data) { cout \u0026lt;\u0026lt; p.first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; p.second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; } void show(map\u0026lt;string, int\u0026gt;\u0026amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout \u0026lt;\u0026lt; it -\u0026gt; first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; it -\u0026gt; second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; } void show(map\u0026lt;string, int, greater\u0026lt;string\u0026gt;\u0026gt;\u0026amp; map) { for (auto it = map.begin(); it != map.end(); it++) { cout \u0026lt;\u0026lt; it -\u0026gt; first \u0026lt;\u0026lt; \u0026#34; \u0026#34; \u0026lt;\u0026lt; it -\u0026gt; second \u0026lt;\u0026lt; endl; } cout \u0026lt;\u0026lt; \u0026#34;================================\u0026#34; \u0026lt;\u0026lt; endl; cout \u0026lt;\u0026lt; endl; } int main() { map\u0026lt;string, int\u0026gt; asc_map; asc_map[\u0026#34;boss\u0026#34;] = 2; asc_map[\u0026#34;abuse\u0026#34;] = 1; asc_map[\u0026#34;unit\u0026#34;] = 3; asc_map[\u0026#34;duty\u0026#34;] = 4; // mapé»˜è®¤æŒ‰ç…§keyçš„å¤§å°å‡åºæ’åˆ—, å³ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºless\u0026lt;string\u0026gt;  cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ DEFAULT: \u0026#34; \u0026lt;\u0026lt; endl; show(asc_map); // mapå¯ä»¥æŒ‡å®šæŒ‰ç…§keyçš„å¤§å°å‡åºæˆ–é™åºæ’åˆ—  map\u0026lt;string, int, greater\u0026lt;string\u0026gt;\u0026gt; desc_map; desc_map[\u0026#34;boss\u0026#34;] = 2; desc_map[\u0026#34;abuse\u0026#34;] = 1; desc_map[\u0026#34;unit\u0026#34;] = 3; desc_map[\u0026#34;duty\u0026#34;] = 4; cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ DESC:\u0026#34; \u0026lt;\u0026lt; endl; show(desc_map); // å¯¹mapçš„valueè¿›è¡Œæ’åº  map\u0026lt;string, int\u0026gt; value_sort_map; value_sort_map[\u0026#34;boss\u0026#34;] = 2; value_sort_map[\u0026#34;abuse\u0026#34;] = 1; value_sort_map[\u0026#34;unit\u0026#34;] = 3; value_sort_map[\u0026#34;duty\u0026#34;] = 4; cout \u0026lt;\u0026lt; \u0026#34;ğŸš€ SORT BY VALUE\u0026#34; \u0026lt;\u0026lt; endl; sortByValue(value_sort_map); return 0; }   ","permalink":"https://haventong.github.io/post/stl-map/","summary":"è¿‘æ—¥åšé¢˜ç”¨åˆ°äº†C++ä¸­STLçš„mapå®¹å™¨ï¼Œåœ¨æ¶‰åŠmapçš„æ’åºè¿‡ç¨‹æ—¶ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ’åº Sort by key Sort by value ä¸ºäº†åŠ æ·±è¿™ä¸¤ç§æ’åºæ–¹å¼çš„å†™æ³•ï¼Œæˆ‘åˆå†™äº†","title":"STL Map"},{"content":"1. æ•°æ®  å¤§å†™å­—æ¯è¡¨ç¤ºä¸¾è¯ï¼Œå¤§å†™å­—æ¯è¡¨ç¤ºå‘é‡\n  æ•°æ®æ•´ä½“å«æ•°æ®é›†(data set) æ¯ä¸€è¡Œæ•°æ®ç§°ä¸ºä¸€ä¸ªæ ·æœ¬(sample) æ¯ä¸€ä¸ªå­—æ®µè¡¨è¾¾æ ·æœ¬çš„ä¸€ä¸ªç‰¹å¾(feature) ç¬¬iä¸ªæ ·æœ¬å†™ä½œ $ X^{(i)} $ ï¼Œç¬¬iä¸ªæ ·æœ¬ç¬¬jä¸ªç‰¹å¾å€¼å†™ä½œ $X^{(i)}_j $ å­¦ä¹ çš„ä»»åŠ¡ï¼šæ ‡è®°(label), è¡¨ç¤ºä¸º $ y $, ç¬¬ $i$ ä¸ªæ ·æœ¬çš„æ ‡è®°å†™ä½œ $ y^{ (i) } $ ç¬¬ $i$ è¡Œï¼Œä¹Ÿå°±æ˜¯ç¬¬ $i$ ä¸ªæ ·æœ¬ï¼Œä¹Ÿè¢«ç§°ä½œç‰¹å¾å‘é‡ $ X^{ (i) } $  $$ X^{(i)} = \\begin{pmatrix} 5.1 \\\\ 3.5 \\\\ 1.4 \\\\ 0.2 \\end{pmatrix} $$\n æ•°å­¦ä¸­é€šå¸¸æŠŠå‘é‡è¡¨ç¤ºæˆåˆ—å‘é‡ï¼Œæ‰€ä»¥é€šå¸¸ç‰¹å¾å¯ä»¥è¡¨ç¤ºæˆå¦‚ä¸‹çš„å½¢å¼:  $$ \\begin{pmatrix} (X^{(1)})^T \\\\ (X^{(2)})^T \\\\ (X^{(3)})^T \\end{pmatrix} $$\n æ‰€æœ‰ç‰¹å¾æ‰€å­˜åœ¨çš„ç©ºé—´ï¼Œç§°ä¸ºç‰¹å¾ç©ºé—´(feature space)  åˆ†ç±»ä»»åŠ¡çš„æœ¬è´¨å°±æ˜¯ç‰¹å¾ç©ºé—´çš„åˆ’åˆ† åœ¨é«˜ç»´ç©ºé—´åŒç†   ç‰¹å¾å¯ä»¥å¾ˆæŠ½è±¡  å›¾åƒä¸­ï¼Œæ¯ä¸€ä¸ªåƒç´ ç‚¹éƒ½æ˜¯ç‰¹å¾ï¼Œe.g. 28 * 28çš„å›¾åƒå°±æœ‰28 * 28 = 784ä¸ªç‰¹å¾ å¦‚æœå½©è‰²å›¾åƒç‰¹å¾æ›´å¤š    2. åŸºæœ¬ä»»åŠ¡  ç›‘ç£å­¦ä¹ ä¸»è¦å¤„ç†åˆ†ç±»å’Œå›å½’é—®é¢˜\n åˆ†ç±»  äºŒåˆ†ç±»  åˆ¤æ–­é‚®ä»¶æ˜¯å¦æ˜¯åƒåœ¾é‚®ä»¶ åˆ¤æ–­å‘æ”¾ç»™å®¢æˆ·ä¿¡ç”¨å¡æ˜¯å¦æœ‰é£é™© åˆ¤æ–­è‚¿ç˜¤æ˜¯æ¶æ€§è¿˜æ˜¯è‰¯æ€§ åˆ¤æ–­è‚¡ç¥¨æ¶¨è·Œ   å¤šåˆ†ç±»  æ•°å­—è¯†åˆ« å›¾åƒè¯†åˆ« åˆ¤æ–­å‘æ”¾ç»™å®¢æˆ·çš„ä¿¡ç”¨å¡çš„é£é™©è¯„çº§     å¾ˆå¤šå¤æ‚çš„é—®é¢˜å¯ä»¥è½¬æ¢æˆå¤šåˆ†ç±»é—®é¢˜\n  ä¸€äº›ç®—æ³•åªæ”¯æŒäºŒåˆ†ç±»çš„ä»»åŠ¡ï¼Œä½†å¤šåˆ†ç±»çš„ä»»åŠ¡å¯ä»¥è½¬æ¢æˆäºŒåˆ†ç±»çš„ä»»åŠ¡ ä¸€äº›ç®—æ³•å¤©ç„¶å¯ä»¥å®Œæˆå¤šåˆ†ç±»ä»»åŠ¡ å¤šæ ‡ç­¾åˆ†ç±» e.g. å¯¹å›¾ç‰‡ä¸­çš„å…ƒç´ è¿›è¡Œåˆ’åˆ†  å›å½’  ç»“æœæ˜¯ä¸€ä¸ªè¿ç»­æ•°å­—çš„å€¼ï¼Œè€Œéä¸€ä¸ªç±»åˆ«  æˆ¿å±‹ä»·æ ¼ å¸‚åœºåˆ†æ å­¦ç”Ÿæˆç»© è‚¡ç¥¨ä»·æ ¼   æœ‰ä¸€äº›ç®—æ³•åªèƒ½è§£å†³å›å½’é—®é¢˜ï¼Œæœ‰ä¸€äº›ç®—æ³•åªèƒ½è§£å†³åˆ†ç±»é—®é¢˜ï¼Œæœ‰ä¸€äº›ç®—æ³•éƒ½å¯ä»¥è§£å†³ ä¸€äº›æƒ…å†µä¸‹ï¼Œå›å½’ä»»åŠ¡å¯ä»¥ç®€åŒ–ä¸ºåˆ†ç±»ä»»åŠ¡  æµç¨‹  æ¨¡å‹ $f(x)$  3. æœºå™¨å­¦ä¹ åˆ†ç±» ç›‘ç£å­¦ä¹  ç»™æœºå™¨çš„è®­ç»ƒæ•°æ®æ‹¥æœ‰\u0026quot;æ ‡è®°\u0026quot;or\u0026quot;ç­”æ¡ˆ\u0026quot;\n å›¾ç‰‡å·²ç»æ‹¥æœ‰äº†æ ‡å®šä¿¡æ¯ é“¶è¡Œå·²ç»ç§¯ç´¯äº†ä¸€å®šçš„å®¢æˆ·ä¿¡æ¯å’Œä»–ä»¬ä¿¡ç”¨å¡çš„ä¿¡ç”¨æƒ…å†µ åŒ»é™¢å·²ç»ç§¯ç´¯äº†ä¸€å®šçš„ç—…äººä¿¡æ¯å’Œä»–ä»¬æœ€ç»ˆç¡®è¯Šæ˜¯å¦æ‚£ç—…çš„æƒ…å†µ å¸‚åœºç§¯ç´¯äº†æˆ¿å±‹çš„åŸºæœ¬ä¿¡æ¯å’Œæœ€ç»ˆæˆäº¤çš„é‡‘é¢  éç›‘ç£å­¦ä¹  ç»™æœºå™¨çš„è®­ç»ƒæ•°æ®æ²¡æœ‰ä»»ä½•\u0026quot;æ ‡è®°\u0026quot;æˆ–è€…â€œç­”æ¡ˆâ€\nå¯¹æ²¡æœ‰\u0026quot;æ ‡è®°\u0026quot;çš„æ•°æ®è¿›è¡Œåˆ†ç±»-èšç±»åˆ†æ\næ„ä¹‰ å¯¹æ•°æ®è¿›è¡Œé™ç»´å¤„ç†\n ç‰¹å¾æå–ï¼šä¿¡ç”¨å¡çš„ä¿¡ç”¨è¯„çº§å’Œäººçš„èƒ–ç˜¦æ— å…³ï¼Ÿ ç‰¹å¾å‹ç¼©(ç‰¹å¾ä¹‹é—´å…³ç³»å¾ˆå¼º)ï¼šPCA  é™ç»´å¤„ç†å¯ä»¥æ–¹ä¾¿å¯è§†åŒ–\nå¼‚å¸¸æ£€æµ‹\nåŠç›‘ç£å­¦ä¹    ä¸€éƒ¨åˆ†æ•°æ®æ ‡æœ‰\u0026quot;æ ‡è®°\u0026quot;æˆ–è€…\u0026quot;ç­”æ¡ˆ\u0026quot;ï¼Œå¦ä¸€éƒ¨åˆ†æ•°æ®æ²¡æœ‰\n  æ›´å¸¸è§ï¼šå„ç§åŸå› äº§ç”Ÿçš„æ ‡è®°ç¼ºå¤±\n  é€šå¸¸éƒ½å…ˆä½¿ç”¨æ— ç›‘ç£å­¦ä¹ æ‰‹æ®µå¯¹æ•°æ®åšå¤„ç†ï¼Œä¹‹åä½¿ç”¨ç›‘ç£å­¦ä¹ æ‰‹æ®µåšæ¨¡å‹çš„è®­ç»ƒå’Œé¢„æµ‹\n  å¢å¼ºå­¦ä¹  æ ¹æ®å‘¨å›´ç¯å¢ƒçš„æƒ…å†µï¼Œé‡‡å–è¡ŒåŠ¨ï¼Œæ ¹æ®é‡‡å–è¡ŒåŠ¨çš„ç»“æœï¼Œå­¦ä¹ è¡ŒåŠ¨æ–¹å¼\nè¡ŒåŠ¨-åé¦ˆ\nå¥–èµæˆ–æƒ©ç½šæœºåˆ¶\n4. æœºå™¨å­¦ä¹ çš„å…¶ä»–åˆ†ç±» æ‰¹é‡å­¦ä¹ (Batch Learning)  ä¼˜ç‚¹ï¼šç®€å• é—®é¢˜ï¼šå¦‚ä½•é€‚åº”ç¯å¢ƒå˜åŒ–ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šå®šæ—¶é‡æ–°æ‰¹é‡å­¦ä¹  ç¼ºç‚¹ï¼šæ¯æ¬¡é‡æ–°æ‰¹é‡å­¦ä¹ ï¼Œè¿ç®—é‡å·¨å¤§ï¼›åŒæ—¶ï¼Œåœ¨æŸäº›ç¯å¢ƒå˜åŒ–éå¸¸å¿«çš„æƒ…å†µä¸‹ï¼Œç”šè‡³ä¸å¯èƒ½  åœ¨çº¿å­¦ä¹ (Online Learning) è¾“å…¥æ ·ä¾‹å’Œæ­£ç¡®ç»“æœè¿­ä»£è¿›å…¥æœºå™¨å­¦ä¹ ç®—æ³•\n ä¼˜ç‚¹ï¼šåŠæ—¶åæ˜ æ–°çš„ç¯å¢ƒå˜åŒ– é—®é¢˜ï¼šæ–°çš„æ•°æ®å¸¦æ¥ä¸å¥½çš„å˜åŒ–ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šéœ€è¦åŠ å¼ºå¯¹æ•°æ®è¿›è¡Œç›‘æ§ å…¶ä»–ï¼šä¹Ÿé€‚ç”¨äºæ•°æ®é‡å·¨å¤§ï¼Œæ— æ³•å®Œå…¨æ‰¹é‡å­¦ä¹ çš„ç¯å¢ƒ  å‚æ•°å­¦ä¹ (Parametric Learning) e.g. å‡è®¾æ¨¡å‹å®šä¸º $f(x) = ax + b$ï¼Œé‚£ä¹ˆæœºå™¨å­¦ä¹ çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°åˆé€‚çš„ $a$ å’Œ $b$\nç‰¹ç‚¹ï¼šä¸€æ—¦å­¦åˆ°äº†å‚æ•°ï¼Œå°±ä¸å†éœ€è¦åŸæœ‰çš„æ•°æ®é›†\néå‚æ•°å­¦ä¹ (Nonparametric Learning)  ä¸å¯¹æ¨¡å‹è¿›è¡Œè¿‡å¤šå‡è®¾ éå‚æ•°ä¸ä»£è¡¨æ²¡æœ‰å‚æ•°  ","permalink":"https://haventong.github.io/post/machine-learning-concept/","summary":"1. æ•°æ® å¤§å†™å­—æ¯è¡¨ç¤ºä¸¾è¯ï¼Œå¤§å†™å­—æ¯è¡¨ç¤ºå‘é‡ æ•°æ®æ•´ä½“å«æ•°æ®é›†(data set) æ¯ä¸€è¡Œæ•°æ®ç§°ä¸ºä¸€ä¸ªæ ·æœ¬(sample) æ¯ä¸€ä¸ªå­—æ®µè¡¨è¾¾æ ·æœ¬çš„ä¸€ä¸ªç‰¹å¾(fe","title":"Machine Learning Concept"},{"content":"JSR303/JSR-349ï¼Œhibernate validatorï¼Œspring validationä¹‹é—´çš„å…³ç³»  JSR303æ˜¯ä¸€é¡¹æ ‡å‡†,JSR-349æ˜¯å…¶çš„å‡çº§ç‰ˆæœ¬ï¼Œæ·»åŠ äº†ä¸€äº›æ–°ç‰¹æ€§ï¼Œä»–ä»¬è§„å®šä¸€äº›æ ¡éªŒè§„èŒƒå³æ ¡éªŒæ³¨è§£ï¼Œå¦‚@Nullï¼Œ@NotNullï¼Œ@Patternï¼Œä»–ä»¬ä½äºjavax.validation.constraintsåŒ…ä¸‹ï¼Œåªæä¾›è§„èŒƒä¸æä¾›å®ç°ã€‚è€Œhibernate-validatoræ˜¯å¯¹è¿™ä¸ªè§„èŒƒçš„å®è·µï¼ˆä¸è¦å°†hibernateå’Œæ•°æ®åº“ormæ¡†æ¶è”ç³»åœ¨ä¸€èµ·ï¼‰ï¼Œä»–æä¾›äº†ç›¸åº”çš„å®ç°ï¼Œå¹¶å¢åŠ äº†ä¸€äº›å…¶ä»–æ ¡éªŒæ³¨è§£ï¼Œå¦‚@Emailï¼Œ@Lengthï¼Œ@Rangeç­‰ç­‰ï¼Œä»–ä»¬ä½äºorg.hibernate.validator.constraintsåŒ…ä¸‹ã€‚è€Œä¸‡èƒ½çš„springä¸ºäº†ç»™å¼€å‘è€…æä¾›ä¾¿æ·ï¼Œå¯¹hibernate validatorè¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œ\n ä½¿ç”¨validation-apiï¼Œé€šè¿‡æ³¨è§£å½¢å¼è¿›è¡Œæ•°æ®æ ¡éªŒ\nä¾èµ–åŒ…å«å…³ç³» æ ¡éªŒæ³¨è§£åŒ…å«åœ¨spring-boot-starter-webé‡Œé¢\n1 2 3 4  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;/dependency\u0026gt;   æŸ¥çœ‹spring-boot-starter-webçš„å­ä¾èµ–ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-validation\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.2.1.RELEASE\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;exclusions\u0026gt; \u0026lt;exclusion\u0026gt; \u0026lt;artifactId\u0026gt;tomcat-embed-el\u0026lt;/artifactId\u0026gt; \u0026lt;groupId\u0026gt;org.apache.tomcat.embed\u0026lt;/groupId\u0026gt; \u0026lt;/exclusion\u0026gt; \u0026lt;/exclusions\u0026gt; \u0026lt;/dependency\u0026gt;   å­ä¾èµ–ä¸­åŒ…å«äº†spring-boot-starter-validationï¼Œå†æŸ¥çœ‹è¯¥ä¾èµ–çš„å­ä¾èµ–ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;jakarta.validation\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jakarta.validation-api\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.0.1\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.hibernate.validator\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;hibernate-validator\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;6.0.18.Final\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;exclusions\u0026gt; \u0026lt;exclusion\u0026gt; \u0026lt;artifactId\u0026gt;validation-api\u0026lt;/artifactId\u0026gt; \u0026lt;groupId\u0026gt;javax.validation\u0026lt;/groupId\u0026gt; \u0026lt;/exclusion\u0026gt; \u0026lt;/exclusions\u0026gt; \u0026lt;/dependency\u0026gt;   å¯ä»¥å‘ç°ï¼Œè¯¥å­ä¾èµ–ä¸­åŒ…å«äº†validation-apiï¼ŒåŒæ—¶åŒ…å«äº†å®ƒçš„å®ç°hibernate-validator\nvalidation-apiåŸºæœ¬æ³¨è§£    é™åˆ¶ è¯´æ˜     @Null é™åˆ¶åªèƒ½ä¸ºnull   @NotNull é™åˆ¶å¿…é¡»ä¸èƒ½ä¸ºnull   @AssertFalse é™åˆ¶å¿…é¡»ä¸ºfalse   @AssertTrue é™åˆ¶å¿…é¡»ä¸ºtrue   @DecimalMax(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å¤§äºæŒ‡å®šå€¼çš„æ•°å­—   @DecimalMin(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å°äºæŒ‡å®šå€¼çš„æ•°å­—   @Digits(integer,fraction) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªå°æ•°ï¼Œä¸”æ•´æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡integerï¼Œå°æ•°éƒ¨åˆ†çš„ä½æ•°ä¸èƒ½è¶…è¿‡fraction   @Future é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ   @FutureOrPresent é™åˆ¶å¿…é¡»æ˜¯å°†æ¥çš„æ—¥æœŸæˆ–ç°åœ¨   @PastOrPresent é™åˆ¶å¿…é¡»æ˜¯è¿‡å»çš„æ—¥æœŸæˆ–ç°åœ¨   @Past é™åˆ¶å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ   @Min(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å°äºæŒ‡å®šå€¼çš„æ•°å­—,@Min and @Max supports primitives and their wrappers.   @Max(value) é™åˆ¶å¿…é¡»ä¸ºä¸€ä¸ªä¸å¤§äºæŒ‡å®šå€¼çš„æ•°å­—   @Pattern(regrexp) é™åˆ¶å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡regrexpæŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼   @Size(max,min) é™åˆ¶å­—ç¬¦é•¿åº¦å¿…é¡»åœ¨minåˆ°maxä¹‹é—´ï¼Œsupports String, Collection, Map and arrays   @NotEmpty éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸ä¸ºnullä¸”ä¸ä¸ºç©ºï¼ˆå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0ã€é›†åˆå¤§å°ä¸ä¸º0ï¼‰   @NotBlank éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼ä¸ä¸ºç©ºï¼ˆä¸ä¸ºnullã€å»é™¤é¦–ä½ç©ºæ ¼åé•¿åº¦ä¸º0ï¼‰ï¼Œä¸åŒäº@NotEmptyï¼Œ@NotBlankåªåº”ç”¨äºå­—ç¬¦ä¸²ä¸”åœ¨æ¯”è¾ƒæ—¶ä¼šå»é™¤å­—ç¬¦ä¸²çš„ç©ºæ ¼(The difference to @NotEmpty is that this constraint can only be applied on character sequences and that trailing white-spaces are ignored.)   @Email(regrexp, flags) éªŒè¯æ³¨è§£çš„å…ƒç´ å€¼æ˜¯Emailï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å’ŒflagæŒ‡å®šè‡ªå®šä¹‰çš„emailæ ¼å¼    æ³¨æ„ 1. å¯¹dto(@RequestBody)è¿›è¡Œæ•°æ®æ ¡éªŒ ç›´æ¥åœ¨dtoçš„ç±»ä¸­çš„å±æ€§ä¸ŠåŠ ä¸Šæ ¡éªŒæ³¨è§£ã€‚ä½†æ˜¯ä»…ä»…è¿™æ ·çš„è¯ï¼Œè¯¥æ³¨è§£ä¸ä¼šç”Ÿæ•ˆ\néœ€è¦åœ¨controllerä¸­éœ€è¦æ ¡éªŒçš„å‚æ•°å‰åŠ ä¸Š@Validatedæ³¨è§£ï¼š\ne.g.\n1 2 3 4 5 6  @PostMapping(\u0026#34;/register\u0026#34;) public ResultEntity register(@Validated @RequestBody CustomerRequest customerRequest){ customerService.register(customerRequest); return ResultEntity.succeed(); }   2. å¯¹GETè¯·æ±‚çš„å‚æ•°(@RequestParam)è¿›è¡Œæ•°æ®æ ¡éªŒ å¯¹@RequestParamæ³¨è§£çš„å‚æ•°é€šå¸¸æ²¡æœ‰ä¸“é—¨çš„ç±»ï¼Œéœ€è¦ç›´æ¥åœ¨controlleræ–¹æ³•çš„å‚æ•°å¤„åŠ ä¸Šæ ¡éªŒæ³¨è§£ï¼š\n1 2 3 4 5 6  @GetMapping(\u0026#34;/check-code\u0026#34;) public ResultEntity sendCheckCode(@RequestParam @Email(message = \u0026#34;å¿…é¡»ä¸ºåˆæ³•é‚®ç®±åœ°å€\u0026#34;) String email) { customerService.sendCheckCode(email); return ResultEntity.succeed(); }   ä»…ä»…è¿™æ ·ï¼Œæ³¨è§£ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚åˆ‡è®°éœ€è¦åœ¨controllerç±»ä¸ŠåŠ å…¥@Validatedæ³¨è§£æ‰å¯ä»¥ç”Ÿæ•ˆï¼š\n1 2 3 4 5  @Slf4j @RestController @Validated // å¯¹@RequestParamçš„æ ¡éªŒéœ€è¦åœ¨controllerä¸ŠåŠ @Validatedæ³¨è§£ @RequestMapping(\u0026#34;/customer\u0026#34;) public class CustomerController {   å®˜æ–¹æ–‡æ¡£ https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints\n","permalink":"https://haventong.github.io/post/validation-api/","summary":"JSR303/JSR-349ï¼Œhibernate validatorï¼Œspring validationä¹‹é—´çš„å…³ç³» JSR303æ˜¯ä¸€é¡¹æ ‡å‡†,JSR","title":"validation-api"},{"content":"Spring Bootå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡© é—®é¢˜ åœ¨å¯¹Spring Booté¡¹ç›®è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œä¼šå¯¹ä¸šåŠ¡é€»è¾‘serviceå±‚è¿›è¡Œæµ‹è¯•ã€‚è€Œserviceå±‚çš„ä»£ç å¯èƒ½ä¼šä½¿ç”¨utilä¸­çš„å·¥å…·ç±»ï¼Œè€Œå·¥å…·æ–¹æ³•é€šå¸¸æ¥è¯´éƒ½æ˜¯staticç±»å‹çš„æ–¹æ³•ã€‚é—®é¢˜åœ¨äºï¼Œå½“å¯¹serviceå±‚çš„ä»£ç è¿›è¡Œæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯¹é™æ€æ–¹æ³•æ‰“æ¡©ï¼Œè¿”å›æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚ç„¶è€Œï¼Œä¸»æµçš„æµ‹è¯•æ¡†æ¶Mockitoå¹¶ä¸æ”¯æŒå¯¹é™æ€æ–¹æ³•çš„æ‰“æ¡©ã€‚å¯¹äºæ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ±‚å…¶ä»–æ¡†æ¶çš„è§£å†³æ–¹æ¡ˆ\nè§£å†³ 1. é¦–å…ˆï¼Œé€šè¿‡mockitoå®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œå¯ä»¥å‘ç°ï¼š\n What are the limitations of Mockito\n Cannot mock final classes Cannot mock static methods Cannot mock final methods - their real behavior is executed without any exception. Mockito cannot warn you about mocking final methods so be vigilant.   å¯ä»¥çœ‹åˆ°ï¼ŒMockitoå¹¶ä¸æ”¯æŒmocké™æ€æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä»¥ä¸‹çš„æè¿°ï¼š\n Can I mock static methods?\nNo. Mockito prefers object orientation and dependency injection over static, procedural code that is hard to understand \u0026amp; change. If you deal with scary legacy code you can use JMockit or Powermock to mock static methods.\n é€šè¿‡è¿™æ ·çš„æè¿°ï¼Œæˆ‘ä»¬å‘ç°å…¶ä»–æ¡†æ¶æä¾›äº†è§£å†³æ–¹æ¡ˆï¼š\n JMockit Powermock  ä¹‹åï¼Œç”±äºç½‘ä¸Šçš„å›ç­”ä¸­ï¼ŒPowermockæ›´åŠ ä¸»æµï¼Œä¸”ä¸Mockitoçš„è¯­æ³•ç›¸è¿‘ï¼Œäºæ˜¯è€ƒè™‘é€šè¿‡Powermockæ¡†æ¶è§£å†³é—®é¢˜ã€‚\nå†æ¬¡æŸ¥é˜…äº†Powermockåœ¨githubä¸Šçš„é¡¹ç›®ä¸»é¡µï¼šï¼Œå¾—åˆ°ä»¥ä¸‹çš„è¯´æ˜ï¼š\n urrently PowerMock supports JUnit and TestNG. There are three different JUnit test executors available, one for JUnit 4.4-4.12, one for JUnit 4.0-4.3. The test executor for JUnit 3 is not avaliable since PowerMock 2.0.\n å¯ä»¥çœ‹å‡ºï¼ŒPowermockå½“å‰æœ€æ–°ç‰ˆæœ¬ä»…æ”¯æŒåˆ°JUnit4.12ï¼Œè€Œæ— æ³•å¯¹JUnit5æä¾›æ”¯æŒã€‚ç„¶è€Œï¼Œspring-boot-starter-testä¸­ï¼Œæ•´åˆçš„å·²æ˜¯JUnit5. åœ¨ç½‘ä¸Šæ‰¾å¯»äº†ä¼—å¤šçš„å›ç­”ï¼Œæ‰€æœ‰çš„ä¾‹å­éƒ½æ˜¯é€šè¿‡JUnit4ç¼–å†™çš„æµ‹è¯•è„šæœ¬ã€‚\nä¸”é€šè¿‡Powermockæµ‹è¯•çš„è„šæœ¬ç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 4 5  @RunWith(PowerMockRunner.class) @PrepareForTest( { YourClassWithEgStaticMethod.class }) public class YourTestCase { ... }   è¯¥ç»“æ„ä¸ºJUnit4çš„å†™æ³•ï¼Œå¹¶ä¸èƒ½åœ¨JUnit5ä¸­ä½¿ç”¨ã€‚æˆ‘ä¹Ÿå°è¯•å¼ºè¡Œåœ¨Spring Booté¡¹ç›®ä¸­å•ç‹¬æ·»åŠ JUnit4ä¾èµ–ï¼Œç„¶åå•ç‹¬é€šè¿‡JUnit4æ¥è¿è¡Œé€šè¿‡Powermockç¼–å†™çš„æµ‹è¯•è„šæœ¬ï¼Œå¤šæ¬¡å°è¯•ä¹‹åä¾ç„¶æ— æ³•è¿è¡Œã€‚äºæ˜¯è½¬å‘å¦ä¸€ä¸ªæ¡†æ¶\u0026ndash;JMockitã€‚\n2. å°è¯•é€šè¿‡JMockitæ¥æµ‹è¯•é™æ€æ–¹æ³•ã€‚é¦–å…ˆæŸ¥çœ‹JMockitæ˜¯å¦æ”¯æŒJUnit5ï¼Œåœ¨å®˜ç½‘å¯»æ‰¾åˆ°äº†ç­”æ¡ˆï¼š\n To run tests that use any of the JMockit APIs, use your Java IDE, Maven/Gradle build script, etc. the way you normally would. In principle, any JDK of version 1.7 or newer, on Windows, Mac OS X, or Linux, can be used. JMockit supports (and requires) the use of JUnit (version 4 or 5) or TestNG\n æ—¢ç„¶JMockitæ”¯æŒJUnit5ï¼Œä¸”å¯ä»¥å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©ï¼Œè¿™å°±æ˜¯ä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘å°±å»å¯»æ‰¾å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©çš„å®ç°æ–¹æ¡ˆã€‚\nåœ¨ä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å‘ç°äº†è§£å†³æ–¹æ¡ˆï¼š\n  é¦–å…ˆï¼Œéœ€è¦æ·»åŠ JMockitçš„ä¾èµ–ï¼Œé€šè¿‡mvnrepositoryæ·»åŠ æœ€æ–°ç‰ˆçš„JMockitä¾èµ–ï¼š\n1 2 3 4 5 6 7  \u0026lt;!-- https://mvnrepository.com/artifact/org.jmockit/jmockit --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.jmockit\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jmockit\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.48\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt;     æŸ¥çœ‹åšå®¢ä¸­ç»™å‡ºçš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  // éœ€è¦æµ‹è¯•çš„ç±» public class AppManager { public boolean managerResponse(String question) { return AppManager.isResponsePositive(question); } public static boolean isResponsePositive(String value) { if (value == null) { return false; } int length = value.length(); int randomNumber = randomNumber(); return length == randomNumber ? true : false; } private static int randomNumber() { return new Random().nextInt(7); } } // å¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡© @Test public void givenAppManager_whenStaticMethodCalled_thenValidateExpectedResponse() { new MockUp\u0026lt;AppManager\u0026gt;() { @Mock public boolean isResponsePositive(String value) { return false; } }; assertFalse(appManager.managerResponse(\u0026#34;Some string...\u0026#34;)); }     æŒ‰ç…§ç±»ä¼¼çš„å†™æ³•ï¼Œå®Œæˆäº†æˆ‘çš„æµ‹è¯•è„šæœ¬çš„ç¼–å†™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  @Test @DisplayName(\u0026#34;å‘é€é‚®ä»¶å†…å®¹æ­£ç¡®\u0026#34;) void shouldSendCorrectEmailWhenUserIsNew(){ // ä½¿ç”¨JMockitå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡©  new MockUp\u0026lt;CheckCodeUtil\u0026gt;(){ @mockit.Mock public String generateCheckCode(){ return \u0026#34;123456\u0026#34;; } }; when(redisTemplate.opsForValue()).thenReturn(new ValueOperationsFake()); ArgumentCaptor\u0026lt;String\u0026gt; emailCaptor = ArgumentCaptor.forClass(String.class); ArgumentCaptor\u0026lt;String\u0026gt; subjectCaptor = ArgumentCaptor.forClass(String.class); ArgumentCaptor\u0026lt;String\u0026gt; contentCaptor = ArgumentCaptor.forClass(String.class); customerService.sendCheckCode(\u0026#34;10175101152@stu.ecnu.edu.cn\u0026#34;); verify(mailService, times(1)) .sendHtmlMail(emailCaptor.capture(), subjectCaptor.capture(), contentCaptor.capture()); assertAll( () -\u0026gt; assertEquals(\u0026#34;10175101152@stu.ecnu.edu.cn\u0026#34;, emailCaptor.getValue()), () -\u0026gt; assertEquals(\u0026#34;Registration from MeetHere\u0026#34;, subjectCaptor.getValue()), () -\u0026gt; assertEquals(\u0026#34;\u0026lt;h1\u0026gt;Welcome to MeetHere!\u0026lt;/h1\u0026gt;\u0026lt;p\u0026gt;Your check code is \u0026lt;u\u0026gt;\u0026#34; + \u0026#34;123456\u0026#34; + \u0026#34;\u0026lt;/u\u0026gt;\u0026lt;/p\u0026gt;\u0026#34;, contentCaptor.getValue()) ); }     ç¼–å†™å®Œæ¯•åï¼Œå°è¯•æ˜¯å¦å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯ä¾ç„¶æŠ¥é”™ï¼š\n1  java.lang.IllegalStateException: JMockit didn\u0026#39;t get initialized; please check the -javaagent JVM initialization parameter was used   é’ˆå¯¹æŠ¥é”™ä¿¡æ¯å»Googleè¿›è¡ŒæŸ¥æ‰¾ï¼Œå¤§å¤šæ•°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š\n1  @RunWith(JMockit.class)   è¿™åŒæ ·æ˜¯JUnit4çš„å†™æ³•ã€‚å¹¶ä¸èƒ½è§£å†³æˆ‘æ‰€é‡åˆ°çš„é—®é¢˜\n  å†æ¬¡å›åˆ°JMockitçš„å®˜æ–¹æ–‡æ¡£ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ä¸­ç»™å‡ºçš„è¿è¡Œæ–¹æ³•ï¼Œå‘ç°äº†æ½œåœ¨çš„è§£å†³æ–¹æ¡ˆï¼š\n JMockit also requires the -javaagent JVM initialization parameter to be used; when using the Maven Surefire plugin for test execution, it\u0026rsquo;s specified as follows:\n æ‰€ä»¥çœ‹æ¥æƒ³è¦è¿è¡ŒJMockitoç¼–å†™çš„æµ‹è¯•è„šæœ¬ï¼Œéœ€è¦æŒ‡å®š-javaagentçš„JVMå‚æ•°æ‰å¯ä»¥ã€‚\nå®˜ç½‘ç»™å‡ºäº†æ–¹æ¡ˆï¼š\n1 2 3 4 5 6 7 8 9 10 11  \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;artifactId\u0026gt;maven-surefire-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.22.2\u0026lt;/version\u0026gt; \u0026lt;!-- or some other version --\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;argLine\u0026gt; -javaagent:${settings.localRepository}/org/jmockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar \u0026lt;/argLine\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt;   å°†è¿™æ®µxmlå¤åˆ¶åˆ°pomæ–‡ä»¶ä¸­ï¼Œå¹¶å°†${jmockit.version}æ›¿æ¢ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨çš„1.48\n  å†æ¬¡è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š\n BINGO!\n  ","permalink":"https://haventong.github.io/post/springboot%E4%B8%BA%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E6%89%93%E6%A1%A9/","summary":"Spring Bootå¯¹é™æ€æ–¹æ³•è¿›è¡Œæ‰“æ¡© é—®é¢˜ åœ¨å¯¹Spring Booté¡¹ç›®è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œä¼šå¯¹ä¸šåŠ¡é€»è¾‘serviceå±‚è¿›è¡Œæµ‹è¯•ã€‚è€Œserviceå±‚çš„ä»£ç å¯","title":"SpringBootä¸ºé™æ€æ–¹æ³•æ‰“æ¡©"},{"content":"é…ç½®redisæœåŠ¡ç«¯   å…è®¸è¿œç¨‹è®¿é—®\næ³¨é‡Šæ‰ bind 127.0.0.1\n  ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ\nå°†daemonize no æ”¹ä¸º daemonize yes\n  Java è¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç ï¼š\nrequirepass \u0026lt;password\u0026gt;\n  æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œ 1  ps -ef | grep -i redis   è¿œç¨‹è¿æ¥redis 1  redis-cli -h \u0026lt;ip\u0026gt; -p \u0026lt;port\u0026gt; -a \u0026lt;password\u0026gt;   rediså…³é—­   æ–­ç”µ(éæ­£å¸¸å…³é—­ï¼Œå®¹æ˜“æ•°æ®ä¸¢å¤±)\næŸ¥è¯¢PID:\n1 2 3  ps -ef | grep -i redis # Then kill -9 \u0026lt;PID\u0026gt;     é€šè¿‡å®¢æˆ·ç«¯å…³é—­(æ­£å¸¸å…³é—­ï¼Œæ•°æ®ä¿å­˜)\n1  SHUTDOWN     redisåŠ è½½é…ç½®æ–‡ä»¶å¼€å¯ 1  redis-server /usr/local/redis/redis.conf   ","permalink":"https://haventong.github.io/post/redis%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%BC%80%E5%85%B3/","summary":"é…ç½®redisæœåŠ¡ç«¯ å…è®¸è¿œç¨‹è®¿é—® æ³¨é‡Šæ‰ bind 127.0.0.1 ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ å°†daemonize no æ”¹ä¸º daemonize yes Java è¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç ï¼š requirepass \u0026lt;password\u0026gt; æŸ¥çœ‹redisæ˜¯å¦åœ¨","title":"redisåŸºæœ¬é…ç½®åŠå¼€å…³"},{"content":"ç»‘å®šçš„ä¸»æœºåœ°å€ 1  bind 127.0.0.1   å¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼Œåˆ™éœ€è¦æ³¨é‡Šæ‰\nå®ˆæŠ¤è¿›ç¨‹ 1  daemonize no   Redisé»˜è®¤ä»¥éå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå¦‚æœæƒ³è¦æ”¹ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œåˆ™è®¾ç½®ä¸ºyes\npidfile 1  pidfile /var/run/redis_6379.pid   è®¾ç½®å½“Redisä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œæ—¶ï¼Œå®ƒçš„pidå†™å…¥çš„æ–‡ä»¶\nç«¯å£ 1  port 6379   æŒ‡å®šRedisçš„ç«¯å£\næ—¥å¿—è®°å½•çº§åˆ« 1  loglevel verbose   Redisæ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebug, verbose, notice, warning, é»˜è®¤ä¸ºverbose\nè®¾ç½®æ•°æ®åº“ä¸ªæ•° 1  databases 16   æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ 1  save \u0026lt;seconds\u0026gt; \u0026lt;changes\u0026gt;   é»˜è®¤é…ç½®æ–‡ä»¶æä¾›ä¸‰ç§æ“ä½œ\n1 2 3  save 900 1 save 300 10 save 60 10000   æ»¡è¶³ä¸€ä¸ªå°±æŒä¹…åŒ–\næŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤ä¸ºdump.rdb 1  dbfilename dump.rdb   æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½• 1  dir ./   é»˜è®¤å½“å‰ç›®å½•\nä¸»ä»æœåŠ¡ 1  slaveof \u0026lt;masterip\u0026gt; \u0026lt;masterport\u0026gt;   è®¾ç½®å½“æœ¬æœºä¸ºslaveæœåŠ¡æ—¶ï¼Œè®¾ç½®masteræœåŠ¡çš„IPåœ°å€åŠç«¯å£ï¼Œåœ¨Rediså¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä»masterè¿›è¡Œæ•°æ®åŒæ­¥\nmasteræœåŠ¡å¯†ç ä¿æŠ¤ 1  masterauth \u0026lt;master-password\u0026gt;   å½“masteræœåŠ¡è®¾ç½®äº†å¯†ç ä¿æŠ¤æ—¶ï¼ŒslaveæœåŠ¡è¿æ¥masteræœåŠ¡çš„å¯†ç \nè®¾ç½®redisè¿æ¥å¯†ç  1  requirepass foobared   å¦‚æœé…ç½®äº†è¿æ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥Redisæ—¶éœ€è¦é€šè¿‡ AUTH \u0026lt;password\u0026gt;å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­\nJavaè¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç \nè®¾ç½®æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ 1  maxclients 10000   æŒ‡å®šredisæœ€å¤§å†…å­˜é™åˆ¶ 1  maxmemory \u0026lt;bytes\u0026gt;     å»ºè®®æ ¹æ®æœåŠ¡å™¨å®é™…æƒ…å†µè®¾ç½®\n  å»ºè®®ä¸è¦è¶…è¿‡1G\n  å¯¹äºredisä¸­çš„å†…å­˜ç®¡ç†æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š   ä¸ºæ•°æ®è®¾ç½®è¶…æ—¶äº‹ä»¶\n  é‡‡ç”¨LRUç®—æ³•å°†ä¸ç”¨çš„æ•°æ®åˆ é™¤\n volatile-lru: è®¾å®šè¶…æ—¶æ—¶é—´çš„æ•°æ®ä¸­ï¼Œåˆ é™¤æœ€ä¸å¸¸ä½¿ç”¨çš„å…ƒç´  allkeys-lru: æŸ¥è¯¢æ‰€æœ‰keyä¸­æœ€è¿‘æœ€ä¸å¸¸ä½¿ç”¨çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œåº”ç”¨æœ€å¹¿æ³› volatile-random: åœ¨å·²ç»è®¾å®šäº†è¶…æ—¶çš„æ•°æ®ä¸­éšæœºåˆ é™¤ allkeys-random: æŸ¥è¯¢æ‰€æœ‰çš„keyä¹‹åéšæœºåˆ é™¤ volatile-ttl: æŸ¥è¯¢å…¨éƒ¨è®¾å®šè¶…æ—¶æ—¶é—´çš„æ•°æ®ï¼Œä¹‹åæ’åºï¼Œå°†é©¬ä¸Šå¿«è¦è¿‡æœŸçš„æ•°æ®è¿›è¡Œåˆ é™¤æ“ä½œ noevication: ä¸è¿›è¡Œåˆ é™¤æ“ä½œï¼Œå†…å­˜æº¢å‡ºå°±æŠ¥é”™è¿”å›    é…ç½®redisæœåŠ¡ç«¯   å…è®¸è¿œç¨‹è®¿é—®\næ³¨é‡Šæ‰ bind 127.0.0.1\n  ä»¥å®ˆæŠ¤è¿›ç¨‹è¿è¡Œ\nå°†daemonize no æ”¹ä¸º daemonize yes\n  Java è¿æ¥rediså¿…é¡»è®¾ç½®å¯†ç ï¼š\nrequirepass \u0026lt;password\u0026gt;\n  æŸ¥çœ‹redisæ˜¯å¦åœ¨è¿è¡Œ 1  ps -ef | grep -i redis   è¿œç¨‹è¿æ¥redis 1  redis-cli -h \u0026lt;ip\u0026gt; -p \u0026lt;port\u0026gt; -a \u0026lt;password\u0026gt;   ","permalink":"https://haventong.github.io/post/redis-conf/","summary":"ç»‘å®šçš„ä¸»æœºåœ°å€ 1 bind 127.0.0.1 å¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼Œåˆ™éœ€è¦æ³¨é‡Šæ‰ å®ˆæŠ¤è¿›ç¨‹ 1 daemonize no Redisé»˜è®¤ä»¥éå®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼Œå¦‚æœæƒ³è¦æ”¹ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œåˆ™è®¾ç½®ä¸ºyes pidfile 1 pidfile /var/run/redis_6379.pid","title":"redis.conf"},{"content":"Serializableæ¥å£æ¦‚è¿° Serializableæ˜¯java.ioåŒ…ä¸­å®šä¹‰çš„ã€ç”¨äºå®ç°Javaç±»çš„åºåˆ—åŒ–æ“ä½œè€Œæä¾›çš„ä¸€ä¸ªè¯­ä¹‰çº§åˆ«çš„æ¥å£ã€‚Serializableåºåˆ—åŒ–æ¥å£æ²¡æœ‰ä»»ä½•æ–¹æ³•æˆ–è€…å­—æ®µï¼Œåªæ˜¯ç”¨äºæ ‡è¯†å¯åºåˆ—åŒ–çš„è¯­ä¹‰ã€‚å®ç°äº†Serializableæ¥å£çš„ç±»å¯ä»¥è¢«ObjectOutputStreamè½¬æ¢ä¸ºå­—èŠ‚æµï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ObjectInputStreamå†å°†å…¶è§£æä¸ºå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶åï¼Œå†æ¬¡ä»æ–‡ä»¶ä¸­è¯»å–å®ƒå¹¶ååºåˆ—åŒ–æˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä½¿ç”¨è¡¨ç¤ºå¯¹è±¡åŠå…¶æ•°æ®çš„ç±»å‹ä¿¡æ¯å’Œå­—èŠ‚åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºå¯¹è±¡ã€‚\nè€Œè¿™ä¸€ç‚¹å¯¹äºé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºæ— è®ºä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Œå…¶åº•å±‚æ¶‰åŠIOæ“ä½œçš„éƒ¨åˆ†è¿˜æ˜¯ç”±æ“ä½œç³»ç»Ÿå…¶å¸®å…¶å®Œæˆçš„ï¼Œè€Œåº•å±‚IOæ“ä½œéƒ½æ˜¯ä»¥å­—èŠ‚æµçš„æ–¹å¼è¿›è¡Œçš„ï¼Œæ‰€ä»¥å†™æ“ä½œéƒ½æ¶‰åŠå°†ç¼–ç¨‹è¯­è¨€æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œè€Œè¯»æ“ä½œåˆ™åˆæ¶‰åŠå°†å­—èŠ‚æµè½¬åŒ–ä¸ºç¼–ç¨‹è¯­è¨€ç±»å‹çš„ç‰¹å®šæ•°æ®ç±»å‹ã€‚è€ŒJavaä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯¹è±¡ä½œä¸ºå…¶ä¸»è¦æ•°æ®çš„ç±»å‹è½½ä½“ï¼Œä¸ºäº†å®Œæˆå¯¹è±¡æ•°æ®çš„è¯»å†™æ“ä½œï¼Œä¹Ÿå°±éœ€è¦ä¸€ç§æ–¹å¼æ¥è®©JVMçŸ¥é“åœ¨è¿›è¡ŒIOæ“ä½œæ—¶å¦‚ä½•å°†å¯¹è±¡æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œä»¥åŠå¦‚ä½•å°†å­—èŠ‚æµæ•°æ®è½¬æ¢ä¸ºç‰¹å®šçš„å¯¹è±¡ï¼Œè€ŒSerializableæ¥å£å°±æ‰¿æ‹…äº†è¿™æ ·ä¸€ä¸ªè§’è‰²ã€‚\nä¸‹é¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¾‹å­æ¥å®ç°å°†åºåˆ—åŒ–çš„å¯¹è±¡å­˜å‚¨åˆ°æ–‡ä»¶ï¼Œç„¶åå†å°†å…¶ä»æ–‡ä»¶ä¸­ååºåˆ—åŒ–ä¸ºå¯¹è±¡ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nå…ˆå®šä¹‰ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡Userï¼š\n1 2 3 4 5 6 7 8 9 10 11  public class User implements Serializable { private static final long serialVersionUID = 1L; private String userId; private String userName; public User(String userId, String userName) { this.userId = userId; this.userName = userName; } }   ç„¶åæˆ‘ä»¬ç¼–å†™æµ‹è¯•ç±»ï¼Œæ¥å¯¹è¯¥å¯¹è±¡è¿›è¡Œè¯»å†™æ“ä½œï¼Œæˆ‘ä»¬å…ˆæµ‹è¯•å°†è¯¥å¯¹è±¡å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  public class SerializableTest { /** * å°†Userå¯¹è±¡ä½œä¸ºæ–‡æœ¬å†™å…¥ç£ç›˜ */ public static void writeObj() { User user = new User(\u0026#34;1001\u0026#34;, \u0026#34;Joe\u0026#34;); try { ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(\u0026#34;/Users/guanliyuan/user.txt\u0026#34;)); objectOutputStream.writeObject(user); objectOutputStream.close(); } catch (IOException e) { e.printStackTrace(); } } public static void main(String args[]) { writeObj(); } }   è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å°±å°†Userå¯¹è±¡åŠå…¶æºå¸¦çš„æ•°æ®å†™å…¥äº†æ–‡æœ¬user.txtä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹user.txtä¸­å­˜å‚¨çš„æ•°æ®æ­¤æ—¶æ˜¯ä¸ªä»€ä¹ˆæ ¼å¼ï¼š\n1 2 3 4 5  java.io.NotSerializableException: cn.wudimanong.serializable.User at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184) at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348) at cn.wudimanong.serializable.SerializableTest.writeObj(SerializableTest.java:19) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:27)   æˆ‘ä»¬çœ‹åˆ°å¯¹è±¡æ•°æ®ä»¥äºŒè¿›åˆ¶æ–‡æœ¬çš„æ–¹å¼è¢«æŒä¹…åŒ–åˆ°äº†ç£ç›˜æ–‡ä»¶ä¸­ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸‹å°†Userå®ç°Serializableæ¥å£çš„ä»£ç éƒ¨åˆ†å»æ‰ï¼Œçœ‹çœ‹æ­¤æ—¶å†™æ“ä½œæ˜¯å¦è¿˜èƒ½æˆåŠŸï¼Œç»“æœå¦‚ä¸‹ï¼š\nç»“æœä¸å‡ºæ‰€æ–™ï¼Œæœç„¶æ˜¯ä¸å¯ä»¥çš„ï¼ŒæŠ›å‡ºäº†NotSerializableExceptionå¼‚å¸¸ï¼Œæç¤ºéå¯åºåˆ—åŒ–å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰å®ç°Serializableæ¥å£çš„å¯¹è±¡æ˜¯æ— æ³•é€šè¿‡IOæ“ä½œæŒä¹…åŒ–çš„ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­ç¼–å†™æµ‹è¯•ä»£ç ï¼Œå°è¯•å°†ä¹‹å‰æŒä¹…åŒ–å†™å…¥user.txtæ–‡ä»¶çš„å¯¹è±¡æ•°æ®å†æ¬¡è½¬åŒ–ä¸ºJavaå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  public class SerializableTest { /** * å°†ç±»ä»æ–‡æœ¬ä¸­æå–å¹¶èµ‹å€¼ç»™å†…å­˜ä¸­çš„ç±» */ public static void readObj() { try { ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(\u0026#34;/Users/guanliyuan/user.txt\u0026#34;)); try { Object object = objectInputStream.readObject(); User user = (User) object; System.out.println(user); } catch (ClassNotFoundException e) { e.printStackTrace(); } } catch (IOException e) { e.printStackTrace(); } } public static void main(String args[]) { readObj(); } }   é€šè¿‡ååºåˆ—åŒ–æ“ä½œï¼Œå¯ä»¥å†æ¬¡å°†æŒä¹…åŒ–çš„å¯¹è±¡å­—èŠ‚æµæ•°æ®é€šè¿‡IOè½¬åŒ–ä¸ºJavaå¯¹è±¡ï¼Œç»“æœå¦‚ä¸‹ï¼š\n1  cn.wudimanong.serializable.User@6f496d9f   æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å†æ¬¡å°è¯•å°†Userå®ç°Serializableæ¥å£çš„ä»£ç éƒ¨åˆ†å»æ‰ï¼Œå‘ç°ä¹Ÿæ— æ³•å†æ–‡æœ¬è½¬æ¢ä¸ºåºåˆ—åŒ–å¯¹è±¡ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºï¼š\n1 2 3 4 5 6 7 8  ava.io.InvalidClassException: cn.wudimanong.serializable.User; class invalid for deserialization at java.io.ObjectStreamClass$ExceptionInfo.newInvalidClassException(ObjectStreamClass.java:157) at java.io.ObjectStreamClass.checkDeserialize(ObjectStreamClass.java:862) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2038) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1568) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:428) at cn.wudimanong.serializable.SerializableTest.readObj(SerializableTest.java:31) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:44)   æç¤ºéæ³•ç±»å‹è½¬æ¢å¼‚å¸¸ï¼Œè¯´æ˜åœ¨Javaä¸­å¦‚ä½•è¦å®ç°å¯¹è±¡çš„IOè¯»å†™æ“ä½œï¼Œéƒ½å¿…é¡»å®ç°Serializableæ¥å£ï¼Œå¦åˆ™ä»£ç å°±ä¼šæŠ¥é”™!\nåºåˆ—åŒ–\u0026amp;ååºåˆ—åŒ– é€šè¿‡ä¸Šé¢çš„é˜è¿°å’Œç¤ºä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å¯¹Serializableæ¥å£çš„ä½œç”¨æ˜¯æœ‰äº†æ¯”è¾ƒå…·ä½“çš„ä½“ä¼šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸Šå±‚åˆ°ç†è®ºå±‚é¢ï¼Œçœ‹ä¸‹åˆ°åº•ä»€ä¹ˆæ˜¯åºåˆ—åŒ–/ååºåˆ—åŒ–ã€‚åºåˆ—åŒ–æ˜¯æŒ‡æŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¯¹è±¡çš„åºåˆ—åŒ–ï¼Œå°±æ˜¯æŠŠå†…å­˜ä¸­çš„è¿™äº›å¯¹è±¡å˜æˆä¸€è¿ä¸²çš„å­—èŠ‚(bytes)æè¿°çš„è¿‡ç¨‹ã€‚\nè€Œååºåˆ—åŒ–åˆ™ç›¸åï¼Œå°±æ˜¯æŠŠæŒä¹…åŒ–çš„å­—èŠ‚æ–‡ä»¶æ•°æ®æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–å‘¢?\nå¤§æ¦‚æœ‰è¿™æ ·ä¸¤ç±»æ¯”è¾ƒå¸¸è§çš„åœºæ™¯ï¼š\n éœ€è¦æŠŠå†…å­˜ä¸­çš„å¯¹è±¡çŠ¶æ€æ•°æ®ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­çš„æ—¶å€™ï¼Œè¿™ä¸ªåœºæ™¯æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬åˆ©ç”¨mybatisæ¡†æ¶ç¼–å†™æŒä¹…å±‚insertå¯¹è±¡æ•°æ®åˆ°æ•°æ®åº“ä¸­æ—¶ ç½‘ç»œé€šä¿¡æ—¶éœ€è¦ç”¨å¥—æ¥å­—åœ¨ç½‘ç»œä¸­ä¼ é€å¯¹è±¡æ—¶ï¼Œå¦‚æˆ‘ä»¬ä½¿ç”¨RPCåè®®è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶  å…³äºserialVersionUID å¯¹äºJVMæ¥è¯´ï¼Œè¦è¿›è¡ŒæŒä¹…åŒ–çš„ç±»å¿…é¡»è¦æœ‰ä¸€ä¸ªæ ‡è®°ï¼Œåªæœ‰æŒæœ‰è¿™ä¸ªæ ‡è®°JVMæ‰å…è®¸ç±»åˆ›å»ºçš„å¯¹è±¡å¯ä»¥é€šè¿‡å…¶IOç³»ç»Ÿè½¬æ¢ä¸ºå­—èŠ‚æ•°æ®ï¼Œä»è€Œå®ç°æŒä¹…åŒ–ï¼Œè€Œè¿™ä¸ªæ ‡è®°å°±æ˜¯Serializableæ¥å£ã€‚è€Œåœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­åˆ™éœ€è¦ä½¿ç”¨serialVersionUIDæ¥ç¡®å®šç”±é‚£ä¸ªç±»æ¥åŠ è½½è¿™ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ç°Serializableæ¥å£çš„æ—¶å€™ï¼Œä¸€èˆ¬è¿˜ä¼šè¦å»å°½é‡æ˜¾ç¤ºåœ°å®šä¹‰serialVersionUIDï¼Œå¦‚ï¼š\n1  private static final long serialVersionUID = 1L;   åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ¥æ”¶æ–¹ä¸ºå¯¹è±¡åŠ è½½äº†ä¸€ä¸ªç±»ï¼Œå¦‚æœè¯¥å¯¹è±¡çš„serialVersionUIDä¸å¯¹åº”æŒä¹…åŒ–æ—¶çš„ç±»ä¸åŒï¼Œé‚£ä¹ˆååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å°†ä¼šå¯¼è‡´InvalidClassExceptionå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰ååºåˆ—åŒ–çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ•…æ„å°†Userç±»çš„serialVersionUIDæ”¹ä¸º2Lï¼Œå¦‚ï¼š\n1  private static final long serialVersionUID = 2L;   é‚£ä¹ˆæ­¤æ—¶ï¼Œåœ¨ååºä¾‹åŒ–æ—¶å°±ä¼šå¯¼è‡´å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9  java.io.InvalidClassException: cn.wudimanong.serializable.User; local class incompatible: stream classdesc serialVersionUID = 1, local class serialVersionUID = 2 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:687) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1880) at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1746) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2037) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1568) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:428) at cn.wudimanong.serializable.SerializableTest.readObj(SerializableTest.java:31) at cn.wudimanong.serializable.SerializableTest.main(SerializableTest.java:44)   å¦‚æœæˆ‘ä»¬åœ¨åºåˆ—åŒ–ä¸­æ²¡æœ‰æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDï¼Œåˆ™åºåˆ—åŒ–è¿è¡Œæ—¶å°†ä¼šæ ¹æ®è¯¥ç±»çš„å„ä¸ªæ–¹é¢è®¡ç®—è¯¥ç±»é»˜è®¤çš„serialVersionUIDå€¼ã€‚ä½†æ˜¯ï¼ŒJavaå®˜æ–¹å¼ºçƒˆå»ºè®®æ‰€æœ‰è¦åºåˆ—åŒ–çš„ç±»éƒ½æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDå­—æ®µï¼Œå› ä¸ºå¦‚æœé«˜åº¦ä¾èµ–äºJVMé»˜è®¤ç”ŸæˆserialVersionUIDï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä¸ç¼–è¯‘å™¨çš„å®ç°ç»†èŠ‚è€¦åˆï¼Œè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´åœ¨ååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–çš„InvalidClassExceptionå¼‚å¸¸ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯è·¨ä¸åŒJavaç¼–è¯‘å™¨å®ç°çš„serialVersionUIDå€¼çš„ä¸€è‡´ï¼Œå®ç°Serializableæ¥å£çš„å¿…é¡»æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDå­—æ®µã€‚\næ­¤å¤–serialVersionUIDå­—æ®µåœ°å£°æ˜è¦å°½å¯èƒ½ä½¿ç”¨privateå…³é”®å­—ä¿®é¥°ï¼Œè¿™æ˜¯å› ä¸ºè¯¥å­—æ®µçš„å£°æ˜åªé€‚ç”¨äºå£°æ˜çš„ç±»ï¼Œè¯¥å­—æ®µä½œä¸ºæˆå‘˜å˜é‡è¢«å­ç±»ç»§æ‰¿æ˜¯æ²¡æœ‰ç”¨å¤„çš„!æœ‰ä¸ªç‰¹æ®Šçš„åœ°æ–¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„ç±»æ˜¯ä¸èƒ½æ˜¾ç¤ºåœ°å£°æ˜serialVersionUIDçš„ï¼Œå› ä¸ºå®ƒä»¬å§‹ç»ˆå…·æœ‰é»˜è®¤è®¡ç®—çš„å€¼ï¼Œä¸è¿‡æ•°ç»„ç±»ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯æ”¾å¼ƒäº†åŒ¹é…serialVersionUIDå€¼çš„è¦æ±‚ã€‚\n","permalink":"https://haventong.github.io/post/serializable%E6%8E%A5%E5%8F%A3/","summary":"Serializableæ¥å£æ¦‚è¿° Serializableæ˜¯java.ioåŒ…ä¸­å®šä¹‰çš„ã€ç”¨äºå®ç°Javaç±»çš„åºåˆ—åŒ–æ“ä½œè€Œæä¾›çš„ä¸€ä¸ªè¯­ä¹‰çº§åˆ«çš„æ¥å£","title":"Serializableæ¥å£"},{"content":"Spring Boot-CORS ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ å®šä¹‰ï¼šæµè§ˆå™¨ä»ä¸€ä¸ªåŸŸåçš„ç½‘é¡µå–è¯·æ±‚å¦ä¸€ä¸ªåŸŸåä¸‹çš„ä¸œè¥¿ã€‚é€šä¿—ç‚¹è¯´ï¼Œæµè§ˆå™¨ç›´æ¥ä»AåŸŸè®¿é—®BåŸŸä¸­çš„èµ„æºæ˜¯ä¸è¢«å…è®¸çš„ï¼Œå¦‚æœæƒ³è¦è®¿é—®ï¼Œå°±éœ€è¦è¿›è¡Œä¸€æ­¥æ“ä½œï¼Œè¿™æ“ä½œå°±å«â€œè·¨åŸŸâ€ã€‚ä¾‹å¦‚ï¼Œä½ ä»ç™¾åº¦çš„é¡µé¢ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œè¯·æ±‚äº†æ–°æµªçš„ä¸€ä¸ªæ¥å£ï¼Œè¿™å°±è¿›è¡Œäº†è·¨åŸŸã€‚ä¸å•å•åªæœ‰åŸŸåä¸åŒå°±æ˜¯è·¨åŸŸï¼ŒåŸŸåã€ç«¯å£ã€åè®®å…¶ä¸€ä¸åŒå°±æ˜¯ä¸åŒçš„åŸŸï¼Œè¯·æ±‚èµ„æºéœ€è¦è·¨åŸŸã€‚\nä¸ºä»€ä¹ˆè¦è·¨åŸŸï¼Ÿ ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Œè€Œä¸ç›´æ¥è®¿é—®å…¶ä»–åŸŸä¸‹çš„èµ„æºå‘¢ï¼Ÿè¿™æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸“ä¸šç‚¹è¯´å«æµè§ˆå™¨åŒæºç­–ç•¥é™åˆ¶ã€‚ä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ã€‚ç°åœ¨çš„å®‰å…¨æ¡†æ¶ï¼Œä¸€èˆ¬è¯·æ±‚çš„æ—¶å€™headerä¸­ä¸æ˜¯éƒ½å­˜ä¸ªtokenå˜›ï¼Œä½ è¦æ˜¯ç”¨è¿™ä¸ªtokenå»æ­£å¸¸è®¿é—®AåŸŸä¸‹çš„ä¸œè¥¿æ˜¯æ²¡é—®é¢˜çš„ï¼Œç„¶ååˆå»è®¿é—®äº†BåŸŸï¼Œç»“æœé˜´å·®é˜³é”™çš„è¿˜å¸¦ç€è¿™ä¸ªtokenï¼Œé‚£ä¹ˆBåŸŸï¼Œæˆ–è€…è¯´Bç½‘ç«™æ˜¯ä¸æ˜¯å°±å¯ä»¥æ‹¿ç€ä½ çš„tokenå»AåŸŸä¸‹åšç‚¹ä»€ä¹ˆå‘¢ï¼Œè¿™å°±ç›¸å½“å±é™©äº†ã€‚æ‰€ä»¥æµè§ˆå™¨åŠ ä¸Šäº†æ‰€è°“çš„æµè§ˆå™¨åŒæºç­–ç•¥é™åˆ¶ã€‚ä½†æ˜¯ä¸ºäº†æˆ‘ä»¬çœŸçš„éœ€è¦ä»AåŸŸä¸‹è®¿é—®Bçš„èµ„æºï¼ˆæ­£å¸¸è®¿é—®ï¼‰ï¼Œå°±éœ€è¦ç”¨åˆ°è·¨åŸŸï¼Œè·¨è¶Šè¿™ä¸ªé™åˆ¶äº†ã€‚\nSpringBootè§£å†³è·¨åŸŸé—®é¢˜  SpringBootå¯ä»¥åŸºäºCorsè§£å†³è·¨åŸŸé—®é¢˜ï¼ŒCorsæ˜¯ä¸€ç§æœºåˆ¶ï¼Œå‘Šè¯‰æˆ‘ä»¬çš„åå°ï¼Œå“ªè¾¹ï¼ˆorigin ï¼‰æ¥çš„è¯·æ±‚å¯ä»¥è®¿é—®æœåŠ¡å™¨çš„æ•°æ®ã€‚\n å…¨å±€é…ç½® é…ç½®å®ä¾‹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126  @Configuration public class CorsConfig { @Bean public WebMvcConfigurer corsConfigurer(){ return new WebMvcConfigurer(){ @Override public void addCorsMappings(CorsRegistry registry){ registry.addMapping(\u0026#34;/**\u0026#34;) .allowedOrigins(\u0026#34;*\u0026#34;) .allowedMethods(\u0026#34;POST\u0026#34;, \u0026#34;GET\u0026#34;, \u0026#34;PUT\u0026#34;, \u0026#34;OPTIONS\u0026#34;, \u0026#34;DELETE\u0026#34;) .allowCredentials(true) .maxAge(3600); } }; } } public class CorsRegistry { private final List\u0026lt;CorsRegistration\u0026gt; registrations = new ArrayList\u0026lt;\u0026gt;(); public CorsRegistration addMapping(String pathPattern) { CorsRegistration registration = new CorsRegistration(pathPattern); this.registrations.add(registration); return registration; } protected Map\u0026lt;String, CorsConfiguration\u0026gt; getCorsConfigurations() { Map\u0026lt;String, CorsConfiguration\u0026gt; configs = new LinkedHashMap\u0026lt;\u0026gt;(this.registrations.size()); for (CorsRegistration registration : this.registrations) { configs.put(registration.getPathPattern(), registration.getCorsConfiguration()); } return configs; } } public class CorsRegistration { //ä¼ å…¥çš„è·¯å¾„  private final String pathPattern; //é…ç½®ä¿¡æ¯å®ä½“ç±»  private final CorsConfiguration config; //æ„é€ æ–¹æ³•  public CorsRegistration(String pathPattern) { this.pathPattern = pathPattern; //åŸç”Ÿæ³¨é‡Šçœ‹åˆ°äº†ä¸€ä¸ª @CrossOrigin è¿™ä¸ªæ³¨è§£ï¼Œå¾…ä¼šçœ‹çœ‹æ˜¯ä»€ä¹ˆ  // Same implicit default values as the @CrossOrigin annotation + allows simple methods  this.config = new CorsConfiguration().applyPermitDefaultValues(); } //å…è®¸å“ªäº›æºç½‘ç«™è®¿é—®ï¼Œé»˜è®¤æ‰€æœ‰  public CorsRegistration allowedOrigins(String... origins) { this.config.setAllowedOrigins(Arrays.asList(origins)); return this; } //å…è®¸ä½•ç§æ–¹å¼è®¿é—®ï¼Œé»˜è®¤ç®€å•æ–¹å¼ï¼Œå³ï¼šGETï¼ŒHEADï¼ŒPOST  public CorsRegistration allowedMethods(String... methods) { this.config.setAllowedMethods(Arrays.asList(methods)); return this; } //è®¾ç½®è®¿é—®headerï¼Œé»˜è®¤æ‰€æœ‰  public CorsRegistration allowedHeaders(String... headers) { this.config.setAllowedHeaders(Arrays.asList(headers)); return this; } //è®¾ç½®response headersï¼Œé»˜è®¤æ²¡æœ‰ï¼ˆä»€ä¹ˆéƒ½ä¸è®¾ç½®ï¼‰  public CorsRegistration exposedHeaders(String... headers) { this.config.setExposedHeaders(Arrays.asList(headers)); return this; } //æ˜¯å¦æµè§ˆå™¨åº”è¯¥å‘é€credentialsï¼Œä¾‹å¦‚cookies Access-Control-Allow-Credentials  public CorsRegistration allowCredentials(boolean allowCredentials) { this.config.setAllowCredentials(allowCredentials); return this; } //è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤1800ç§’  public CorsRegistration maxAge(long maxAge) { this.config.setMaxAge(maxAge); return this; } protected String getPathPattern() { return this.pathPattern; } protected CorsConfiguration getCorsConfiguration() { return this.config; } } @Target({ ElementType.METHOD, ElementType.TYPE }) @Retention(RetentionPolicy.RUNTIME) @Documented public @interface CrossOrigin { /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated String[] DEFAULT_ORIGINS = { \u0026#34;*\u0026#34; }; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated String[] DEFAULT_ALLOWED_HEADERS = { \u0026#34;*\u0026#34; }; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated boolean DEFAULT_ALLOW_CREDENTIALS = false; /** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */ @Deprecated long DEFAULT_MAX_AGE = 1800 /** * Alias for {@link #origins}. */ @AliasFor(\u0026#34;origins\u0026#34;) String[] value() default {}; @AliasFor(\u0026#34;value\u0026#34;) String[] origins() default {}; String[] allowedHeaders() default {}; String[] exposedHeaders() default {}; RequestMethod[] methods() default {}; String allowCredentials() default \u0026#34;\u0026#34;; long maxAge() default -1; }   è¿™ä¸ªæ³¨è§£å¯ä»¥ä½œç”¨äºæ–¹æ³•æˆ–è€…ç±»ä¸Šï¼Œå®ç°å±€éƒ¨è·¨åŸŸï¼Œä½ ä¼šå‘ç°é™¤äº†è®¾ç½®è·¯å¾„ï¼ˆå› ä¸ºæ²¡å¿…è¦äº†ï¼Œéƒ½å®šä½åˆ°å±€éƒ¨äº†ï¼‰å…¶ä»–çš„å‚æ•°ä¸å…¨å±€ç±»ä¼¼ã€‚\nåœ¨Controllerä¸ŠåŠ å…¥@CrossOriginæ³¨è§£\nå±€éƒ¨é…ç½® å¯ä»¥çœ‹å‡ºCorsRegistryæœ‰ä¸ªå±æ€§registrations ï¼ŒæŒ‰é“ç†å¯ä»¥æ ¹æ®ä¸åŒçš„é¡¹ç›®è·¯å¾„è¿›è¡Œå®šåˆ¶è®¿é—®è¡Œä¸ºï¼Œä½†æ˜¯æˆ‘ä»¬ç¤ºä¾‹ç›´æ¥å°†pathPattern è®¾ç½®ä¸º/**ï¼Œä¹Ÿå°±æ˜¯è¯´å·²è¦†ç›–é¡¹ç›®æ‰€æœ‰è·¯å¾„ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªCorsRegistrationå°±å¥½ã€‚getCorsConfigurations(),è¿™ä¸ªæ–¹æ³•æ˜¯è·å–æ‰€æœ‰CorsConfigurationçš„Mapé›†åˆï¼Œkeyå€¼ä¸ºä¼ å…¥è·¯å¾„pathPatternã€‚ å›åˆ°ç¤ºä¾‹ä»£ç CorsConfigä¸­ï¼Œregistryå¯¹è±¡addMapping()å¢åŠ å®Œä¼ å…¥è·¯å¾„pathPatternä¹‹åï¼Œreturnäº†ä¸€ä¸ªCorsRegistrationå¯¹è±¡ï¼Œæ˜¯è¿›è¡Œæ›´å¤šçš„é…ç½®ï¼Œçœ‹ä¸€ä¸‹CorsRegistrationçš„ä»£ç ï¼Œçœ‹çœ‹æˆ‘ä»¬èƒ½é…äº›ä»€ä¹ˆï¼Ÿ\nCorsRegistryçš„æºç  é¦–å…ˆå®ç°äº†WebMvcConfigureræ¥å£ï¼ŒWebMvcConfigurerè¿™ä¸ªæ¥å£ååˆ†å¼ºå¤§ï¼Œé‡Œé¢è¿˜æœ‰å¾ˆå¤šå¯ç”¨çš„æ–¹æ³•ï¼Œåœ¨SpringBoot2.0é‡Œé¢å¯ä»¥è§£å†³WebMvcConfigurerAdapteræ›¾ç»çš„éƒ¨åˆ†ä»»åŠ¡ã€‚å…¶ä¸­ä¸€ä¸ªæ–¹æ³•å°±æ˜¯addCorsMappings()ï¼Œæ˜¯ä¸“é—¨ä¸ºå¼€å‘äººå‘˜è§£å†³è·¨åŸŸè€Œè¯ç”Ÿçš„æ¥å£ã€‚å…¶ä¸­æ„é€ å‚æ•°ä¸ºCorsRegistryã€‚\n","permalink":"https://haventong.github.io/post/springboot-cors/","summary":"Spring Boot-CORS ä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿ å®šä¹‰ï¼šæµè§ˆå™¨ä»ä¸€ä¸ªåŸŸåçš„ç½‘é¡µå–è¯·æ±‚å¦ä¸€ä¸ªåŸŸåä¸‹çš„ä¸œè¥¿ã€‚é€šä¿—ç‚¹è¯´ï¼Œæµè§ˆå™¨ç›´æ¥ä»AåŸŸè®¿é—®BåŸŸä¸­çš„èµ„æºæ˜¯ä¸è¢«å…è®¸çš„ï¼Œå¦‚æœæƒ³è¦è®¿é—®ï¼Œ","title":"SpringBoot CORS"},{"content":"C++-priority_queue C++ STL-priority_queue ç”¨æ³• priority_queueå­˜åœ¨äºå¤´æ–‡ä»¶\u0026lt;queue\u0026gt;ä¸­ï¼Œä»¥ä¸‹ä»£ç è§£é‡Šäº†è¯¥å®¹å™¨å¦‚ä½•ä½¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116  #include \u0026lt;cstdio\u0026gt;#include \u0026lt;cstdlib\u0026gt;#include \u0026lt;cstring\u0026gt;#include \u0026lt;iostream\u0026gt;#include \u0026lt;algorithm\u0026gt;#include \u0026lt;queue\u0026gt;#include \u0026lt;vector\u0026gt; using namespace std; struct Node{ int a,b; Node(){} Node(int aa,int bb):a(aa),b(bb){} // äºŒçº§æ’åºï¼Œaç›¸åŒæ—¶æŒ‰ç…§bå‡åºæ’åºï¼Œå¦åˆ™æŒ‰ç…§aå‡åºæ’åº  // (a,b): (1,1)\u0026lt;(1,2)\u0026lt;(2,1)\u0026lt;(2,2)  // è¿™é‡Œé‡è½½çš„å¤§äºå·å’Œå°äºå·åœ¨é€»è¾‘ä¸Šç­‰ä»·  bool operator \u0026lt; (const Node \u0026amp;r) const{ if(a==r.a) return b\u0026lt;r.b; else return a\u0026lt;r.a; } bool operator \u0026gt; (const Node \u0026amp;r) const{ if(a==r.a) return b\u0026gt;r.b; else return a\u0026gt;r.a; } }; int main(){ //priority_queue æ˜¯åŸºäºå †å®ç°çš„ä¼˜å…ˆé˜Ÿåˆ—  // .size()è¿”å›å½“å‰ä¼˜å…ˆé˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°  // empty()ä¸ºtrueè¡¨ç¤ºå½“å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œfalseè¡¨ç¤ºä¸ç©º  priority_queue\u0026lt;int\u0026gt; tmp_q; cout\u0026lt;\u0026lt;tmp_q.size()\u0026lt;\u0026lt;endl; //0  cout\u0026lt;\u0026lt;tmp_q.empty()\u0026lt;\u0026lt;endl; //1  tmp_q.push(1); cout\u0026lt;\u0026lt;tmp_q.size()\u0026lt;\u0026lt;endl; //1  cout\u0026lt;\u0026lt;tmp_q.empty()\u0026lt;\u0026lt;endl; //0  tmp_q.pop(); cout\u0026lt;\u0026lt;tmp_q.size()\u0026lt;\u0026lt;endl; //0  cout\u0026lt;\u0026lt;tmp_q.empty()\u0026lt;\u0026lt;endl; //1  // priority_queue\u0026lt;int\u0026gt; è¡¨ç¤ºé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ æ˜¯intç±»å‹ï¼ˆSTLæ¨¡æ¿ç±»ï¼‰  // é»˜è®¤priority_queueè¡¨ç¤ºé˜Ÿåˆ—æŒ‰ç…§lesså‡ºé˜Ÿ  // åå‡ºé˜Ÿçš„å…ƒç´ æ¯”å…ˆå‡ºé˜Ÿçš„å…ƒç´ è¦å°ï¼Œå‡ºé˜Ÿçš„å…ƒç´ è¶Šæ¥è¶Šå°ï¼Œæ‰€ä»¥æ˜¯less  // push åŠ å…¥å…ƒç´   // top è¿”å›é˜Ÿé¦–å…ƒç´   // pop é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿ  priority_queue\u0026lt;int\u0026gt; q; q.push(5); q.push(6); cout\u0026lt;\u0026lt;q.top()\u0026lt;\u0026lt;endl; //6  q.pop(); cout\u0026lt;\u0026lt;q.top()\u0026lt;\u0026lt;endl; //5  q.pop(); // greater è¡¨ç¤ºåå‡ºé˜Ÿçš„å…ƒç´ æ¯”å…ˆå‡ºé˜Ÿçš„å…ƒç´ è¦å¤§, å‡ºé˜Ÿçš„å…ƒç´ è¶Šæ¥è¶Šå¤§ï¼Œæ‰€ä»¥æ˜¯greater  priority_queue\u0026lt;int, vector\u0026lt;int\u0026gt;, greater\u0026lt;int\u0026gt;\u0026gt; q_greater; // \u0026lt;\u0026gt;ä¸­ç¬¬äºŒä¸ªå‚æ•°vector\u0026lt;int\u0026gt;è¡¨ç¤ºä¼˜å…ˆé˜Ÿåˆ—ä¸­ä½¿ç”¨vector\u0026lt;int\u0026gt; å­˜å‚¨å…ƒç´ ï¼Œå¯ä»¥æ›´æ¢æˆdeque  // ç¬¬äºŒä¸ªå‚æ•°ä¸­æ›´æ¢çš„å…¶ä»–ç±»å‹åº”æ”¯æŒ.begin(),.end(),.push(),.pop()ç­‰æ“ä½œ  // ç»å¤§å¤šæ•°æƒ…å†µéƒ½ä½¿ç”¨vector\u0026lt;\u0026gt;ï¼Œæå°‘éœ€è¦æ›´æ¢  // ä¾‹å­ï¼špriority_queue\u0026lt;int, deque\u0026lt;int\u0026gt;, greater\u0026lt;int\u0026gt;\u0026gt; q_greater;  q_greater.push(5); q_greater.push(6); cout\u0026lt;\u0026lt;q_greater.top()\u0026lt;\u0026lt;endl; //5  q_greater.pop(); cout\u0026lt;\u0026lt;q_greater.top()\u0026lt;\u0026lt;endl; //6  q_greater.pop(); // æ›´æ¢ä¸ºdoubleç±»å‹ï¼Œå‡ºé˜Ÿæ³•åˆ™æ˜¯less  priority_queue\u0026lt;double, vector\u0026lt;double\u0026gt;, less\u0026lt;double\u0026gt;\u0026gt; q_less; q_less.push(5.2); q_less.push(6.6); cout\u0026lt;\u0026lt;q_less.top()\u0026lt;\u0026lt;endl; //6.6  q_less.pop(); cout\u0026lt;\u0026lt;q_less.top()\u0026lt;\u0026lt;endl; //5.2  q_less.pop(); // è‡ªå®šä¹‰ç±»Nodeçš„priority_queue ä½¿ç”¨greateréœ€è¦å¯¹å…ƒç´ é‡è½½å¤§äºå·  priority_queue\u0026lt;Node, vector\u0026lt;Node\u0026gt;, greater\u0026lt;Node\u0026gt;\u0026gt; q_greater_node; q_greater_node.push(Node(1,1)); q_greater_node.push(Node(1,2)); q_greater_node.push(Node(2,1)); q_greater_node.push(Node(2,2)); cout\u0026lt;\u0026lt;q_greater_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_greater_node.top().b\u0026lt;\u0026lt;endl; // 1 1  q_greater_node.pop(); cout\u0026lt;\u0026lt;q_greater_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_greater_node.top().b\u0026lt;\u0026lt;endl; // 1 2  q_greater_node.pop(); cout\u0026lt;\u0026lt;q_greater_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_greater_node.top().b\u0026lt;\u0026lt;endl; // 2 1  q_greater_node.pop(); cout\u0026lt;\u0026lt;q_greater_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_greater_node.top().b\u0026lt;\u0026lt;endl; // 2 2  q_greater_node.pop(); // è‡ªå®šä¹‰ç±»Nodeçš„priority_queue ä½¿ç”¨lesséœ€è¦å¯¹å…ƒç´ é‡è½½å°äºå·  priority_queue\u0026lt;Node, vector\u0026lt;Node\u0026gt;, less\u0026lt;Node\u0026gt;\u0026gt; q_less_node; q_less_node.push(Node(1,1)); q_less_node.push(Node(1,2)); q_less_node.push(Node(2,1)); q_less_node.push(Node(2,2)); cout\u0026lt;\u0026lt;q_less_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_less_node.top().b\u0026lt;\u0026lt;endl; // 2 2  q_less_node.pop(); cout\u0026lt;\u0026lt;q_less_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_less_node.top().b\u0026lt;\u0026lt;endl; // 2 1  q_less_node.pop(); cout\u0026lt;\u0026lt;q_less_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_less_node.top().b\u0026lt;\u0026lt;endl; // 1 2  q_less_node.pop(); cout\u0026lt;\u0026lt;q_less_node.top().a\u0026lt;\u0026lt;\u0026#34; \u0026#34;\u0026lt;\u0026lt;q_less_node.top().b\u0026lt;\u0026lt;endl; // 1 1  q_less_node.pop(); return 0; }   ","permalink":"https://haventong.github.io/post/c++-priority-queue/","summary":"C++-priority_queue C++ STL-priority_queue ç”¨æ³• priority_queueå­˜åœ¨äºå¤´æ–‡ä»¶\u0026lt;queue\u0026gt;ä¸­ï¼Œä»¥ä¸‹ä»£ç è§£é‡Šäº†è¯¥å®¹å™¨å¦‚ä½•ä½¿ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16","title":"C++ Priority Queue"},{"content":"Spring Boot-Mybatis 1. ORMæ¡†æ¶é€‰å‹    å¯¹æ¯”é¡¹ SPRING DATA JPA MYBATIS     å•è¡¨æ“ä½œæ–¹å¼ åªéœ€ç»§æ‰¿ï¼Œä»£ç é‡è¾ƒå°‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚è€Œä¸”æ”¯æŒæ–¹æ³•åç”¨å…³é”®å­—ç”ŸæˆSQL å¯ä»¥ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä½†ç›¸å¯¹JPAå•è¡¨å¼±å¾ˆå¤šã€‚JPAå•è¡¨æ“ä½œéå¸¸ç®€å•   å¤šè¡¨å…³è”æŸ¥è¯¢ å‹å¥½ï¼ŒåŠ¨æ€SQLä½¿ç”¨ä¸å¤Ÿæ–¹ä¾¿ï¼Œè€Œä¸”SQLå’Œä»£ç è€¦åˆåˆ°ä¸€èµ· éå¸¸å‹å¥½ï¼Œå¯ä»¥æœ‰éå¸¸ç›´è§‚çš„åŠ¨æ€SQL   è‡ªå®šä¹‰SQL SQLå†™åœ¨æ³¨è§£é‡Œé¢ï¼Œå†™åŠ¨æ€SQLæœ‰äº›è´¹åŠ² SQLå¯ä»¥å†™åœ¨XMLé‡Œï¼Œç‹¬ç«‹ç®¡ç†ï¼ŒåŠ¨æ€SQLè¯­æ³•ä¹Ÿå®¹æ˜“ä¹¦å†™ç†è§£   å­¦ä¹ æˆæœ¬ ç•¥é«˜ è¾ƒä½ï¼Œä¼šå†™SQLå°±å¯ä»¥    JPAæ˜¯è§„èŒƒï¼ŒHibernateæ˜¯å®ç°\n Spring Data JPA å¯¹å¼€å‘äººå‘˜æ›´åŠ å‹å¥½ï¼Œå•è¡¨æ“ä½œéå¸¸æ–¹ä¾¿ï¼Œå¤šè¡¨å…³è”ä¹Ÿä¸éº»çƒ¦ mybatiså„æ–¹é¢éƒ½å¾ˆä¼˜ç§€ï¼Œä½¿ç”¨èŒƒå›´æ›´å¹¿ å¤§å‹é¡¹ç›®å»ºè®®mybatis  2. æ•´åˆMyBatisæ“ä½œæ•°æ®åº“  pom.xml  1 2 3 4 5 6 7 8 9 10  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.mybatis.spring.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mybatis-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;scope\u0026gt;runtime\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt;    mybatis-config.xml  1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34; ?\u0026gt; \u0026lt;!DOCTYPE configuration PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;!-- é…ç½®å…¨å±€å±æ€§--\u0026gt; \u0026lt;settings\u0026gt; \u0026lt;!-- ä½¿ç”¨Jdbcçš„getGeneratedKeysè·å–æ•°æ®åº“è‡ªå¢ä¸»é”®å€¼ --\u0026gt; \u0026lt;setting name=\u0026#34;useGeneratedKeys\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;!-- ä½¿ç”¨åˆ—è¡¨ç­¾æ›¿æ¢åˆ—åˆ«å --\u0026gt; \u0026lt;setting name=\u0026#34;useColumnLabel\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;!-- å¼€å¯é©¼å³°å‘½åè½¬æ¢: Table{create_time} -\u0026gt; Entity{createTime} --\u0026gt; \u0026lt;setting name=\u0026#34;mapUnderscoreToCamelCase\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;/settings\u0026gt; \u0026lt;/configuration\u0026gt;    åŒæ ·çš„å†…å®¹ä¹Ÿå¯ä»¥å†™åœ¨Spring Booté…ç½®æ–‡ä»¶application.ymlä¸­  1 2 3 4 5 6 7 8 9 10 11 12 13 14  spring:datasource:username:rootpassword:Thwf1858url:jdbc:mysql://localhost:3306/mybatisdriver-class-name:com.mysql.jdbc.Driverlogging:level:com.haven.mybatis.mapper:debugmybatis:configuration:map-underscore-to-camel-case:trueuse-generated-keys:trueuse-column-label:true   æ³¨è§£ä¹¦å†™SQL  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39  package com.hehe.mapper; @Mapper public interface UserMapper { /** * æ–¹å¼1ï¼šä½¿ç”¨æ³¨è§£ç¼–å†™SQLã€‚ */ @Select(\u0026#34;select * from t_user\u0026#34;) List\u0026lt;User\u0026gt; list(); /** * æ–¹å¼2ï¼šä½¿ç”¨æ³¨è§£æŒ‡å®šæŸä¸ªå·¥å…·ç±»çš„æ–¹æ³•æ¥åŠ¨æ€ç¼–å†™SQL. */ @SelectProvider(type = UserSqlProvider.class, method = \u0026#34;listByUsername\u0026#34;) List\u0026lt;User\u0026gt; listByUsername(String username); /** * å»¶ä¼¸ï¼šä¸Šè¿°ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥é™„åŠ @Resultsæ³¨è§£æ¥æŒ‡å®šç»“æœé›†çš„æ˜ å°„å…³ç³». * * PSï¼šå¦‚æœç¬¦åˆä¸‹åˆ’çº¿è½¬é©¼å³°çš„åŒ¹é…é¡¹å¯ä»¥ç›´æ¥çœç•¥ä¸å†™ã€‚ */ @Results({ @Result(property = \u0026#34;userId\u0026#34;, column = \u0026#34;USER_ID\u0026#34;), @Result(property = \u0026#34;username\u0026#34;, column = \u0026#34;USERNAME\u0026#34;), @Result(property = \u0026#34;password\u0026#34;, column = \u0026#34;PASSWORD\u0026#34;), @Result(property = \u0026#34;mobileNum\u0026#34;, column = \u0026#34;PHONE_NUM\u0026#34;) }) @Select(\u0026#34;select * from t_user\u0026#34;) List\u0026lt;User\u0026gt; listSample(); /** * å»¶ä¼¸ï¼šæ— è®ºä»€ä¹ˆæ–¹å¼,å¦‚æœæ¶‰åŠå¤šä¸ªå‚æ•°,åˆ™å¿…é¡»åŠ ä¸Š@Paramæ³¨è§£,å¦åˆ™æ— æ³•ä½¿ç”¨ELè¡¨è¾¾å¼è·å–å‚æ•°ã€‚ */ @Select(\u0026#34;select * from t_user where username like #{username} and password like #{password}\u0026#34;) User get(@Param(\u0026#34;username\u0026#34;) String username, @Param(\u0026#34;password\u0026#34;) String password); @SelectProvider(type = UserSqlProvider.class, method = \u0026#34;getBadUser\u0026#34;) User getBadUser(@Param(\u0026#34;username\u0026#34;) String username, @Param(\u0026#34;password\u0026#34;) String password); }     å¯ä»¥ä¼ å…¥å‚æ•°\n JavaBean Map å¤šä¸ªå‚æ•°ï¼Œéœ€è¦ç”¨@Paramæ³¨è§£    @Resultsæ³¨è§£\n1 2 3 4 5 6 7 8 9  @Select(\u0026#34;select t_id, t_age, t_name \u0026#34; + \u0026#34;from sys_user \u0026#34; + \u0026#34;where t_id = #{id} \u0026#34;) @Results(id=\u0026#34;userResults\u0026#34;, value={ @Result(property=\u0026#34;id\u0026#34;, column=\u0026#34;t_id\u0026#34;), @Result(property=\u0026#34;age\u0026#34;, column=\u0026#34;t_age\u0026#34;), @Result(property=\u0026#34;name\u0026#34;, column=\u0026#34;t_name\u0026#34;), }) User selectUserById(@Param(\u0026#34;id\u0026#34;) String id);   @Resultså¯ä»¥ç»™å‡ºä¸€ä¸ªidï¼Œå…¶ä»–æ–¹æ³•æ ¹æ®è¯¥idå¯ä»¥é€šè¿‡@ResultMapé‡å¤ä½¿ç”¨ï¼š\n1 2 3 4 5  @Select(\u0026#34;select t_id, t_age, t_name \u0026#34; + \u0026#34;from sys_user \u0026#34; + \u0026#34;where t_name = #{name} \u0026#34;) @ResultMap(\u0026#34;userResults\u0026#34;) User selectUserByName(@Param(\u0026#34;name\u0026#34;) String name);     ","permalink":"https://haventong.github.io/post/springboot-mybatis/","summary":"Spring Boot-Mybatis 1. ORMæ¡†æ¶é€‰å‹ å¯¹æ¯”é¡¹ SPRING DATA JPA MYBATIS å•è¡¨æ“ä½œæ–¹å¼ åªéœ€ç»§æ‰¿ï¼Œä»£ç é‡è¾ƒå°‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚è€Œä¸”æ”¯æŒæ–¹æ³•åç”¨å…³é”®å­—ç”ŸæˆSQL å¯ä»¥ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿","title":"SpringBoot MyBatis"},{"content":"Spring Boot \u0026amp; JDBC 1. Spring Bootæ•´åˆJDBCæ“ä½œæ•°æ®åº“ JDBCæ“ä½œæ•°æ®åº“æµç¨‹  åŠ è½½æ•°æ®åº“é©±åŠ¨ å»ºç«‹æ•°æ®åº“è¿æ¥ åˆ›å»ºæ•°æ®åº“æ“ä½œå¯¹è±¡ å®šä¹‰æ“ä½œçš„SQLè¯­å¥ æ‰§è¡Œæ•°æ®åº“æ“ä½œ è·å–å¹¶æ“ä½œç»“æœé›† å…³é—­å¯¹è±¡ï¼Œå›æ”¶èµ„æº  ä¸å»ºè®®ä½¿ç”¨JDBC\nå°†Spring JDBCæ•´åˆåˆ°Spring Boot  pom.xmlå¼•å…¥ä¾èµ–  1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jdbc --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-jdbc\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;8.0.16\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   ä¿®æ”¹application.yml  1 2 3 4 5 6  spring:datasource:url:jdbc:mysql://localhost:3306/jdbcusername:rootpassword:Thwf1858driver-class-name:com.mysql.jdbc.Driver  DAOå±‚ä»£ç     jdbcTemplate.updateé€‚ç”¨äºinsert, updateå’Œdeleteæ“ä½œ\n  jdbcTemplate.queryForObjectç”¨äºæŸ¥è¯¢å•æ¡è®°å½•å¹¶è¿”å›ç»“æœ\n  jdbcTemplate.queryç”¨äºæŸ¥è¯¢ç»“æœåˆ—è¡¨\n  BeanPropertyRowMapperå¯ä»¥å°†æ•°æ®åº“å­—æ®µçš„å€¼å‘æ•°æ®åº“æ˜ å°„ï¼Œæ»¡è¶³é©¼å³°æ ‡è¯†ä¹Ÿå¯ä»¥è‡ªåŠ¨æ˜ å°„\ne.x. æ•°æ®åº“create_timeæ˜ å°„åˆ°createTimeå±æ€§\n  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59  package com.haven.dao; import com.fasterxml.jackson.databind.BeanProperty; import com.haven.model.Article; import org.springframework.jdbc.core.BeanPropertyRowMapper; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.stereotype.Repository; import javax.annotation.Resource; import java.util.List; /** * @author HavenTong * @date 2019/10/30 10:39 ä¸‹åˆ */ @Repository // @Repositoryæ ‡æ³¨æŒä¹…å±‚ public class ArticleJDBCDAO { @Resource private JdbcTemplate jdbcTemplate; // ä¿å­˜æ–‡ç«   public void save(Article article){ jdbcTemplate.update(\u0026#34;INSERT INTO article(author, title, content, create_time) values (?,?,?,?)\u0026#34;, article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime()); } // åˆ é™¤æ–‡ç«   // ä¼ å‚å¯ä»¥ç”¨ new Object[]{}ä¼ ï¼Œä¹Ÿå¯ä»¥ä¸€ä¸ªä¸€ä¸ªè®¾ç½®  public void deleteById(int id){ jdbcTemplate.update(\u0026#34;DELETE FROM article WHERE id=?\u0026#34;, new Object[]{id}); } // æ›´æ–°æ–‡ç«   public void updateById(Article article){ jdbcTemplate.update(\u0026#34;UPDATE article SET author=?, title=?, content=?, create_time=? WHERE id=?\u0026#34;, article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime(), article.getId()); } // æ ¹æ®idæŸ¥æ‰¾æ–‡ç«   public Article findById(int id){ return (Article)jdbcTemplate.queryForObject(\u0026#34;SELECT * FROM article WHERE id = ?\u0026#34;, new Object[]{id}, new BeanPropertyRowMapper(Article.class)); } // æŸ¥è¯¢æ‰€æœ‰  public List\u0026lt;Article\u0026gt; findAll(){ return (List\u0026lt;Article\u0026gt;) jdbcTemplate.query(\u0026#34;SELECT * FROM article\u0026#34;, new BeanPropertyRowMapper(Article.class)); } }   2. JDBCå¤šæ•°æ®æº (1) application.ymlé…ç½®ä¸¤ä¸ªæ•°æ®æºï¼Œç¬¬ä¸€ä¸ªå«primary, ç¬¬äºŒä¸ªå«secondar,ä¹Ÿå¯ä»¥è‡ªå·±å–å:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  server:port:8080spring:jackson:date-format:yyyy-MM-dd HH:mm:sstime-zone:GMT+8datasource:primary:jdbc-url:jdbc:mysql://localhost:3306/jdbcusername:rootpassword:Thwf1858driver-class-name:com.mysql.jdbc.Driversecondary:jdbc-url:jdbc:mysql://localhost:3306/testusername:rootpassword:Thwf1858driver-class-name:com.mysql.jdbc.Driver  (2) é€šè¿‡Java Configå°†æ•°æ®æºæ³¨å…¥åˆ°Springä¸Šä¸‹æ–‡\nprimaryJdbcTemplateä½¿ç”¨primaryDataSourceæ•°æ®æºæ“ä½œæ•°æ®åº“jdbc\nsecondaryJdbcTemplateä½¿ç”¨secondaryDataSourceæ•°æ®æºæ“ä½œæ•°æ®åº“test\nDataSourceConfig.java\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46  package com.haven.config; import org.springframework.beans.factory.annotation.Qualifier; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.boot.jdbc.DataSourceBuilder; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.context.annotation.Primary; import org.springframework.jdbc.core.JdbcTemplate; import javax.sql.DataSource; import javax.xml.crypto.Data; /** * @author HavenTong * @date 2019/10/31 12:08 ä¸Šåˆ */ @Configuration public class DataSourceConfig { @Primary @Bean(name = \u0026#34;primaryDataSource\u0026#34;) @Qualifier(\u0026#34;primaryDataSource\u0026#34;) @ConfigurationProperties(prefix = \u0026#34;spring.datasource.primary\u0026#34;) public DataSource primaryDataSource(){ return DataSourceBuilder.create().build(); } @Bean(name = \u0026#34;secondaryDataSource\u0026#34;) @Qualifier(\u0026#34;secondaryDataSource\u0026#34;) @ConfigurationProperties(prefix = \u0026#34;spring.datasource.secondary\u0026#34;) public DataSource secondaryDataSource(){ return DataSourceBuilder.create().build(); } @Bean(name = \u0026#34;primaryJdbcTemplate\u0026#34;) public JdbcTemplate primaryJdbcTemplate( @Qualifier(\u0026#34;primaryDataSource\u0026#34;) DataSource dataSource ){ return new JdbcTemplate(dataSource); } @Bean(name = \u0026#34;secondaryJdbcTemplate\u0026#34;) public JdbcTemplate secondaryTemplate( @Qualifier(\u0026#34;secondaryDataSource\u0026#34;) DataSource dataSource){ return new JdbcTemplate(dataSource); } }   (3) ä¹‹åä¿®æ”¹daoå±‚ä»£ç :\nArticleJDBCDAO.java\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56  package com.haven.dao; import com.fasterxml.jackson.databind.BeanProperty; import com.haven.model.Article; import org.springframework.jdbc.core.BeanPropertyRowMapper; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.stereotype.Repository; import javax.annotation.Resource; import java.util.List; /** * @author HavenTong * @date 2019/10/30 10:39 ä¸‹åˆ */ @Repository public class ArticleJDBCDAO { // ä¿å­˜æ–‡ç«   public void save(Article article, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\u0026#34;INSERT INTO article(author, title, content, create_time) values (?,?,?,?)\u0026#34;, article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime()); } // åˆ é™¤æ–‡ç«   public void deleteById(int id, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\u0026#34;DELETE FROM article WHERE id=?\u0026#34;, new Object[]{id}); } // æ›´æ–°æ–‡ç«   public void updateById(Article article, JdbcTemplate jdbcTemplate){ jdbcTemplate.update(\u0026#34;UPDATE article SET author=?, title=?, content=?, create_time=? WHERE id=?\u0026#34;, article.getAuthor(), article.getTitle(), article.getContent(), article.getCreateTime(), article.getId()); } // æ ¹æ®idæŸ¥æ‰¾æ–‡ç«   public Article findById(int id, JdbcTemplate jdbcTemplate){ return (Article)jdbcTemplate.queryForObject(\u0026#34;SELECT * FROM article WHERE id = ?\u0026#34;, new Object[]{id}, new BeanPropertyRowMapper(Article.class)); } // æŸ¥è¯¢æ‰€æœ‰  public List\u0026lt;Article\u0026gt; findAll(JdbcTemplate jdbcTemplate){ return (List\u0026lt;Article\u0026gt;) jdbcTemplate.query(\u0026#34;SELECT * FROM article\u0026#34;, new BeanPropertyRowMapper(Article.class)); } }   (4) ä¿®æ”¹serviceå±‚ä»£ç \nArticleRestJDBCServiceImpl.java\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59  package com.haven.service; import com.haven.dao.ArticleJDBCDAO; import com.haven.model.Article; import lombok.extern.slf4j.Slf4j; import org.springframework.jdbc.core.JdbcTemplate; import org.springframework.stereotype.Service; import org.springframework.transaction.annotation.Transactional; import javax.annotation.Resource; import java.util.List; /** * @author HavenTong * @date 2019/10/30 10:56 ä¸‹åˆ */ @Slf4j @Service public class ArticleRestJDBCServiceImpl implements ArticleRestService { @Resource ArticleJDBCDAO articleJDBCDAO; @Resource JdbcTemplate primaryJdbcTemplate; @Resource JdbcTemplate secondaryJdbcTemplate; @Transactional @Override public Article saveArticle(Article article) { articleJDBCDAO.save(article, primaryJdbcTemplate); articleJDBCDAO.save(article, secondaryJdbcTemplate); return article; } @Override public void deleteArticle(int id) { articleJDBCDAO.deleteById(id, primaryJdbcTemplate); articleJDBCDAO.deleteById(id, secondaryJdbcTemplate); } @Override public void updateArticle(Article article) { articleJDBCDAO.updateById(article, primaryJdbcTemplate); } @Override public Article getArticle(int id) { return articleJDBCDAO.findById(id, primaryJdbcTemplate); } @Override public List\u0026lt;Article\u0026gt; getAll() { return articleJDBCDAO.findAll(primaryJdbcTemplate); } }   3. Spring JDBC JTAå®ç°åˆ†å¸ƒå¼äº‹åŠ¡ @Transactionalæ— æ³•è·¨åº“å®Œæˆåˆ†å¸ƒå¼äº‹åŠ¡\né€šè¿‡æ•´åˆJTAå®ç°åˆ†å¸ƒå¼äº‹åŠ¡  å¼•å…¥mavenä¾èµ–  1 2 3 4 5 6  \u0026lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-jta-atomikos --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-jta-atomikos\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.2.0.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;    ä¿®æ”¹application.ymlé…ç½®æ–‡ä»¶  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  primarydb:uniqueResourceName:primaryxaDataSourceClassName:com.mysql.jdbc.jdbc2.optional.MysqlXADataSourcexaProperties:url:jdbc:mysql://localhost:3306/jdbcuser:rootpassword:Thwf1858exclusiveConnectionMode:trueminPoolSize:3maxPoolSize:10testQuery:SELECT 1 FROM dualsecondarydb:uniqueResourceName:secondaryxaDataSourceClassName:com.mysql.jdbc.jdbc2.optional.MysqlXADataSourcexaProperties:url:jdbc:mysql://localhost:3306/testuser:rootpassword:Thwf1858exclusiveConnectionMode:trueminPoolSize:3maxPoolSize:10testQuery:SELECT 1 FROM dual   ç¼–å†™é…ç½®ç±»DataSourceConfig.java  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  package com.haven.config; import com.atomikos.jdbc.AtomikosDataSourceBean; import org.springframework.beans.factory.annotation.Qualifier; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.boot.jdbc.DataSourceBuilder; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.context.annotation.Primary; import org.springframework.jdbc.core.JdbcTemplate; import javax.sql.DataSource; import javax.xml.crypto.Data; /** * @author HavenTong * @date 2019/10/31 12:08 ä¸Šåˆ */ @Configuration public class DataSourceConfig { // å¤šæ•°æ®æºï¼Œåˆ†å¸ƒå¼  @Bean(initMethod = \u0026#34;init\u0026#34;, destroyMethod = \u0026#34;close\u0026#34;, name = \u0026#34;primaryDataSource\u0026#34;) @Primary @ConfigurationProperties(prefix = \u0026#34;primarydb\u0026#34;) public DataSource primaryDataSource(){ return new AtomikosDataSourceBean(); } @Bean(initMethod = \u0026#34;init\u0026#34;, destroyMethod = \u0026#34;close\u0026#34;, name = \u0026#34;secondaryDataSource\u0026#34;) @ConfigurationProperties(prefix = \u0026#34;secondarydb\u0026#34;) public DataSource secondaryDataSource(){ return new AtomikosDataSourceBean(); } @Bean public JdbcTemplate primaryJdbcTemplate(@Qualifier(\u0026#34;primaryDataSource\u0026#34;) DataSource primaryDataSource){ return new JdbcTemplate(primaryDataSource); } @Bean public JdbcTemplate secondaryJdbcTemplate(@Qualifier(\u0026#34;secondaryDataSource\u0026#34;) DataSource secondaryDataSource){ return new JdbcTemplate(secondaryDataSource); } }    é…ç½®äº‹åŠ¡ç®¡ç†å™¨(TM) TransactionManagerConfig.java  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43  package com.haven.config; import com.atomikos.icatch.jta.UserTransactionImp; import com.atomikos.icatch.jta.UserTransactionManager; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.context.annotation.DependsOn; import org.springframework.transaction.PlatformTransactionManager; import org.springframework.transaction.jta.JtaTransactionManager; import javax.transaction.SystemException; import javax.transaction.TransactionManager; import javax.transaction.UserTransaction; /** * @author HavenTong * @date 2019/10/31 3:57 ä¸‹åˆ */ @Configuration public class TransactionManagerConfig { @Bean public UserTransaction userTransaction() throws SystemException { UserTransactionImp userTransactionImp = new UserTransactionImp(); userTransactionImp.setTransactionTimeout(10000); return userTransactionImp; } @Bean(name = \u0026#34;atomikosTransactionManager\u0026#34;, initMethod = \u0026#34;init\u0026#34;, destroyMethod = \u0026#34;close\u0026#34;) public TransactionManager atomikosTransactionManager() throws Throwable{ UserTransactionManager userTransactionManager = new UserTransactionManager(); userTransactionManager.setForceShutdown(false); return userTransactionManager; } @Bean(name = \u0026#34;transactionManager\u0026#34;) @DependsOn({\u0026#34;userTransaction\u0026#34;, \u0026#34;atomikosTransactionManger\u0026#34;}) public PlatformTransactionManager transactionManager() throws Throwable{ UserTransaction userTransaction = userTransaction(); JtaTransactionManager manager = new JtaTransactionManager(userTransaction, atomikosTransactionManager()); return manager; } }   ","permalink":"https://haventong.github.io/post/springboot-jdbc/","summary":"Spring Boot \u0026amp; JDBC 1. Spring Bootæ•´åˆJDBCæ“ä½œæ•°æ®åº“ JDBCæ“ä½œæ•°æ®åº“æµç¨‹ åŠ è½½æ•°æ®åº“é©±åŠ¨ å»ºç«‹æ•°æ®åº“è¿æ¥ åˆ›å»ºæ•°æ®åº“æ“ä½œå¯¹è±¡ å®šä¹‰æ“ä½œçš„SQLè¯­å¥ æ‰§è¡Œæ•°æ®åº“","title":"SpringBoot JDBC"},{"content":"Spring Boot Beanè‡ªåŠ¨è£…é… 1. å…¨å±€é…ç½®æ–‡ä»¶ ä¿®æ”¹Spring Bootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼ŒSpring Bootåœ¨åº•å±‚è‡ªåŠ¨åŠ è½½\n application.yml application.properties  2. Beanè‡ªåŠ¨è£…é…åŸç† (1) Spring Bootå¯åŠ¨æ—¶åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½@EnableAutoConfiguration\n(2) @EnableAutoConfiguration\nâ€‹\tä½œç”¨ï¼š å°†ç±»è·¯å¾„ä¸‹META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼(è‡ªåŠ¨è£…é…ç±»)åŠ å…¥åˆ°æ‰§è¡Œè®¡åˆ’ä¸­\n(3) æ¯ä¸€ä¸ªè‡ªåŠ¨è£…é…ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½\n3. YAMLè§„åˆ™ (1) åŒå¼•å·\nâ€‹\tä¸ä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æˆ–ä½œä¸ºæœ¬èº«æƒ³è¦è¡¨è¾¾çš„æ„æ€\nâ€‹\tname: \u0026quot;zhangsan \\n lisi\u0026quot; è¾“å‡º zhangsan æ¢è¡Œ lisi\nâ€‹\tå•å¼•å·\nâ€‹\tä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®ï¼Œå¦‚ï¼š\nâ€‹\tname: 'zhangsan \\n lisi' è¾“å‡º zhangsan \\n lisi\n(2) æ”¯æŒæ¾æ•£çš„ç»“æ„\nâ€‹\tfamily-name = familyName = family_name\n(3) å ä½ç¬¦\n1 2 3 4 5 6  ${random.value}${random.int}${random.long}${random.int(10)}${random.int[1024, 65536]}${xxxx.yyyy: é»˜è®¤å€¼}  4. è·å–è‡ªå®šä¹‰é…ç½® (1) @Value(\u0026quot;${}\u0026quot;)\nâ€‹\tå®ç°äº†å•ä¸ªå±æ€§çš„æ³¨å…¥\n(2) å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨@ConfigurationPropertiesè·å–é…ç½®å€¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  package com.haven.model.yaml; import lombok.Data; import org.springframework.beans.factory.annotation.Value; import org.springframework.boot.context.properties.ConfigurationProperties; import org.springframework.stereotype.Component; /** * @author HavenTong * @date 2019/10/29 5:44 ä¸‹åˆ */ @Data @Component @ConfigurationProperties(prefix = \u0026#34;family\u0026#34;) public class Family { // @Value(\u0026#34;${family.family-name}\u0026#34;)  private String familyName; private Father father; private Mother mother; private Child child; }   (3) ä¸¤ç§æ³¨è§£åŒºåˆ«\n    @ConfigurationProperties @Value     åŠŸèƒ½ æ‰¹é‡æ³¨å…¥å±æ€§ ä¸€ä¸ªä¸ªæŒ‡å®š   æ¾æ•£è¯­æ³•ç»‘å®š æ”¯æŒ ä¸æ”¯æŒ   SpEL ä¸æ”¯æŒ æ”¯æŒ   å¤æ‚æ•°æ®ç±»å‹åµŒå¥— æ”¯æŒ ä¸æ”¯æŒ   JSR303æ•°æ®æ ¡éªŒ æ”¯æŒ ä¸æ”¯æŒ    5. é…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ (1) åœ¨éœ€è¦æ ¡éªŒçš„å±æ€§è£…é…ç±»ä¸ŠåŠ @Validatedæ³¨è§£\n(2) æ•°æ®æ ¡éªŒæ³¨è§£åˆ—è¡¨\n(3) è‹¥éªŒè¯å¤±è´¥ï¼Œä¼šå‡ºç°BindValidationExceptionå¼‚å¸¸\n6. Profileä¸åŒç¯å¢ƒä¸‹ä¸åŒé…ç½® ä¼˜å…ˆçº§ï¼š å¤–éƒ¨å¤§äºå†…éƒ¨ï¼Œç‰¹æŒ‡å¤§äºæ³›æŒ‡\n application.yml å…¨å±€é…ç½®æ–‡ä»¶ application-dev.yml å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶ application-test.yml æµ‹è¯•ç¯å¢ƒé…ç½®æ–‡ä»¶ Application-prod.yml ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶  (1) é…ç½®application.yml\nè®¾ç½®spring.profiles.activeæŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚\nä¼˜å…ˆçº§ä»¥ä¸‹é¢çš„dev/test/prod ymlä¸ºä¼˜å…ˆ\n1 2 3  spring:profiles:active:dev  (2) é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨\n1  java -jar SpringBoot01HelloWorld-1.0-SNAPSHOT.jar --spring.profiles.active=dev   (3) IDEAè®¾ç½®Program Arguments\nâ€‹\t(a) Edit Configuration \u0026ndash;\u0026gt; Environment \u0026ndash;\u0026gt; Program Argument\n1  --spring.profiles.active=dev   â€‹\t(b) Edit Configuration \u0026ndash;\u0026gt; Environment \u0026ndash;\u0026gt; VM options\n1  -Dspring.profiles.active=dev   7. é¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶åŠ è½½ä½ç½® spring bootä¼šæ‰«æä»¥ä¸‹ä½ç½®çš„application.properties / application.ymlæ–‡ä»¶ä½œä¸ºspring bootçš„é»˜è®¤é…ç½®æ–‡ä»¶\n1 2 3 4  -file:./config/ -file:./ -classpath:/config/ -classpath:./   ä»¥ä¸Šä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œæ‰€æœ‰ä½ç½®çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼›é«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§\n8. é…ç½®æ–‡ä»¶æ•æ„Ÿå­—æ®µåŠ å¯† (1) ä¸spring bootæ•´åˆ\n1 2 3 4 5 6  \u0026lt;!-- https://mvnrepository.com/artifact/com.github.ulisesbocchio/jasypt-spring-boot-starter --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.github.ulisesbocchio\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;jasypt-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.18\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   (2) éœ€è¦åŠ å¯†çš„åœ°æ–¹ï¼Œä½¿ç”¨ENC()è¿›è¡ŒåŒ…è£¹å¤„ç†\n(3) åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¯†é’¥\n","permalink":"https://haventong.github.io/post/springboot-bean%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D/","summary":"Spring Boot Beanè‡ªåŠ¨è£…é… 1. å…¨å±€é…ç½®æ–‡ä»¶ ä¿®æ”¹Spring Bootè‡ªåŠ¨é…ç½®çš„é»˜è®¤å€¼ï¼ŒSpring Bootåœ¨åº•å±‚è‡ªåŠ¨åŠ è½½ application.yml application.properties 2. Beanè‡ªåŠ¨è£…é…åŸç† (1) Spring","title":"SpringBoot Beanè‡ªåŠ¨è£…é…"},{"content":"SpringBoot RESTfulæ¥å£ 1.å¸¸ç”¨æ³¨è§£å¼€å‘RESTfulæ¥å£   @RestController\n å°†æ³¨è§£çš„ç±»æ³¨å…¥åˆ°Springçš„ç¯å¢ƒ ç›¸å½“äº@Controller + @ResponseBody JSONæ ¼å¼çš„æ•°æ®å“åº”    @RequestMapping\n ç±»ä¸Šçš„æ³¨è§£è¡¨ç¤ºæ³¨è§£çš„Controllerç±»çš„è·¯å¾„    @PathVariable\n è·¯å¾„ä¸Šçš„å˜é‡    @PathVariable \u0026amp; RequestParam\n @PathVariableç”¨äºæ¥æ”¶URLä¸Šçš„{å‚æ•°} @RequestParamç”¨äºæ¥æ”¶æ™®é€šæ–¹å¼æä¾›çš„å‚æ•°    @RequestBody \u0026amp; @RequestParam\n  JSONæ•°æ®å»ºè®®ç”¨@RequestBody,ä¼šåˆ†é…å®ä½“ç±»ä¸­çš„æ‰€æœ‰å±æ€§\n  @RequestParamé€‚åˆæ¥æ”¶å•ä¸ªçš„å‚æ•°\n  @RequestBodyå¯ä»¥æ¥æ”¶åµŒå¥—çš„æ•°æ®ç»“æ„\n    2.JSONæ•°æ®å¤„ç†å’ŒPostmanæµ‹è¯• Spring Booté»˜è®¤ä½¿ç”¨Jackson\n(1) å¸¸ç”¨æ³¨è§£   @JsonIgnoreï¼šåŠ åœ¨å±æ€§ä¸Šè¡¨ç¤ºåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­å°†å®ƒå¿½ç•¥\n  @JsonPropertyï¼šä¸ºå±æ€§èµ·åˆ«å\n  @JsonPropertyOrderï¼šåŠ åœ¨ç±»ä¸Š\n  @JsonInclude(JsonInclude.Include.NON_NULL): å½“å±æ€§ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œè¿›è¡Œåºåˆ—åŒ–ï¼›å¦åˆ™ä¸è¿›è¡Œ\n  @JsonFormat(pattern = \u0026quot;\u0026quot;, timezone = \u0026quot;\u0026quot;)ï¼šé…ç½®æ—¶é—´æ ¼å¼\n1 2 3 4  spring:jackson:date-format:yyyy-MM-dd HH:mm:sstime-zone:GMT+8    (2) åºåˆ—åŒ–ä¸ååºåˆ—åŒ– æŠŠå¯¹è±¡è½¬æˆå¯ä¼ è¾“ã€å¯å­˜å‚¨çš„æ ¼å¼(json, xml, äºŒè¿›åˆ¶ï¼Œç”šè‡³è‡ªå®šä¹‰çš„æ ¼å¼)å«åºåˆ—åŒ–ï¼Œååºåˆ—åŒ–ä¸ºé€†è¿‡ç¨‹\n3. Postmanä½¿ç”¨ 4. ä½¿ç”¨Swagger 2å‘å¸ƒAPIæ–‡æ¡£  ä»£ç å˜ï¼Œæ–‡æ¡£å˜ï¼Œåªéœ€è¦å°‘é‡çš„æ³¨è§£ï¼Œä½¿ç”¨Swaggerå°±å¯ä»¥æ ¹æ®ä»£ç è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œå¾ˆå¥½åœ°ä¿æŒäº†æ–‡æ¡£çš„åŠæ—¶æ€§ è·¨è¯­è¨€æ€§ï¼Œæ”¯æŒ40å¤šç§è¯­è¨€ Swagge UIå‘ˆç°å‡ºä¸€ä»½å¯äº¤äº’å¼çš„APIæ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é¡µé¢å°è¯•APIçš„è°ƒç”¨ï¼Œçœå»äº†å‡†å¤‡å¤æ‚çš„  è°ƒç”¨å‚æ•°çš„è¿‡ç¨‹\n è¿˜å¯ä»¥å°†æ–‡æ¡£è§„èŒƒå¯¼å…¥ç›¸å…³çš„å·¥å…·(e.x. SoapUI)ï¼Œè¿™äº›å·¥å…·ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºè‡ªåŠ¨åŒ–çš„æµ‹è¯•  æ•´åˆSwagger 2 pom.xml\n1 2 3 4 5 6 7 8 9 10 11  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.springfox\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springfox-swagger2\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.springfox\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;springfox-swagger-ui\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.6.1\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  // config/Swagger2.java package com.haven.config; import org.springframework.beans.factory.annotation.Configurable; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.w3c.dom.DocumentType; import springfox.documentation.builders.ApiInfoBuilder; import springfox.documentation.builders.PathSelectors; import springfox.documentation.builders.RequestHandlerSelectors; import springfox.documentation.service.ApiInfo; import springfox.documentation.spi.DocumentationType; import springfox.documentation.spring.web.plugins.Docket; import springfox.documentation.swagger2.annotations.EnableSwagger2; /** * @author HavenTong * @date 2019/10/29 3:26 ä¸‹åˆ */ @Configuration @EnableSwagger2 public class Swagger2 { @Bean public Docket createRestApi(){ return new Docket(DocumentationType.SWAGGER_2) .apiInfo(apiInfo()) .select() .apis(RequestHandlerSelectors.basePackage(\u0026#34;com.haven\u0026#34;)) .paths(PathSelectors.regex(\u0026#34;/rest/.*\u0026#34;)) .build(); } private ApiInfo apiInfo(){ return new ApiInfoBuilder() .title(\u0026#34;springbootåˆ©ç”¨swaggeræ„å»ºapiæ–‡æ¡£\u0026#34;) .description(\u0026#34;ç®€å•ä¼˜é›…çš„restfuné£æ ¼\u0026#34;) .termsOfServiceUrl(\u0026#34;http://www.zimug.com\u0026#34;) .version(\u0026#34;1.0\u0026#34;) .build(); } }   ä¹‹åå¯åŠ¨é¡¹ç›®ï¼Œé€šè¿‡http://localhost:8080/swagger-ui.htmlå³å¯è®¿é—®swagger-ui\nå¯ä»¥åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ›´è¯¦ç»†çš„æ³¨è§£ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13  @ApiOperation(value = \u0026#34;æ·»åŠ æ–‡ç« \u0026#34;, notes = \u0026#34;æ·»åŠ æ–°çš„æ–‡ç« \u0026#34;, tags = \u0026#34;Article\u0026#34;, httpMethod = \u0026#34;POST\u0026#34;) // @ApiImplicitParams({ // @ApiImplicitParam(name = \u0026#34;title\u0026#34;, value = \u0026#34;æ–‡ç« æ ‡é¢˜\u0026#34;, required = true, dataType = \u0026#34;String\u0026#34;), // @ApiImplicitParam(name = \u0026#34;content\u0026#34;, value = \u0026#34;æ–‡ç« å†…å®¹\u0026#34;, required = true, dataType = \u0026#34;String\u0026#34;), // @ApiImplicitParam(name = \u0026#34;author\u0026#34;, value = \u0026#34;æ–‡ç« ä½œè€…\u0026#34;, required = true, dataType = \u0026#34;String\u0026#34;) // })  @ApiResponses({ @ApiResponse(code = 200, message = \u0026#34;æˆåŠŸ\u0026#34;, response = AjaxResponse.class), @ApiResponse(code = 400, message = \u0026#34;ç”¨æˆ·è¾“å…¥é”™è¯¯\u0026#34;, response = AjaxResponse.class), @ApiResponse(code = 500, message = \u0026#34;ç³»ç»Ÿå†…éƒ¨é”™è¯¯\u0026#34;, response = AjaxResponse.class) }) @RequestMapping(value = \u0026#34;/article\u0026#34;, method = RequestMethod.POST, produces = \u0026#34;application/json\u0026#34;) public AjaxResponse saveArticle(@RequestBody Article article){    ç”±äºé‡‡ç”¨@RequestBodyå»æ¥æ”¶å‚æ•°ï¼Œè¿™é‡Œå°±ä¸éœ€è¦ä½¿ç”¨@ApiImplicitParamæ³¨è§£ï¼Œ@ApiImplicitParamæ³¨è§£ä¸@RequestParamæ³¨è§£æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ å»ºè®®æœ‰Swagger 2çš„æƒ…å†µä¸‹ï¼Œå‡å°‘ä¸æ­¤å¯¹åº”çš„ä»£ç æ³¨é‡Šæˆ–ä¸å†™  Swagger 2å¸¸ç”¨æ³¨è§£   @Apiï¼šç”¨åœ¨è¯·æ±‚çš„ç±»ä¸Šï¼Œè¡¨ç¤ºå¯¹ç±»çš„è¯´æ˜\nâ€‹\ttags=\u0026ldquo;è¯´æ˜è¯¥ç±»çš„ä½œç”¨ï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šçœ‹åˆ°çš„æ³¨è§£\u0026rdquo;\nâ€‹\tvalue=\u0026ldquo;è¯¥å‚æ•°æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œåœ¨UIç•Œé¢ä¸Šä¹Ÿèƒ½çœ‹åˆ°ï¼Œæ‰€ä»¥ä¸éœ€è¦é…ç½®\u0026rdquo;\n  @ApiOperation: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¯´æ˜æ–¹æ³•çš„ç”¨é€”ã€ä½œç”¨\nâ€‹\tvalue=\u0026ldquo;è¯´æ˜æ–¹æ³•çš„ç”¨é€”ï¼Œä½œç”¨\u0026rdquo;\nâ€‹\tnotes=\u0026ldquo;æ–¹æ³•çš„å¤‡æ³¨è¯´æ˜\u0026rdquo;\n  @ApiImplicitParams: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å‚æ•°è¯´æ˜\nâ€‹\t@ApiImplicitParam: ç”¨åœ¨@ApiImplicitParamsæ³¨è§£ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªè¯·æ±‚å‚æ•°çš„å„ä¸ªæ–¹é¢\nâ€‹\tname=\u0026ldquo;å‚æ•°å\u0026rdquo;\nâ€‹\tvalue=\u0026ldquo;å‚æ•°çš„æ±‰å­—è¯´æ˜ï¼Œè§£é‡Š\u0026rdquo;\nâ€‹\trequired=\u0026ldquo;å‚æ•°æ˜¯å¦å¿…é¡»è¦ä¼ \u0026rdquo;\nâ€‹\tparamType=\u0026ldquo;å‚æ•°æ”¾åœ¨å“ªä¸ªåœ°æ–¹\u0026rdquo;\nâ€‹\t- header \u0026ndash;\u0026gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestHeader\nâ€‹\t- query \u0026ndash;\u0026gt; è¯·æ±‚å‚æ•°çš„è·å–ï¼š@RequestParam\nâ€‹\t- path(ç”¨äºrestfulæ¥å£) \u0026ndash;\u0026gt; è¯·æ±‚å‚æ•°çš„è·å–: @PathVariable\nâ€‹\t- body,formä¸å¸¸ç”¨\nâ€‹\tdataType= \u0026ldquo;å‚æ•°ç±»å‹\u0026rdquo;ï¼Œé»˜è®¤String, å…¶ä»–å€¼dataType=\u0026quot;Integer\u0026quot;\nâ€‹\tdefaultValue= \u0026ldquo;å‚æ•°çš„é»˜è®¤å€¼\u0026rdquo;\n  @ApiResponses: ç”¨åœ¨è¯·æ±‚çš„æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºä¸€ç»„å“åº”\nâ€‹\t@ApiResponse: ç”¨åœ¨@ApiResponsesä¸­ï¼Œä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ä¸ªé”™è¯¯çš„å“åº”ä¿¡æ¯\nâ€‹\tcode= æ•°å­—ï¼Œe.x. 400\nâ€‹\tmessage= ä¿¡æ¯ï¼Œä¾‹å¦‚\u0026quot;è¯·æ±‚å‚æ•°æ²¡å¡«å¥½\u0026quot;\nâ€‹\tresponse= æŠ›å‡ºå¼‚å¸¸çš„ç±»\n  @ApiModel: ç”¨äºå“åº”ç±»ä¸Šï¼Œè¡¨ç¤ºä¸€ä¸ªè¿”å›å“åº”æ•°æ®çš„ä¿¡æ¯ã€‚(è¿™ç§ä¸€èˆ¬ç”¨åœ¨poståˆ›å»ºçš„æ—¶å€™, ä½¿ç”¨@RequestBodyçš„åœºæ™¯ï¼Œè¯·æ±‚å‚æ•°æ— æ³•ä½¿ç”¨@ApiImplicitParamæ³¨è§£è¿›è¡Œæè¿°çš„æ—¶å€™)\nâ€‹\t@ApiModelProperty: ç”¨åœ¨å±æ€§ä¸Šï¼Œæè¿°å“åº”ç±»çš„å±æ€§\nâ€‹\nâ€‹\n  ","permalink":"https://haventong.github.io/post/springboot-restful%E6%8E%A5%E5%8F%A3/","summary":"SpringBoot RESTfulæ¥å£ 1.å¸¸ç”¨æ³¨è§£å¼€å‘RESTfulæ¥å£ @RestController å°†æ³¨è§£çš„ç±»æ³¨å…¥åˆ°Springçš„ç¯å¢ƒ ç›¸å½“äº@Controller + @ResponseBody JSONæ ¼å¼çš„æ•°æ®","title":"SpringBoot Restfulæ¥å£"},{"content":"SpringBoot with IDEA æ’ä»¶ lombok\n  IDEAä¸­ä¸‹è½½å\n  åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–\n1 2 3 4 5  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt;     å¸¸ç”¨æ³¨è§£\n1 2 3 4 5  @Builder @Data @AllArgsConstructor @NoArgsConstructor ...     GsonFormat\n å¯ä»¥å¿«é€Ÿçš„å°†JSONè½¬æ¢ä¸ºå®ä½“ç±» shortcut option + s  çƒ­éƒ¨ç½²   pomæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–\n1 2 3 4 5  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-devtools\u0026lt;/artifactId\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt;     pomæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–\n1 2 3 4 5 6 7 8 9 10 11  \u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;fork\u0026gt;true\u0026lt;/fork\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt;     Preferences \u0026ndash; Compiler \u0026ndash; Build project automatically âœ…\n  cmd + option + shift + / \u0026ndash; registry \u0026ndash; compiler.automake.allow.when.app.running \u0026ndash; âœ…\n  é…ç½®å®Œæˆåï¼Œä¿®æ”¹é¡¹ç›®æ–‡ä»¶åä¼šè‡ªåŠ¨build\n  ","permalink":"https://haventong.github.io/post/springboot-idea%E5%B7%A5%E5%85%B7/","summary":"SpringBoot with IDEA æ’ä»¶ lombok IDEAä¸­ä¸‹è½½å åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ– 1 2 3 4 5 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt; å¸¸ç”¨æ³¨è§£ 1 2 3 4 5 @Builder @Data @AllArgsConstructor @NoArgsConstructor ... GsonFormat å¯ä»¥å¿«é€Ÿçš„å°†JSONè½¬æ¢ä¸ºå®ä½“ç±»","title":"SpringBoot IDEAå·¥å…·"},{"content":"MongoDBåŸºç¡€ 1 2 3  brew services start mongodb-community@4.2 brew services stop mongodb-community@4.2   1. åŸºæœ¬æ¦‚å¿µ é›†åˆ é›†åˆç±»ä¼¼äºæ•°ç»„ï¼Œåœ¨é›†åˆä¸­å¯ä»¥å­˜æ”¾æ–‡æ¡£\næ–‡æ¡£ æ–‡æ¡£æ˜¯æ–‡æ¡£æ•°æ®åº“çš„æœ€å°å•å…ƒï¼Œæˆ‘ä»¬æ“ä½œå’Œå­˜å‚¨çš„å†…å®¹éƒ½æ˜¯æ–‡æ¡£\nåœ¨MongoDBä¸­æ•°æ®åº“å’Œé›†åˆéƒ½ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»º\nå½“åˆ›å»ºæ–‡æ¡£æ—¶ï¼Œå¦‚æœæ–‡æ¡£æ‰€åœ¨çš„é›†åˆæˆ–æ•°æ®åº“ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆå’Œæ•°æ®åº“\n2. åŸºæœ¬æŒ‡ä»¤   show dbs\næ˜¾ç¤ºå½“å‰æ‰€æœ‰æ•°æ®åº“\n  use [db names]\nè¿›å…¥åˆ°æŒ‡å®šçš„æ•°æ®åº“ä¸­\n  db\nè¡¨ç¤ºå½“å‰æ‰€å¤„çš„æ•°æ®åº“\n  show collections\næŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€å­˜åœ¨çš„é›†åˆ\n  3. CRUD (1) æ’å…¥æ–‡æ¡£   db.\u0026lt;collection\u0026gt;.insert()\n  å‘é›†åˆä¸­æ’å…¥1ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£\n  å‘testæ•°æ®åº“ä¸­çš„ stus é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å­¦ç”Ÿå¯¹è±¡\n{name: \u0026quot;å­™æ‚Ÿç©º\u0026quot;, age: 18, gender: \u0026quot;male\u0026quot;}\n1 2 3 4 5  db.stus.insert({ name: \u0026#34;å­™æ‚Ÿç©º\u0026#34;, age: 18, gender: \u0026#34;male\u0026#34; })       å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®š_idå±æ€§ï¼Œåˆ™æ•°æ®åº“ä¼šç”¨ObjectID()è‡ªåŠ¨ä¸ºæ–‡æ¡£æ·»åŠ _idï¼Œæ”¹å±æ€§ä½œä¸ºæ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ã€‚\n  å¯ä»¥è‡ªå·±å±æ€§_idï¼Œæ•°æ®åº“å°±ä¸ä¼šå†æ·»åŠ ï¼›å¦‚æœè‡ªå·±æŒ‡å®šï¼Œä¹Ÿå¿…é¡»ç¡®ä¿å”¯ä¸€æ€§\n  db.\u0026lt;collection\u0026gt;.insertOne()\n  db.\u0026lt;collection\u0026gt;.insertMany()\nâ€‹\n  (2) æŸ¥è¯¢æ–‡æ¡£   db.\u0026lt;collection\u0026gt;.find()\n  æŸ¥è¯¢é›†åˆä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£\n  find()å¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ¡ä»¶\nfind({})ä¹Ÿè¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£\n{å­—æ®µå: å€¼}ï¼š æŸ¥è¯¢å­—æ®µæ˜¯æŒ‡å®šå€¼çš„æ–‡æ¡£\n  find()è¿”å›æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥ç”¨[]ç´¢å¼•\n    db.\u0026lt;collection\u0026gt;.findOne()\n æŸ¥è¯¢é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£ findOne()è¿”å›çš„æ˜¯ä¸€ä¸ªæ–‡æ¡£    db.\u0026lt;collection\u0026gt;.find().count() / db.\u0026lt;collection\u0026gt;.find().length\n  MongoDBæ”¯æŒé€šè¿‡å†…åµŒæ–‡æ¡£çš„å±æ€§æŸ¥è¯¢ï¼Œå¦‚æœè¦æŸ¥è¯¢å†…åµŒæ–‡æ¡£ï¼Œé€šè¿‡.æ¥åŒ¹é…ï¼›å¦‚æœè¦é€šè¿‡å†…åµŒæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢ï¼Œæ­¤æ—¶å±æ€§åå¿…é¡»ä½¿ç”¨å¼•å·\n1 2 3  db.users.find({ \u0026#34;hobby.movies\u0026#34;: \u0026#34;hero\u0026#34; });     .limit()å¯ä»¥è®¾ç½®æ˜¾ç¤ºæ•°æ®çš„ä¸Šé™\n  åˆ†é¡µæ•°æ®æ˜¾ç¤º\n  .skip((é¡µç -1) * æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°).limit(æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°)\n  .skip()ç”¨äºè·³è¿‡æŒ‡å®šæ•°é‡çš„æ•°æ®\n  MongoDBä¼šè‡ªåŠ¨è°ƒæ•´skip()å’Œlimit()çš„ä½ç½®\n    (3) ä¿®æ”¹æ–‡æ¡£   db.\u0026lt;collection\u0026gt;.update(æŸ¥è¯¢æ¡ä»¶ï¼Œæ–°å¯¹è±¡)\n  é»˜è®¤æƒ…å†µä¸‹ç”¨æ–°å¯¹è±¡æ›¿æ¢æ—§å¯¹è±¡\n1 2  //æ›¿æ¢ db.stus.update({name: \u0026#34;haven\u0026#34;}, {age: 28})     å¦‚æœéœ€è¦ä¿®æ”¹æŒ‡å®šå±æ€§ï¼Œè€Œä¸æ˜¯æ›¿æ¢ï¼Œéœ€è¦ä½¿ç”¨ä¿®æ”¹æ“ä½œç¬¦\n  $set\nå¯ä»¥ç”¨æ¥ä¿®æ”¹æ–‡æ¡£ä¸­çš„æŒ‡å®šå±æ€§\n1 2 3 4 5 6 7 8  db.stus.update( {\u0026#34;_id\u0026#34; : ObjectId(\u0026#34;5da96ae4298c2eb5254c4588\u0026#34;)}, {$set:{ gender: \u0026#34;male\u0026#34;, address: \u0026#34;liu sha he\u0026#34; } } )     $unset\nå¯ä»¥ç”¨æ¥åˆ é™¤æ–‡æ¡£çš„æŒ‡å®šå±æ€§\n  update()é»˜è®¤æƒ…å†µåªæ”¹ä¸€ä¸ª\n    db.\u0026lt;collection\u0026gt;.updateMany()\n åŒæ—¶ä¿®æ”¹å¤šä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£    db.\u0026lt;collection\u0026gt;.updateOne()\n æ›´æ–°ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£    db.\u0026lt;collection\u0026gt;.replaceOne()\n æ›¿æ¢ä¸€ä¸ªæ–‡æ¡£    $push: å‘æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ \n$addToSet: å‘æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¸”æ²¡æœ‰é‡å¤\n  (4) åˆ é™¤æ–‡æ¡£   db.\u0026lt;collection\u0026gt;.remove()\n å¯ä»¥æ ¹æ®æ¡ä»¶æ¥åˆ é™¤æ–‡æ¡£ï¼Œä¼ é€’çš„æ¡ä»¶çš„æ–¹å¼å’Œfind()ä¸€æ · é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ é™¤ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰æ–‡æ¡£ å¦‚æœremove()ç¬¬äºŒä¸ªå‚æ•°ä¸ºtrueï¼Œåˆ™åªä¼šåˆ é™¤ä¸€ä¸ª å¦‚æœåªä¼ é€’ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œåˆ™åˆ é™¤å…¨éƒ¨æ–‡æ¡£    db.\u0026lt;collection\u0026gt;.deleteOne()\n  db.\u0026lt;collection\u0026gt;.deleteMany()\n  db.\u0026lt;collection\u0026gt;.drop()\nåˆ é™¤æ•´ä¸ªé›†åˆ\n  db.dropDatabase()\nâ€‹\nâ€‹\nâ€‹\n  ","permalink":"https://haventong.github.io/post/mongodb%E5%9F%BA%E7%A1%80/","summary":"MongoDBåŸºç¡€ 1 2 3 brew services start mongodb-community@4.2 brew services stop mongodb-community@4.2 1. åŸºæœ¬æ¦‚å¿µ é›†åˆ é›†åˆç±»ä¼¼äºæ•°ç»„ï¼Œåœ¨é›†åˆä¸­å¯ä»¥å­˜æ”¾æ–‡æ¡£ æ–‡æ¡£ æ–‡æ¡£æ˜¯æ–‡æ¡£æ•°æ®åº“çš„æœ€å°å•å…ƒï¼Œæˆ‘ä»¬æ“ä½œå’Œå­˜å‚¨çš„å†…","title":"MongoDBåŸºç¡€"},{"content":"Spring Booté…ç½® 1. æ ‡è®°è¯­è¨€   ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼šxxx.xml\n  YAML: ä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”json, xmlæ›´é€‚åˆä½œé…ç½®æ–‡ä»¶ï¼Œå®ä¾‹å¦‚ä¸‹\n1 2  server:port:8081  XML:\n1 2 3  \u0026lt;server\u0026gt; \u0026lt;port\u0026gt;8081\u0026lt;/port\u0026gt; \u0026lt;/server\u0026gt;     2. YAMLè¯­æ³• (1) åŸºæœ¬è¯­æ³• K :(ç©ºæ ¼)V â€” è¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹\nä»¥ç©ºæ ¼çš„ç¼©è¿›æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œå·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®éƒ½æ˜¯åŒä¸€å±‚çº§\n1 2 3  server:port:8080path:/hello  å±æ€§å’Œå€¼å¤§å°å†™æ•æ„Ÿ\n(2) å€¼çš„å†™æ³•   å­—é¢é‡ï¼šæ™®é€šçš„å€¼(æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”)\nk: v: å­—é¢é‡ç›´æ¥æ¥å†™\nâ€‹\tå­—ç¬¦ä¸²é»˜è®¤ä¸éœ€è¦åŠ ä¸Šå•å¼•å·æˆ–åŒå¼•å·\nâ€‹\tåŒå¼•å·ï¼šä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œçš„ç‰¹æ®Šå­—ç¬¦ï¼›ç‰¹æ®Šå­—ç¬¦ä¼šä½œä¸ºæœ¬èº«æƒ³è¡¨ç¤ºçš„æ„æ€\nâ€‹\tname: \u0026quot;zhangsan \\n lisi\u0026quot;è¾“å‡ºzhangsan æ¢è¡Œ lisi\nâ€‹\tå•å¼•å·ï¼šä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²\nâ€‹\t name: \u0026quot;zhangsan \\n lisi\u0026quot;è¾“å‡ºzhangsan \\n lisi\n  å¯¹è±¡(å±æ€§å’Œå€¼): é”®å€¼å¯¹\nk: v: å¯¹è±¡è¿˜æ˜¯k: vçš„æ¨¡å¼\n1 2 3  friends:lastName:zhangsanage:20  è¡Œå†…å†™æ³•ï¼š\n1  friends:{lastName: zhangsan, age:18}    æ•°ç»„(List, Set)\nç”¨- å€¼è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ \n1 2 3 4  pets:- cat- dog- pig  è¡Œå†…å†™æ³•\n1  pets:[cat, dog, pig ]  3. é…ç½®æ–‡ä»¶å€¼æ³¨å…¥ é…ç½®æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  server:port:8081person:lastName:zhangsanage:18boss:falsebirthDay:2017/12/12maps:{k1: v1, k2:12}list:- lisi- zhaoliudog:name:myDogage:2  javaBean:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  /* * å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ¯ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œæ˜ å°„åˆ°è¿™ä¸ªç»„ä»¶ä¸­ * @ConfigurationPropertiesï¼šå‘Šè¯‰Spring Bootå°†æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œé…ç½®æ–‡ä»¶ä¸­ç›¸å…³çš„é…ç½®è¿›è¡Œç»‘å®š * prefix = \u0026#34;person\u0026#34;ï¼šé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªä¸‹é¢çš„æ‰€æœ‰å±æ€§è¿›è¡Œä¸€ä¸€æ˜ å°„ * * åªæœ‰è¿™ä¸ªç»„ä»¶æ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰èƒ½ä½¿ç”¨å®¹å™¨æä¾›çš„@ConfigurationPropertiesåŠŸèƒ½ * */ @Component @ConfigurationProperties(prefix = \u0026#34;person\u0026#34;) public class Person { private String lastName; private Integer age; private Boolean boss; private Date birthDay; private Dog dog; private Map\u0026lt;String, Object\u0026gt; maps; private List\u0026lt;Object\u0026gt; list;   æˆ‘ä»¬å¯ä»¥å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œä»¥åé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±å¯ä»¥æœ‰æç¤ºï¼š\n1 2 3 4 5 6  \u0026lt;!-- å¯¼å…¥é…ç½®æ–‡ä»¶å¤„ç†å™¨ï¼Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šå°±ä¼šæœ‰æç¤º --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-configuration-processor\u0026lt;/artifactId\u0026gt; \u0026lt;optional\u0026gt;true\u0026lt;/optional\u0026gt; \u0026lt;/dependency\u0026gt;   @ConfigurationPropertiesè·å–å€¼å’Œ@Valueè·å–å€¼çš„åŒºåˆ«     @ConfigurationProperties @Value     åŠŸèƒ½ æ‰¹é‡æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ ä¸€ä¸ªä¸€ä¸ªæŒ‡å®š   æ¾æ•£ç»‘å®š(æ¾æ•£è¯­æ³•) æ”¯æŒæ¾æ•£è¯­æ³•ç»‘å®š ä¸æ”¯æŒæ¾æ•£è¯­æ³•ç»‘å®š   SpEL ä¸æ”¯æŒ æ”¯æŒ   JSR30æ•°æ®æ ¡éªŒ æ”¯æŒ ä¸æ”¯æŒ   å¤æ‚ç±»å‹å°è£… æ”¯æŒ ä¸æ”¯æŒ    é…ç½®æ–‡ä»¶ymlå’Œpropertieséƒ½å¯ä»¥è·å–å€¼\nå¦‚æœåªæ˜¯åœ¨æŸä¸ªä¸šåŠ¡é€»è¾‘ä¸­ï¼Œéœ€è¦è·å–ä¸€ä¸‹æŸä¸ªé…ç½®æ–‡ä»¶ä¸­çš„æŸé¡¹å€¼ï¼Œä½¿ç”¨@Value\nå¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªjavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œæˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨@ConfigurationProperties\né…ç½®æ–‡ä»¶æ³¨å…¥å€¼æ•°æ®æ ¡éªŒ 1 2 3 4 5 6 7  @Component @ConfigurationProperties(prefix = \u0026#34;person\u0026#34;) @Validated public class Person { // lastNameå¿…é¡»ä¸ºé‚®ç®±æ ¼å¼  @Email private String lastName;     4. @PropertySource\u0026amp;ImportResource @PropertySourceï¼šåŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8 9  /* * @ConfigurationProperties(prefix = \u0026#34;person\u0026#34;) * é»˜è®¤ä»å…¨å±€é…ç½®æ–‡ä»¶ä¸­è·å–å€¼ * */ @PropertySource(value = {\u0026#34;classpath:person.properties\u0026#34;}) @Component @ConfigurationProperties(prefix = \u0026#34;person\u0026#34;) //@Validated public class Person {   @ImportResourceï¼šå¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ç”Ÿæ•ˆ\nSpring Booté‡Œé¢æ²¡æœ‰Springçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è‡ªå·±ç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½è‡ªåŠ¨è¯†åˆ«ï¼›\næƒ³è®©Springçš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŠ è½½è¿›æ¥ï¼›\néœ€è¦å°†@ImportResourceæ ‡æ³¨åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸Š\n1 2 3 4 5 6 7 8 9  @ImportResource(locations = {\u0026#34;classpath:beans.xml\u0026#34;}) @SpringBootApplication public class SpringBoot01HelloworldQuickApplication { public static void main(String[] args) { SpringApplication.run(SpringBoot01HelloworldQuickApplication.class, args); } }   å¯¼å…¥Springçš„é…ç½®æ–‡ä»¶ï¼Œè®©å…¶ç”Ÿæ•ˆ\nä½†ä¸å¸Œæœ›ç¼–å†™Springçš„é…ç½®æ–‡ä»¶\n1 2 3 4 5 6 7 8  \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt; \u0026lt;beans xmlns=\u0026#34;http://www.springframework.org/schema/beans\u0026#34; xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xsi:schemaLocation=\u0026#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\u0026#34;\u0026gt; \u0026lt;bean class=\u0026#34;com.haven.springboot.sevice.HelloService\u0026#34; id=\u0026#34;helloService\u0026#34;\u0026gt; \u0026lt;/bean\u0026gt; \u0026lt;/beans\u0026gt;   SpringBootæ¨èç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶çš„æ–¹å¼ï¼š æ¨èä½¿ç”¨å…¨æ³¨è§£æ–¹å¼\n é…ç½®ç±»===Springé…ç½®æ–‡ä»¶ ä½¿ç”¨@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  /* * @Configurationï¼šå‘Šè¯‰Spring Bootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» * å°±æ˜¯æ¥æ›¿ä»£ä¹‹å‰Springçš„é…ç½®æ–‡ä»¶ * * ä¹‹å‰åœ¨Springé…ç½®æ–‡ä»¶ä¸­ç”¨ \u0026lt;bean\u0026gt;\u0026lt;/bean\u0026gt; æ ‡ç­¾æ·»åŠ ç»„ä»¶ * */ @Configuration public class MyAppConfig { // å°†æ–¹æ³•çš„è¿”å›å€¼æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œå®¹å™¨ä¸­è¿™ä¸ªç»„ä»¶é»˜è®¤çš„idå°±æ˜¯æ–¹æ³•å  @Bean public HelloService helloService02(){ System.out.println(\u0026#34;é…ç½®ç±»@Beanç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶\u0026#34;); return new HelloService(); } }   5. é…ç½®æ–‡ä»¶å ä½ç¬¦ (1) éšæœºæ•° 1 2  ${random.value}, ${random.int}, ${random.long} ${random.int(10)}, ${random.int[1024, 65536]}   (2) å ä½ç¬¦è·å–ä¹‹å‰é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ä½¿ç”¨:æŒ‡å®šé»˜è®¤å€¼ 1 2 3 4 5 6 7 8 9  person.last-name=å¼ ä¸‰${random.uuid} person.age=${random.int} person.birth-day=2017/12/15 person.boss=false person.maps.k1=v1 person.maps.k2=14 person.list=a,b,c person.dog.name=${person.hello:hello}_dog person.dog.age=15   6. Profile (1) å¤šProfileæ–‡ä»¶ æˆ‘ä»¬åœ¨ä¸»é…ç½®æ–‡ä»¶ç¼–å†™æ—¶ï¼Œæ–‡ä»¶åå¯ä»¥æ˜¯application-{profile}.properties/yml\né»˜è®¤ä½¿ç”¨application.propertiesçš„é…ç½®\n(2)æ¿€æ´»æŒ‡å®šprofile   åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šspring.profiles.active=dev\n  å‘½ä»¤è¡Œ\n1  --spring.profiles.active=dev   Edit Configurationâ€”\u0026gt;Program arguments\n  (3) ymlå¤šæ–‡æ¡£å— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  server:port:8081spring:profiles:active:prod---server:port:8083spring:profiles:dev---server:port:8084spring:profiles:prod#æŒ‡å®šå±äºé‚£ä¸ªç¯å¢ƒ  7. é…ç½®æ–‡ä»¶åŠ è½½ä½ç½® ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ï¼Œé«˜ä¼˜å…ˆçº§ä¼šè¦†ç›–ä½ä¼˜å…ˆçº§çš„é…ç½®ï¼š\n ./config/ ./ ./src/main/resources/config/ ./src/main/resources/  SpringBootä¼šä»è¿™å››ä¸ªä½ç½®å…¨éƒ¨åŠ è½½ä¸»é…ç½®æ–‡ä»¶ï¼šäº’è¡¥é…ç½®\nå¯ä»¥é€šè¿‡spring.config.locationæ¥æ”¹å˜é»˜è®¤çš„é…ç½®æ–‡ä»¶çš„ä½ç½®\né¡¹ç›®æ‰“åŒ…å¥½åï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°--spring.config.location=?çš„å½¢å¼ï¼Œå¯åŠ¨é¡¹ç›®çš„æ—¶å€™æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„æ–°ä½ç½®ï¼›æŒ‡å®šé…ç½®æ–‡ä»¶å’Œé»˜è®¤åŠ è½½çš„é…ç½®æ–‡ä»¶å…±åŒèµ·ä½œç”¨ï¼Œå½¢æˆäº’è¡¥é…ç½®\n8. è‡ªåŠ¨é…ç½®åŸç† é…ç½®æ–‡ä»¶èƒ½é…ç½®çš„å±æ€§å‚ç…§ https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/common-application-properties.html\nè‡ªåŠ¨é…ç½®åŸç†   SpringBootå¯åŠ¨æ—¶åŠ è½½ä¸»é…ç½®ç±»ï¼Œå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½@EnableAutoConfiguration\n  @EnableAutoConfigurationåŸç†\n  åˆ©ç”¨AutoConfigurationImportSelectorç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€äº›ç»„ä»¶\n  æŸ¥çœ‹AutoConfigurationImportSelectorä¸­çš„selectImports()æ–¹æ³•\n  1 2  // è·å–å€™é€‰çš„é…ç½® List\u0026lt;String\u0026gt; configurations = this.getCandidateConfigurations(annotationMetadata, attributes);   1 2  // getCandidateConfigurations() List\u0026lt;String\u0026gt; configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader());   1 2 3 4  SpringFactoriesLoader.loadFactoryNames() // æ‰«ææ‰€æœ‰jaråŒ…ç±»è·¯å¾„ä¸‹çš„\tMETA-INF/spring.factories // æŠŠæ‰«æåˆ°çš„æ–‡ä»¶çš„å†…å®¹åŒ…è£…æˆpropertieså¯¹è±¡ // ä»propertiesè·å–åˆ°EnableAutoConfiguration.classçš„ç±»åå¯¹åº”çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åœ¨å®¹å™¨ä¸­   å°†ç±»è·¯å¾„ä¸‹ META-INF/spring.factoriesé‡Œé¢é…ç½®çš„æ‰€æœ‰EnableAutoConfigurationçš„å€¼åŠ åˆ°äº†å®¹å™¨ä¸­\næ¯ä¸€ä¸ªè¿™æ ·çš„ xxxAutoConfigurationç±»éƒ½æ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­ï¼Œç”¨ä»–ä»¬åšè‡ªåŠ¨é…ç½®ã€‚\n  æ¯ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»è¿›è¡Œè‡ªåŠ¨é…ç½®åŠŸèƒ½\n  HttpEncodingAutoConfiguration(HTTPç¼–ç è‡ªåŠ¨é…ç½®)ä¸ºä¾‹ï¼Œä»‹ç»è‡ªåŠ¨é…ç½®åŸç†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  @Configuration\t// è¡¨ç¤ºæ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå¯ä»¥ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ @EnableConfigurationProperties({HttpProperties.class})\t// å¯ç”¨æŒ‡å®šç±»çš„ConfigurationPropertiesåŠŸèƒ½ï¼›å°†é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼å’ŒHttpPropertiesç»‘å®šèµ·æ¥ï¼Œå¹¶æŠŠHttpPropertiesåŠ å…¥åˆ°iocå®¹å™¨ä¸­  @ConditionalOnWebApplication( type = Type.SERVLET )\t// Springåº•å±‚@Conditionalæ³¨è§£ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œæ•´ä¸ªé…ç½®ç±»é‡Œé¢çš„é…ç½®å°±ä¼šç”Ÿæ•ˆï¼› // åˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦æ˜¯webåº”ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å½“å‰é…ç½®ç±»ç”Ÿæ•ˆï¼›  // åˆ¤æ–­å½“å‰é¡¹ç›®æœ‰æ²¡æœ‰è¿™ä¸ªç±» // CharacterEncodingFilterï¼šSpringMVCä¸­è¿›è¡Œä¹±ç è§£å†³çš„è¿‡æ»¤å™¨ @ConditionalOnClass({CharacterEncodingFilter.class}) // åˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½® spring.http.encoding;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ¤æ–­ä¹Ÿæ˜¯æˆç«‹çš„ // å³ä½¿é…ç½®æ–‡ä»¶ä¸­ä¸é…ç½®spring.http.encoding=enabledï¼Œä¹Ÿæ˜¯é»˜è®¤ç”Ÿæ•ˆçš„ @ConditionalOnProperty( prefix = \u0026#34;spring.http.encoding\u0026#34;, value = {\u0026#34;enabled\u0026#34;}, matchIfMissing = true ) public class HttpEncodingAutoConfiguration { // ä»–å·²ç»å’ŒSpringBootçš„é…ç½®æ–‡ä»¶æ˜ å°„äº†  private final Encoding properties; // åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨çš„æƒ…å†µä¸‹ï¼Œå‚æ•°çš„å€¼ä¼šä»å®¹å™¨ä¸­æ‹¿  public HttpEncodingAutoConfiguration(HttpProperties properties) { this.properties = properties.getEncoding(); } @Bean\t// ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶çš„æŸäº›å€¼éœ€è¦ä»propertiesä¸­è·å–  @ConditionalOnMissingBean public CharacterEncodingFilter characterEncodingFilter() { CharacterEncodingFilter filter = new OrderedCharacterEncodingFilter(); filter.setEncoding(this.properties.getCharset().name()); filter.setForceRequestEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.REQUEST)); filter.setForceResponseEncoding(this.properties.shouldForce(org.springframework.boot.autoconfigure.http.HttpProperties.Encoding.Type.RESPONSE)); return filter; }   æ ¹æ®å½“å‰ä¸åŒçš„æ¡ä»¶åˆ¤æ–­ï¼Œå†³å®šè¿™ä¸ªé…ç½®ç±»æ˜¯å¦ç”Ÿæ•ˆã€‚\nä¸€æ—¦é…ç½®ç±»ç”Ÿæ•ˆï¼Œè¿™ä¸ªé…ç½®ç±»å°±ä¼šä¸ªå®¹å™¨ä¸­æ·»åŠ å„ç§ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯ä»å¯¹åº”çš„propertiesç±»ä¸­è·å–çš„ï¼Œè€Œè¿™äº›ç±»é‡Œé¢çš„æ¯ä¸€ä¸ªå±æ€§åˆæ˜¯å’Œé…ç½®æ–‡ä»¶ç»‘å®šçš„ã€‚\n  æ‰€æœ‰åœ¨é…ç½®æ–‡ä»¶ä¸­èƒ½é…ç½®çš„å±æ€§ï¼Œéƒ½æ˜¯åœ¨xxxPropertiesç±»ä¸­å°è£…ç€ï¼›é…ç½®æ–‡ä»¶èƒ½é…ç½®ä»€ä¹ˆï¼Œå°±å¯ä»¥å‚ç…§æŸä¸ªåŠŸèƒ½å¯¹åº”çš„å±æ€§ç±»\n1 2 3 4  @ConfigurationProperties(\tprefix = \u0026#34;spring.http\u0026#34; )\t// ä»é…ç½®æ–‡ä»¶ä¸­è·å–æŒ‡å®šçš„å€¼å’Œbeançš„å±æ€§è¿›è¡Œç»‘å®š public class HttpProperties {     ç²¾é«“   SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„é…ç½®ç±»\n  æˆ‘ä»¬çœ‹æˆ‘ä»¬çš„åŠŸèƒ½æœ‰æ²¡æœ‰SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»ï¼›\n  å†çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶æœ‰ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¥é…ç½®ï¼‰\n  ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶æ—¶ï¼Œä¼šä»propertieä¸­è·å–æŸäº›å±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼\nxxxAutoConfigurationï¼šè‡ªåŠ¨é…ç½®ç±»ï¼Œç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶\nxxxPropertiesï¼šå°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§\n  9. ç»†èŠ‚ 1. @Conditionalæ´¾ç”Ÿæ³¨è§£ ä½œç”¨ï¼šå¿…é¡»æ˜¯@ConditionalæŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œæ‰ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œé…ç½®ç±»é‡Œé¢çš„æ‰€æœ‰å†…å®¹æ‰ç”Ÿæ•ˆ\nè‡ªåŠ¨é…ç½®ç±»å¿…é¡»åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹æ‰èƒ½ç”Ÿæ•ˆ\né€šè¿‡\n1  debug=true   è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆ\nåˆ†ä¸ºPositive matcheså’ŒNegative matches\n","permalink":"https://haventong.github.io/post/springboot%E9%85%8D%E7%BD%AE/","summary":"Spring Booté…ç½® 1. æ ‡è®°è¯­è¨€ ä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼šxxx.xml YAML: ä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¯”json, xmlæ›´é€‚åˆä½œé…ç½®æ–‡ä»¶ï¼Œå®ä¾‹å¦‚ä¸‹ 1 2 server:port:8081 XML: 1 2 3 \u0026lt;server\u0026gt; \u0026lt;port\u0026gt;8081\u0026lt;/port\u0026gt; \u0026lt;/server\u0026gt; 2. YA","title":"SpringBooté…ç½®"},{"content":"SpringBoot HelloWorld ä¸€ä¸ªåŠŸèƒ½ï¼š\næµè§ˆå™¨å‘é€ä¸€ä¸ªhelloè¯·æ±‚ï¼Œæµè§ˆå™¨æ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”helloå­—ç¬¦ä¸²\n1. åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹(jar) 2. å¯¼å…¥SpringBootç›¸å…³ä¾èµ– mavené€‰æ‹©è‡ªåŠ¨å¯¼å…¥\n1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026lt;parent\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/parent\u0026gt; \u0026lt;dependencies\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;/dependencies\u0026gt;   (1) çˆ¶é¡¹ç›® 1 2 3 4 5  \u0026lt;parent\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-parent\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/parent\u0026gt;   å®ƒçš„çˆ¶é¡¹ç›®æ˜¯\n1 2 3 4 5 6 7  \u0026lt;parent\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-dependencies\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;relativePath\u0026gt;../../spring-boot-dependencies\u0026lt;/relativePath\u0026gt; \u0026lt;/parent\u0026gt; æ¥çœŸæ­£ç®¡ç†Spring Booté‡Œçš„æ‰€æœ‰ä¾èµ–   SpringBootçš„ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼›\nå¯¼å…¥ä¾èµ–é»˜è®¤ä¸éœ€è¦å†™ç‰ˆæœ¬(æ²¡æœ‰åœ¨dependenciesä¸­è¿›è¡Œç®¡ç†çš„è‡ªç„¶éœ€è¦å£°æ˜ç‰ˆæœ¬å·)\n(2) å¯¼å…¥çš„ä¾èµ– 1 2 3 4 5  \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-starter-web\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.1.8.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt;   Spring-boot-starter-web\n  spring bootåœºæ™¯å¯åŠ¨å™¨: å¸®æˆ‘ä»¬å¯¼å…¥äº†webæ¨¡å—æ­£å¸¸è¿è¡Œæ‰€ä¾èµ–çš„ç»„ä»¶\n  SpringBootå°†æ‰€æœ‰åŠŸèƒ½åœºæ™¯éƒ½æŠ½å–å‡ºæ¥ï¼Œåšæˆä¸€ä¸ªä¸ªstarters(å¯åŠ¨å™¨)ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥è¿™äº›starterï¼Œç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–éƒ½ä¼šå¯¼å…¥è¿›æ¥ã€‚è¦ç”¨ä»€ä¹ˆåŠŸèƒ½å°±å¯¼å…¥ä»€ä¹ˆåœºæ™¯çš„å¯åŠ¨å™¨\n  3. ç¼–å†™ä¸»ç¨‹åº 1  @SpringBootApplication\t// æ¥æ ‡æ³¨ä¸€ä¸ªä¸»ç¨‹åºç±»ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªSpring Bootç±»   @SpringBootApplicationï¼šSpringBootæ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¯´æ˜è¿™ä¸ªç±»æ˜¯SpringBootçš„ä¸»é…ç½®ç±»ã€‚SpringBootå°±åº”è¯¥è¿è¡Œè¿™ä¸ªç±»çš„main æ–¹æ³•æ¥å¯åŠ¨SpringBootç±»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  @Target({ElementType.TYPE}) @Retention(RetentionPolicy.RUNTIME) @Documented @Inherited @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan( excludeFilters = {@Filter( type = FilterType.CUSTOM, classes = {TypeExcludeFilter.class} ), @Filter( type = FilterType.CUSTOM, classes = {AutoConfigurationExcludeFilter.class} )} ) public @interface SpringBootApplication     @SpringBootConfigurationï¼šSpringBootçš„é…ç½®ç±»\næ ‡æ³¨åœ¨æŸä¸ªç±»ä¸Šï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªSpring Booté…ç½®ç±»\n  @Configurationï¼šé…ç½®ç±»ä¸Šæ ‡æ³¨è¿™ä¸ªæ³¨è§£\né…ç½®ç±»==é…ç½®æ–‡ä»¶ï¼›é…ç½®ç±»ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼›@Component\n  @EnableAutoConfigurationï¼šå¼€å¯è‡ªåŠ¨é…ç½®åŠŸèƒ½\nä»¥å‰æˆ‘ä»¬éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼ŒSpringBootè‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½®\n1 2 3  @AutoConfigurationPackage @Import({AutoConfigurationImportSelector.class}) public @interface EnableAutoConfiguration     @AutoConfigurationPackageï¼šè‡ªåŠ¨é…ç½®åŒ…\n@Import({Registrar.class})\nSpringçš„åº•å±‚æ³¨è§£ï¼Œ@Importç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶ï¼›å¯¼å…¥çš„ç»„ä»¶ç”±Registrar.class\nå°†ä¸»é…ç½®ç±»(@SpringBootApplicationæ ‡æ³¨çš„ç±»)çš„æ‰€åœ¨åŒ…åŠä¸‹é¢æ‰€æœ‰å­åŒ…é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶éƒ½æ‰«æåˆ°Springå®¹å™¨ä¸­ã€‚\n  @Import({AutoConfigurationImportSelector.class})\nç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ï¼Œ\nAutoConfigurationImportSelector.classï¼šå¯¼å…¥å“ªäº›ç»„ä»¶çš„é€‰æ‹©å™¨\nå°†æ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ä»¥å…¨ç±»åçš„æ–¹å¼è¿”å›ï¼›\nè¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼›\nä¼šç»™å®¹å™¨ä¸­å¯¼å…¥éå¸¸å¤šçš„è‡ªåŠ¨é…ç½®ç±»(xxxAutoConfiguration)ï¼›å°±æ˜¯ç»™å®¹å™¨ä¸­å¯¼å…¥è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½è¿™äº›ç»„ä»¶\næœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå°±å…å»äº†æ‰‹åŠ¨ç¼–å†™é…ç½®æ³¨å…¥åŠŸèƒ½ç»„ä»¶çš„å·¥ä½œ\nSpring Bootåœ¨å¯åŠ¨æ—¶ä»ç±»è·¯å¾„ä¸‹çš„META-INF/spring.factoriesä¸­è·å–EnableAutoConfigurationæŒ‡å®šçš„å€¼ï¼Œå°†è¿™äº›å€¼ä½œä¸ºè‡ªåŠ¨é…ç½®ç±»å¯¼å…¥åˆ°å®¹å™¨ä¸­ï¼Œè‡ªåŠ¨é…ç½®ç±»å°±ç”Ÿæ•ˆï¼Œå¸®æˆ‘ä»¬è¿›è¡Œè‡ªåŠ¨é…ç½®å·¥ä½œ\nJ2EEçš„æ•´ä½“è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®éƒ½åœ¨spring-boot-autoconfigurationä¸­\n  4. ç¼–å†™ç›¸å…³çš„Controller, Service 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  package com.haven.Controller; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.ResponseBody; /** * @author HavenTong * @date 2019-09-09 00:56 */ @Controller public class HelloController { @ResponseBody @RequestMapping(\u0026#34;/hello\u0026#34;) private String hello(){ return (\u0026#34;Hello World\u0026#34;); } }   5. è¿è¡Œä¸»ç¨‹åºæµ‹è¯• 6. ç®€åŒ–éƒ¨ç½² https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/getting-started-first-application.html#getting-started-first-application-executable-jar\n11.5\nå¯¼å…¥Spring Bootçš„mavenæ’ä»¶\n1 2 3 4 5 6 7 8 9  \u0026lt;!-- å¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„jaråŒ… --\u0026gt; \u0026lt;build\u0026gt; \u0026lt;plugins\u0026gt; \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.springframework.boot\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;spring-boot-maven-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;/plugin\u0026gt; \u0026lt;/plugins\u0026gt; \u0026lt;/build\u0026gt;   ä¾§è¾¹æ â€”\u0026gt;Mavenâ€”\u0026gt;é¡¹ç›®â€”\u0026gt;LifeCycleâ€”\u0026gt;package\n1  java -jar   è¿›è¡Œæ‰§è¡Œ\n7. ä½¿ç”¨SpringBoot Initializeråˆ›å»ºçš„é¡¹ç›®   resources\n  static: ä¿å­˜çš„æ‰€æœ‰é™æ€èµ„æº\tjs, css, å›¾ç‰‡\n  templates: ä¿å­˜æ‰€æœ‰çš„æ¨¡ç‰ˆé¡µé¢ã€‚(Spring Booté»˜è®¤jaråŒ…ä½¿ç”¨åµŒå…¥å¼çš„Tomcatï¼Œé»˜è®¤ä¸æ”¯æŒjspçš„é¡µé¢);\nå¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“(freemarker, thymeleaf);\n  **application.properties: **Spring Bootåº”ç”¨çš„é…ç½®æ–‡ä»¶\n    ","permalink":"https://haventong.github.io/post/springboot%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE/","summary":"SpringBoot HelloWorld ä¸€ä¸ªåŠŸèƒ½ï¼š æµè§ˆå™¨å‘é€ä¸€ä¸ªhelloè¯·æ±‚ï¼Œæµè§ˆå™¨æ¥å—è¯·æ±‚å¹¶å¤„ç†ï¼Œå“åº”helloå­—ç¬¦ä¸² 1. åˆ›å»ºä¸€ä¸ªmavenå·¥ç¨‹(jar) 2. å¯¼å…¥SpringB","title":"SpringBootæ–°å»ºé¡¹ç›®"},{"content":"STLå®¹å™¨å…±æ€§ STLå®¹å™¨æ‰€æä¾›çš„éƒ½æ˜¯å€¼å¯“æ„ï¼Œè€Œéå¼•ç”¨å¯“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬å‘å®¹å™¨æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå®¹å™¨å†…éƒ¨å®æ–½äº†æ‹·è´åŠ¨ä½œï¼Œå°†æˆ‘ä»¬è¦æ’å…¥çš„å…ƒç´ å†å¦è¡Œæ‹·è´ä¸€ä»½æ”¾å…¥åˆ°å®¹å™¨ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æä¾›çš„å…ƒç´ å¿…é¡»èƒ½å¤Ÿæ‹·è´ã€‚\n è‹¥æœ‰æŒ‡é’ˆï¼Œéœ€è¦å†™æ‹·è´æ„é€ ï¼Œé‡è½½ç­‰å·\n  é™¤äº†queueå’Œstackä¹‹å¤–ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æä¾›å¯è¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œè¿ç”¨è¿”å›çš„è¿­ä»£å™¨å°±å¯ä»¥è®¿é—®å…ƒç´ ã€‚ é€šå¸¸STLä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦ä½¿ç”¨è€…ä¼ å…¥æ­£ç¡®å‚æ•°ã€‚ æ¯ä¸ªå®¹å™¨éƒ½æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°å’Œé»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°ã€‚ å¤§å°ç›¸å…³çš„æ„é€ æ–¹æ³•ï¼š  size()è¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•° empty()åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºç©º    STLå®¹å™¨ä½¿ç”¨æ—¶æœº     vector deque list set multiset map multimap     å…¸å‹å†…å­˜ç»“æ„ å•ç«¯æ•°ç»„ åŒç«¯æ•°ç»„ åŒå‘é“¾è¡¨ äºŒå‰æ ‘ äºŒå‰æ ‘ äºŒå‰æ ‘ äºŒå‰æ ‘   å¯éšæœºå­˜å– æ˜¯ æ˜¯ å¦ å¦ å¦ å¯¹keyè€Œè¨€ï¼Œæ˜¯ å¦   å…ƒç´ æœå¯»é€Ÿåº¦ æ…¢ æ…¢ éå¸¸æ…¢ å¿« å¿« å¯¹keyè€Œè¨€ï¼Œå¿« å¯¹keyè€Œè¨€ï¼Œå¿«   å…ƒç´ å®‰æ’ç§»é™¤ å°¾ç«¯ å¤´å°¾ä¸¤ç«¯ ä»»ä½•ä½ç½® - - - -    ä½¿ç”¨åœºæ™¯ vector è½¯ä»¶å†å²æ“ä½œæ•°æ®çš„å­˜å‚¨ï¼Œç»å¸¸æŸ¥çœ‹å†å²è®°å½•ï¼Œä½†ä¸ä¼šåˆ é™¤è®°å½•ã€‚\ndeque æ’é˜Ÿè´­ç¥¨ç³»ç»Ÿï¼Œæ’é˜Ÿè€…çš„å­˜å‚¨å¯ä»¥é‡‡ç”¨dequeï¼Œæ”¯æŒå¤´éƒ¨å¿«é€Ÿç§»é™¤ï¼Œå°¾ç«¯å¿«é€Ÿæ·»åŠ ã€‚å¦‚æœé‡‡ç”¨vectorï¼Œå¤´éƒ¨ç§»é™¤ä¼šç§»åŠ¨å¤§é‡æ•°æ®ï¼Œé€Ÿåº¦æ…¢ã€‚\nvector v.s. deque  vector.at()æ¯”deque.at()æ•ˆç‡é«˜ï¼švector.at(0)æ˜¯å›ºå®šçš„ï¼Œdequeçš„å¼€å§‹ä½ç½®æ˜¯ä¸å›ºå®šçš„ å¦‚æœæœ‰å¤§é‡é‡Šæ”¾æ“ä½œæ—¶ï¼ŒvectorèŠ±çš„æ—¶é—´æ›´å°‘ dequeæ”¯æŒå¤´éƒ¨çš„å¿«é€Ÿæ’å…¥ä¸ç§»é™¤  list å…¬äº¤è½¦ä¹˜å®¢çš„å­˜å‚¨ï¼Œéšæ—¶å¯èƒ½æœ‰ä¹˜å®¢ä¸‹è½¦ï¼Œæ”¯æŒé¢‘ç¹çš„ä¸ç¡®å®šä½ç½®å…ƒç´ çš„ç§»é™¤å’Œæ’å…¥\nset å¯¹æ‰‹æœºæ¸¸æˆçš„ä¸ªäººå¾—åˆ†çºªå½•çš„å­˜å‚¨ï¼Œå­˜å‚¨è¦æ±‚ä»é«˜åˆ†åˆ°ä½åˆ†çš„é¡ºåºæ’åˆ—\nmap æŒ‰IDå·å­˜å‚¨åä¸‡ä¸ªç”¨æˆ·ï¼Œæƒ³è¦å¿«é€Ÿé€šè¿‡IDæŸ¥æ‰¾å¯¹åº”çš„ç”¨æˆ·ã€‚åˆ©ç”¨äºŒå‰æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ã€‚\n","permalink":"https://haventong.github.io/post/stl%E7%AC%94%E8%AE%B0/","summary":"STLå®¹å™¨å…±æ€§ STLå®¹å™¨æ‰€æä¾›çš„éƒ½æ˜¯å€¼å¯“æ„ï¼Œè€Œéå¼•ç”¨å¯“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬å‘å®¹å™¨æ’å…¥å…ƒç´ çš„æ—¶å€™ï¼Œå®¹å™¨å†…éƒ¨å®æ–½äº†æ‹·è´åŠ¨ä½œï¼Œå°†æˆ‘ä»¬è¦æ’å…¥çš„å…ƒç´ å†å¦","title":"STLç¬”è®°"},{"content":"Header 1 ğŸŒ  è¿™æ˜¯ç¬¬äºŒç¯‡åšå®¢ã€‚\næµ‹è¯•æ˜¯å¦å¯ä»¥ä½¿ç”¨\n","permalink":"https://haventong.github.io/post/my-second-post/","summary":"Header 1 ğŸŒ  è¿™æ˜¯ç¬¬äºŒç¯‡åšå®¢ã€‚ æµ‹è¯•æ˜¯å¦å¯ä»¥ä½¿ç”¨","title":"My Second Post"},{"content":"Header 1 âœŒï¸ æµ‹è¯•ä¸­æ–‡æ˜¯å¦å¯ç”¨\nThis is my first post.\nTest inline code print(\u0026quot;hello world\u0026quot;)\nä¸‹é¢ä¸»è¦ä»‹ç»æ¨¡å‹å®šä¹‰ $\\mathcal{G} = (\\mathcal{V},\\mathcal{E},\\mathcal{R})$ $$ \\tilde{X} = {x_1, x_2, \u0026hellip;, x_3} $$\n$$ E = mc^2 $$\n1 2 3 4 5 6  # include\u0026lt;iostream\u0026gt; # include\u0026lt;cstdio\u0026gt;  int main() { printf(\u0026#34;Hello world\\n\u0026#34;); }   Header 2 ğŸ§‘â€ğŸš€ this is header 2\nHeader 3 ğŸ‡ This is header 3.\n","permalink":"https://haventong.github.io/post/my-first-post/","summary":"Header 1 âœŒï¸ æµ‹è¯•ä¸­æ–‡æ˜¯å¦å¯ç”¨ This is my first post. Test inline code print(\u0026quot;hello world\u0026quot;) ä¸‹é¢ä¸»è¦ä»‹ç»æ¨¡å‹å®šä¹‰ $\\mathcal{G} = (\\mathcal{V},\\mathcal{E},\\mathcal{R})$ $$ \\tilde{X} = {x_1, x_2, \u0026hellip;, x_3} $$ $$ E = mc^2 $$ 1 2 3 4 5 6 # include\u0026lt;iostream\u0026gt; # include\u0026lt;cstdio\u0026gt; int main() { printf(\u0026#34;Hello world\\n\u0026#34;); } Header 2 ğŸ§‘â€ğŸš€ this","title":"My First Post"}]